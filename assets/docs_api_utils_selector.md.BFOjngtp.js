var i=Object.defineProperty;var c=(o,t)=>i(o,"name",{value:t,configurable:!0});import{$ as s,a5 as g,S as r,V as b,a0 as e,a6 as a,ag as n,W as d}from"./chunks/plugin-vue_export-helper.hykleeSY.js";const u=JSON.parse('{"title":"Widget 选择器","description":"","frontmatter":{"title":"Widget 选择器"},"headers":[],"relativePath":"docs/api/utils/selector.md","filePath":"docs/api/utils/selector.md"}'),Z={name:"docs/api/utils/selector.md"};function m(o,t,I,y,x,p){const l=g("InkCodeBlock");return b(),r("div",null,[t[0]||(t[0]=e("h1",{id:"findwidget",tabindex:"-1"},[d("findWidget "),e("a",{class:"header-anchor",href:"#findwidget","aria-label":'Permalink to "findWidget"'},"​")],-1)),t[1]||(t[1]=e("p",null,[e("code",null,"findWidget"),d(" 是一个组件查找工具，提供类似 DOM "),e("code",null,"querySelector"),d(" 的体验，用选择器在 Widget 树中定位组件实例。")],-1)),t[2]||(t[2]=e("h2",{id:"导入",tabindex:"-1"},[d("导入 "),e("a",{class:"header-anchor",href:"#导入","aria-label":'Permalink to "导入"'},"​")],-1)),a(l,{"code-base64":"aW1wb3J0IHsgZmluZFdpZGdldCwgY2xlYXJTZWxlY3RvckNhY2hlIH0gZnJvbSAnQC9jb3JlL2hlbHBlci93aWRnZXQtc2VsZWN0b3InOwo=",lang:"ts",meta:""}),t[3]||(t[3]=e("h2",{id:"方法签名",tabindex:"-1"},[d("方法签名 "),e("a",{class:"header-anchor",href:"#方法签名","aria-label":'Permalink to "方法签名"'},"​")],-1)),a(l,{"code-base64":"aW1wb3J0IHR5cGUgeyBXaWRnZXQgfSBmcm9tICdAL2NvcmUvYmFzZSc7CgpleHBvcnQgaW50ZXJmYWNlIEZpbmRPcHRpb25zIHsKICBtdWx0aXBsZT86IGJvb2xlYW47CiAgY29udGV4dD86IFdpZGdldCB8IG51bGw7Cn0KCmV4cG9ydCBmdW5jdGlvbiBmaW5kV2lkZ2V0PFQgPSBXaWRnZXQ+KAogIG5vZGU6IFdpZGdldCB8IG51bGwsCiAgc2VsZWN0b3I6IHN0cmluZywKICBvcHRpb25zPzogRmluZE9wdGlvbnMsCik6IFQgfCBUW10gfCBudWxsOwo=",lang:"ts",meta:""}),t[4]||(t[4]=n('<h2 id="选择器语法" tabindex="-1">选择器语法 <a class="header-anchor" href="#选择器语法" aria-label="Permalink to &quot;选择器语法&quot;">​</a></h2><p>支持以下选择器片段与组合方式：</p><table tabindex="0"><thead><tr><th style="text-align:left;">类型</th><th style="text-align:left;">语法</th><th style="text-align:left;">示例</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">ID</td><td style="text-align:left;"><code>#id</code></td><td style="text-align:left;"><code>#node-1</code></td><td style="text-align:left;">匹配 <code>widget.key === &quot;node-1&quot;</code></td></tr><tr><td style="text-align:left;">Type</td><td style="text-align:left;"><code>Type</code></td><td style="text-align:left;"><code>Container</code></td><td style="text-align:left;">匹配 <code>widget.type</code>（忽略 <code>Stub</code> 后缀差异）</td></tr><tr><td style="text-align:left;">Class</td><td style="text-align:left;"><code>.class</code></td><td style="text-align:left;"><code>.selected</code></td><td style="text-align:left;">匹配 <code>widget.data.className</code>（字符串或数组），也会把 <code>.Text</code> 视为匹配 <code>type=Text</code></td></tr><tr><td style="text-align:left;">Attr</td><td style="text-align:left;"><code>[name]</code> / <code>[name=&quot;value&quot;]</code></td><td style="text-align:left;"><code>[disabled]</code> / <code>[role=&quot;toolbar&quot;]</code></td><td style="text-align:left;">优先匹配 <code>widget.data[name]</code>，缺失时回退匹配 <code>widget[name]</code></td></tr><tr><td style="text-align:left;">伪类</td><td style="text-align:left;"><code>:active</code> / <code>:root</code></td><td style="text-align:left;"><code>:active</code></td><td style="text-align:left;"><code>:active</code> 匹配 <code>widget.data.active === true</code> 或 <code>widget.active === true</code>；<code>:root</code> 匹配“逻辑根”（无 parent 或 parent 中不存在指向自身的连接引用）</td></tr><tr><td style="text-align:left;">后代</td><td style="text-align:left;"><code>A B</code></td><td style="text-align:left;"><code>Row Text</code></td><td style="text-align:left;">后代组合（递归遍历）</td></tr><tr><td style="text-align:left;">子代</td><td style="text-align:left;"><code>A &gt; B</code></td><td style="text-align:left;"><code>Column &gt; Button</code></td><td style="text-align:left;">仅匹配直接子级</td></tr></tbody></table><h2 id="返回值与缓存" tabindex="-1">返回值与缓存 <a class="header-anchor" href="#返回值与缓存" aria-label="Permalink to &quot;返回值与缓存&quot;">​</a></h2><ul><li>默认返回第一个匹配项：<code>T | null</code></li><li><code>multiple: true</code> 返回全部匹配项：<code>T[]</code></li><li>当 <code>multiple: true</code> 时，会以 <code>node</code> 为根建立缓存；组件树变更后需要清理缓存：</li></ul>',5)),a(l,{"code-base64":"Y2xlYXJTZWxlY3RvckNhY2hlKHJvb3QpOwo=",lang:"ts",meta:""}),t[5]||(t[5]=e("h2",{id:"使用示例",tabindex:"-1"},[d("使用示例 "),e("a",{class:"header-anchor",href:"#使用示例","aria-label":'Permalink to "使用示例"'},"​")],-1)),a(l,{"code-base64":"aW1wb3J0IHsgZmluZFdpZGdldCB9IGZyb20gJ0AvY29yZS9oZWxwZXIvd2lkZ2V0LXNlbGVjdG9yJzsKaW1wb3J0IHR5cGUgeyBUZXh0IH0gZnJvbSAnQC9jb3JlJzsKCmNvbnN0IHRpdGxlID0gZmluZFdpZGdldDxUZXh0Pihyb290LCAnI3RpdGxlJyk7CmNvbnN0IGFsbFRleHQgPSBmaW5kV2lkZ2V0KHJvb3QsICdUZXh0JywgeyBtdWx0aXBsZTogdHJ1ZSB9KTsKY29uc3QgYWN0aXZlTm9kZXMgPSBmaW5kV2lkZ2V0KHJvb3QsICdNaW5kTWFwTm9kZTphY3RpdmUnLCB7IG11bHRpcGxlOiB0cnVlIH0pOwpjb25zdCB0b29sYmFyQnV0dG9ucyA9IGZpbmRXaWRnZXQocm9vdCwgJ01pbmRNYXBWaWV3cG9ydCA+IENvbnRhaW5lcltyb2xlPSJ0b29sYmFyIl0gQnV0dG9uJywgewogIG11bHRpcGxlOiB0cnVlLAp9KTsK",lang:"ts",meta:""}),t[6]||(t[6]=n('<h2 id="混淆警告" tabindex="-1">混淆警告 <a class="header-anchor" href="#混淆警告" aria-label="Permalink to &quot;混淆警告&quot;">​</a></h2><p>如果你的选择器依赖“类型字符串”（例如 <code>MindMapNode</code>），而你的构建产物会对类名/函数名做混淆压缩，那么运行时生成的类型名可能与源码不同，从而导致 <code>findWidget</code> 在生产环境查找失败。</p><p>建议：</p><ol><li>在相关构建（例如 Vite）中开启 <code>keepNames</code>，尽量保持 <code>constructor.name</code> 在构建前后一致：</li></ol>',4)),a(l,{"code-base64":"Ly8gdml0ZS5jb25maWcudHMKaW1wb3J0IHsgZGVmaW5lQ29uZmlnIH0gZnJvbSAndml0ZSc7CgpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb25maWcoewogIGVzYnVpbGQ6IHsKICAgIGtlZXBOYW1lczogdHJ1ZSwKICB9LAogIGJ1aWxkOiB7CiAgICBtaW5pZnk6ICd0ZXJzZXInLAogICAgdGVyc2VyT3B0aW9uczogewogICAgICBrZWVwX2NsYXNzbmFtZXM6IHRydWUsCiAgICAgIGtlZXBfZm5hbWVzOiB0cnVlLAogICAgfSwKICB9LAp9KTsK",lang:"ts",meta:""}),t[7]||(t[7]=e("ol",{start:"2"},[e("li",null,[d("如果必须混淆且无法保留名称，请不要在 "),e("code",null,"findWidget"),d(" 里手写类型字符串；改用构造器的运行时名称生成选择器，确保混淆前后一致：")])],-1)),a(l,{"code-base64":"aW1wb3J0IHsgZmluZFdpZGdldCB9IGZyb20gJ0AvY29yZS9oZWxwZXIvd2lkZ2V0LXNlbGVjdG9yJzsKaW1wb3J0IHsgTWluZE1hcE5vZGUgfSBmcm9tICdAL2RlbW8vbWluZG1hcC93aWRnZXRzL21pbmRtYXAtbm9kZSc7Cgpjb25zdCB0eXBlID0gTWluZE1hcE5vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yLm5hbWU7CmNvbnN0IG5vZGUgPSBmaW5kV2lkZ2V0KHJvb3QsIGAke3R5cGV9I25vZGUtMWApOwo=",lang:"ts",meta:""})])}c(m,"_sfc_render");const C=s(Z,[["render",m]]);export{u as __pageData,C as default};
