var qi=Object.defineProperty;var Xo=(e,o,t)=>o in e?qi(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var u=(e,o)=>qi(e,"name",{value:o,configurable:!0});var b=(e,o,t)=>Xo(e,typeof o!="symbol"?o+"":o,t);import{j as E,P as Uo,a1 as w,a2 as ei,e as Lo,a3 as ae,a4 as Pt,a5 as p,a6 as $,a7 as mt,a8 as B,a9 as Q,aa as U,ab as wt,ac as _,ad as vt,ae as ve,af as Bt,ag as it,ah as ni,ai as A,aj as jt,ak as ct,al as at,am as Ot,an as Dt,ao as kt,ap as qo,aq as Jo,ar as Zo,as as Ji,at as gn,au as Qo,av as tr,aw as er,ax as nr,ay as ir,az as or,aA as Io,aB as rr,aC as Tt,aD as At,aE as Fo,aF as sr,aG as ii,aH as ar,aI as re,aJ as lr,x as mn,A as pn,aK as ne,aL as cr,aM as Ze,aN as We,aO as He,aP as Do,aQ as hr,aR as Me,aS as dr,T as oe,aT as ur,aU as fr,aV as Vt,aW as xe,aX as gr,G as mr,E as pr,aY as Bo,aZ as Qe,a_ as oi,a$ as zt,b0 as Zi,b1 as yr,b2 as Sr,b3 as Qi,b4 as br,b5 as wr,b6 as vr,b7 as xr,b8 as yn,o as zo,b9 as Cr,ba as kr,bb as Mr,bc as tn,bd as Ut,be as en,bf as to,bg as Rr,bh as eo,s as Tr,M as Ar,J as Pr,bi as no,bj as Lr}from"../app.Co1krBb7.js";import{r as P,R as Ir,t as Fr}from"./docs-tools.DVPRjDt7.js";import"./plugin-vue_export-helper.hykleeSY.js";function Dr({children:e,getPopupContainer:o}){return E.jsx(Uo.Provider,{value:o??null,children:E.jsx(P.Fragment,{children:e})})}u(Dr,"ConfigProvider");const io={defaultAlgorithm:Symbol("defaultAlgorithm"),darkAlgorithm:Symbol("darkAlgorithm")},Et=u(({className:e,style:o,background:t,backgroundAlpha:n=1,onRuntimeReady:i,onResize:r,id:s})=>{const a=P.useRef(null),l=P.useRef(null),d=P.useRef({width:0,height:0}),h=P.useRef(null),[g,f]=P.useState(!1),c=P.useRef(!1);c.current=g;const y=P.useRef(i);y.current=i;const m=P.useRef(r);m.current=r;const S=w[ei()].background.base,v=t||S,x=n===1?v:"transparent",[T]=P.useState(()=>s||`inkwell-canvas-${Math.random().toString(36).slice(2)}`);return P.useEffect(()=>{const k=a.current;if(!k)return;k.id=T,k.innerHTML="";let C=!0;f(!1);const R=u((L,I)=>{if(!C)return;const D=l.current;!D||!m.current||m.current(L,I,D)},"notifyResize");return u(async()=>{for(;C;){const N=k.getBoundingClientRect();if(N.width>0&&N.height>0)break;await new Promise(X=>{window.requestAnimationFrame(()=>X())})}if(!C)return;const L=await Lo.create(T,{renderer:"canvas2d",background:v,backgroundAlpha:n});if(!C){L.destroy();return}l.current=L,y.current&&await y.current(L);const I=k.getBoundingClientRect(),D=Math.round(I.width),H=Math.round(I.height);D>0&&H>0?(d.current={width:D,height:H},R(D,H)):d.current.width>0&&d.current.height>0&&R(d.current.width,d.current.height);let F=0,j=!1,V=null;const O=u(()=>{j||!C||(j=!0,f(!0),V&&(V(),V=null),F&&(window.cancelAnimationFrame(F),F=0))},"show"),W=u(()=>{var tt,G;if(!C||j)return;const N=u(ot=>{if(!ot||typeof ot!="object")return!1;const rt=ot;return typeof rt.width=="number"&&typeof rt.height=="number"},"isSizeLike"),X=(tt=L.getRootWidget)==null?void 0:tt.call(L),K=(G=X==null?void 0:X.renderObject)==null?void 0:G.size;if(N(K)&&K.width>0&&K.height>0){O();return}F=window.requestAnimationFrame(W)},"tryShow");V=L.addTickListener(()=>{W()}),W()},"initRuntime")(),()=>{C=!1,h.current!=null&&(window.cancelAnimationFrame(h.current),h.current=null),l.current&&(l.current.destroy(),l.current=null),k&&(k.innerHTML="")}},[T,v,n]),P.useEffect(()=>{const k=a.current;if(!k)return;const C=new ResizeObserver(R=>{window.requestAnimationFrame(()=>{if(!Array.isArray(R)||!R.length)return;const M=R[0],L=Math.round(M.contentRect.width),I=Math.round(M.contentRect.height);if(L===0||I===0)return;const D=d.current;D.width===L&&D.height===I||(d.current={width:L,height:I},!(!l.current||!m.current)&&(h.current!=null&&window.cancelAnimationFrame(h.current),h.current=window.requestAnimationFrame(()=>{h.current=null,l.current&&m.current&&m.current(L,I,l.current)})))})});return C.observe(k),()=>{C.disconnect()}},[]),E.jsx("div",{className:e,style:{width:"100%",height:"100%",overflow:"hidden",position:"relative",boxSizing:"border-box",background:x,...o},children:E.jsx("div",{ref:a,style:{width:"100%",height:"100%",overflow:"hidden",position:"relative",visibility:g?"visible":"hidden"}})})},"InkwellCanvas");var Gt=(e=>(e.Light="light",e.Dark="dark",e))(Gt||{}),It=(e=>(e.InteractiveCounter="interactive-counter",e.WidgetGallery="widget-gallery",e.CompGallery="comp-gallery",e.Swiper="swiper",e.GlassCard="glass-card",e.Mindmap="mindmap",e.Spreadsheet="spreadsheet",e.EditableText="editable-text",e.Wiki="wiki",e.Resume="resume",e))(It||{});function Br(e,o){const t=typeof o=="string"&&o.trim().length>0?o:void 0;if(t===e.backgroundImageSrc)return;if(e.backgroundImageSrc=t,e.bgImageLoaded=!1,e.bgImageNaturalW=0,e.bgImageNaturalH=0,e.bgImageVersion+=1,!t){e.bgImage=null,e.markNeedsPaint();return}if(typeof Image>"u"){e.bgImage=null,e.markNeedsPaint();return}const n=new Image;n.decoding="async",n.onload=()=>{if(e.isDisposed()||e.backgroundImageSrc!==t)return;e.bgImageLoaded=!0,e.bgImageNaturalW=n.naturalWidth||0,e.bgImageNaturalH=n.naturalHeight||0,e.bgImageVersion+=1;const{width:i,height:r}=e.renderObject.size;i>0&&r>0&&(e.updateStaticCaches(i,r),e.updateSuggestedTextStyle(i,r)),e.markNeedsPaint()},n.onerror=()=>{if(e.isDisposed()||e.backgroundImageSrc!==t)return;e.bgImage=null,e.bgImageLoaded=!1,e.bgImageNaturalW=0,e.bgImageNaturalH=0,e.bgImageVersion+=1;const{width:i,height:r}=e.renderObject.size;i>0&&r>0&&(e.updateStaticCaches(i,r),e.updateSuggestedTextStyle(i,r,{forceThemeFallback:!0})),e.markNeedsPaint()},n.src=t,e.bgImage=n,e.markNeedsPaint()}u(Br,"syncBackgroundImage");function zr(e){let o=2166136261;for(let t=0;t<e.length;t++)o^=e.charCodeAt(t),o=Math.imul(o,16777619);return o>>>0}u(zr,"toSeed");function Er(e){let o=e>>>0;return()=>(o=Math.imul(1664525,o)+1013904223>>>0,(o&4294967295)/4294967296)}u(Er,"seeded01");function ut(e,o,t,n,i,r){const s=Math.max(0,Math.min(r,Math.min(n,i)/2)),a=e.roundRect;if(typeof a=="function"){a.call(e,o,t,n,i,s);return}e.moveTo(o+s,t),e.lineTo(o+n-s,t),e.arcTo(o+n,t,o+n,t+s,s),e.lineTo(o+n,t+i-s),e.arcTo(o+n,t+i,o+n-s,t+i,s),e.lineTo(o+s,t+i),e.arcTo(o,t+i,o,t+i-s,s),e.lineTo(o,t+s),e.arcTo(o,t,o+s,t,s),e.closePath()}u(ut,"roundedRectPath");function Wr(e,o,t,n,i,r,s,a,l,d,h,g,f,c){if(e.save(),e.beginPath(),ut(e,0,0,t,n,r),e.clip(),!!g&&f>0&&c>0){const m=f,S=c,v=Math.max(t/m,n/S),x=m*v,T=S*v,k=(t-x)/2,C=(n-T)/2;e.drawImage(g,k,C,x,T)}else{const m=e.createLinearGradient(0,0,t,n);m.addColorStop(0,i.background.container),m.addColorStop(.55,i.background.surface),m.addColorStop(1,i.background.container),e.fillStyle=m,e.fillRect(0,0,t,n);const S=Er(zr(o)),v=7;for(let T=0;T<v;T++){const k=t*(.15+S()*.7),C=n*(.15+S()*.7),R=Math.min(t,n)*(.18+S()*.25),M=.08+S()*.08;e.globalAlpha=M,e.fillStyle=T%2?i.primary:i.secondary,e.beginPath(),e.arc(k,C,R,0,Math.PI*2),e.fill()}if(e.globalAlpha=1,l>0&&d>0){e.globalAlpha=.9,e.fillStyle=i.background.container,e.beginPath(),ut(e,s,a,l,d,h),e.fill(),e.globalAlpha=1;const T=e.createLinearGradient(s,a,s+l,a+d);T.addColorStop(0,i.background.surface),T.addColorStop(1,i.background.container),e.globalAlpha=.8,e.fillStyle=T,e.beginPath(),ut(e,s,a,l,d,h),e.fill(),e.globalAlpha=1}}e.restore()}u(Wr,"renderBaseLayer");function Hr(e,o,t,n,i,r,s,a,l,d,h,g,f,c,y){e.save();const m=a>0&&l>0;if(e.beginPath(),ut(e,0,0,t,n,i),m&&ut(e,r,s,a,l,d),m)try{e.clip("evenodd")}catch{e.clip()}else e.clip();if(h&&g>0){const S=e.filter;if(typeof S=="string"){const v=S;e.filter=`blur(${g}px)`,e.drawImage(h,0,0,t,n),e.filter=v}else{const x=Math.max(1,g*.25);e.globalAlpha=1/(8*2+1);for(let T=-8;T<=8;T++){const k=T*x;e.drawImage(h,k,0,t,n)}e.globalAlpha=1}}if(e.globalAlpha=f,e.fillStyle=o.background.container,e.fillRect(0,0,t,n),e.globalAlpha=1,c){const S=y*.001,v=(Math.sin(S*.9)*.5+.5)*t,x=e.createLinearGradient(v-t*.6,0,v+t*.6,n);x.addColorStop(0,"rgba(255,255,255,0)"),x.addColorStop(.5,"rgba(255,255,255,0.14)"),x.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=x,e.fillRect(0,0,t,n)}e.globalAlpha=.5,e.strokeStyle=o.border.base,e.lineWidth=1,e.beginPath(),ut(e,.5,.5,t-1,n-1,i),e.stroke(),e.globalAlpha=1,e.restore()}u(Hr,"paintFrostedOverlay");function Or(e,o,t,n,i,r,s,a,l){!l||r<=0||s<=0||(e.save(),e.beginPath(),ut(e,n,i,r,s,a),e.clip(),e.drawImage(l,0,0,o,t),e.restore())}u(Or,"paintClearWindow");function _r(e,o,t,n,i,r,s){i<=0||r<=0||(e.save(),e.globalAlpha=.65,e.strokeStyle=o.border.base,e.lineWidth=1,e.beginPath(),ut(e,t+.5,n+.5,i-1,r-1,s),e.stroke(),e.globalAlpha=1,e.restore())}u(_r,"paintWindowFrame");function Nr(e,o,t,n,i,r,s,a,l,d,h,g){if(!e.baseLayer){const S=typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas"),v=(typeof OffscreenCanvas<"u"&&S instanceof OffscreenCanvas,S.getContext("2d"));if(!v)return;e.baseLayer={canvas:S,ctx:v,key:""}}if(e.baseLayer.key===o)return;e.baseLayer.key=o;const f=Math.max(1,Math.ceil(t*i)),c=Math.max(1,Math.ceil(n*i));e.baseLayer.canvas.width!==f&&(e.baseLayer.canvas.width=f),e.baseLayer.canvas.height!==c&&(e.baseLayer.canvas.height=c);const y=e.baseLayer.ctx;y.setTransform(i,0,0,i,0,0),y.clearRect(0,0,t,n);const m=e.backgroundImageSrc&&e.bgImageLoaded&&e.bgImage&&e.bgImageNaturalW>0&&e.bgImageNaturalH>0?e.bgImage:null;Wr(y,o,t,n,r,s,a,l,d,h,g,m,e.bgImageNaturalW,e.bgImageNaturalH)}u(Nr,"ensureBaseLayer");function yt(e,o,t){return Math.max(o,Math.min(t,e))}u(yt,"clamp$2");function $r(e,o){const t=Number.isFinite(o.maxWidth)?o.maxWidth:360,n=Number.isFinite(o.maxHeight)?o.maxHeight:240,i=Number.isFinite(o.minWidth)?o.minWidth:0,r=Number.isFinite(o.minHeight)?o.minHeight:0,s=typeof e.cardW=="number"?e.cardW:Math.min(520,t),a=typeof e.cardH=="number"?e.cardH:Math.min(320,n,Math.max(180,s*.58)),l=yt(s,i,t),d=yt(a,r,n);return l>0&&d>0&&e.updateStaticCaches(l,d),{width:l,height:d}}u($r,"layoutFrostedGlassCard");function Kr(e,o){var c;const t=o.renderer,n=(c=t.getRawInstance)==null?void 0:c.call(t),i=e.theme??w.light,{width:r,height:s}=e.renderObject.size;if(r<=0||s<=0)return;if(!n){t.drawRect({x:0,y:0,width:r,height:s,fill:i.background.container,stroke:i.border.base,strokeWidth:1,borderRadius:Math.min(24,s*.12)});return}const{windowX:a,windowY:l,windowW:d,windowH:h,windowR:g}=e.layoutCache;if(n.save(),n.beginPath(),ut(n,0,0,r,s,Math.min(24,s*.12)),n.clip(),e.baseLayer){const y=e.baseLayer.canvas;n.drawImage(y,0,0,r,s)}else n.fillStyle=i.background.container,n.fillRect(0,0,r,s);const f=e.baseLayer?e.baseLayer.canvas:null;Hr(n,i,r,s,Math.min(24,s*.12),a,l,d,h,g,f,e.blurPx,e.glassAlpha,e.animate,e.timeMs),Or(n,r,s,a,l,d,h,g,f),_r(n,i,a,l,d,h,g),n.restore()}u(Kr,"paintFrostedGlassCard");function Vr(e,o,t,n,i){const r=e.layoutCache;r.layoutW=o,r.layoutH=t,r.radius=n,r.padding=i,r.windowDisabled=e.windowDisabled;let s=0,a=0,l=0,d=0,h=0;if(e.windowDisabled){r.hasWindowRect=!1,r.windowRatio=e.windowRatio,r.windowRectX=0,r.windowRectY=0,r.windowRectW=0,r.windowRectH=0,r.windowRectRadius=null,r.windowX=0,r.windowY=0,r.windowW=0,r.windowH=0,r.windowR=0;return}if(e.windowRect){r.hasWindowRect=!0,r.windowRatio=e.windowRatio,r.windowRectX=e.windowRect.x,r.windowRectY=e.windowRect.y,r.windowRectW=e.windowRect.width,r.windowRectH=e.windowRect.height,r.windowRectRadius=typeof e.windowRect.radius=="number"?e.windowRect.radius:null;const g=e.windowRect.x,f=e.windowRect.y,c=e.windowRect.width,y=e.windowRect.height;l=yt(c,16,o),d=yt(y,16,t),s=yt(g,0,Math.max(0,o-l)),a=yt(f,0,Math.max(0,t-d));const m=typeof e.windowRect.radius=="number"?e.windowRect.radius:Math.min(n*.7,14);h=yt(m,0,Math.min(l,d)/2)}else r.hasWindowRect=!1,r.windowRatio=e.windowRatio,r.windowRectX=0,r.windowRectY=0,r.windowRectW=0,r.windowRectH=0,r.windowRectRadius=null,l=yt(o*e.windowRatio,88,Math.min(180,o-i*2-40)),d=yt(t-i*2,96,t-i*2),s=o-i-l,a=(t-d)/2,h=Math.min(n*.7,14);r.windowX=s,r.windowY=a,r.windowW=l,r.windowH=d,r.windowR=h}u(Vr,"computeWindowLayout");function jr(e,o,t){const n=e.getDpr(),i=e.theme??w.light,r=Math.min(24,t*.12),s=Math.max(12,Math.min(20,Math.min(o,t)*.06));Vr(e,o,t,r,s);const{windowX:a,windowY:l,windowW:d,windowH:h,windowR:g}=e.layoutCache,f=u(y=>Math.round(y*n),"q"),c=["base",f(o),f(t),Math.round(n*100),f(a),f(l),f(d),f(h),f(g),e.backgroundImageSrc??"",e.bgImageVersion.toFixed(0),i.primary,i.secondary,i.background.container,i.background.surface].join("|");e.ensureBaseLayer(c,o,t,n,i,r,a,l,d,h,g)}u(jr,"updateStaticCaches");let Re=null;function Yr(){if(Re)return Re;const e=typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas"),o=(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas,e.getContext("2d"));return o?(Re={canvas:e,ctx:o},Re):null}u(Yr,"ensureAvgSampler");function Gr(e,o,t,n,i){const r=Math.max(0,Math.floor(n)),s=Math.max(0,Math.floor(i));if(r<=0||s<=0)return null;const a=Yr();if(!a)return null;a.canvas.width!==1&&(a.canvas.width=1),a.canvas.height!==1&&(a.canvas.height=1);const l=Math.max(0,Math.floor(o)),d=Math.max(0,Math.floor(t)),h=a.ctx;h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,1,1),h.imageSmoothingEnabled=!0;try{h.drawImage(e,l,d,r,s,0,0,1,1)}catch{return null}let g;try{g=h.getImageData(0,0,1,1)}catch{return null}const f=g.data;return!f||f.length<4?null:{r:f[0],g:f[1],b:f[2],a:f[3]/255}}u(Gr,"averageRegionRGBAFast");function Xr(e,o,t,n,i){const r=Math.max(0,Math.floor(n)),s=Math.max(0,Math.floor(i));if(r<=0||s<=0)return null;const a=Math.max(0,Math.floor(o)),l=Math.max(0,Math.floor(t));let d;try{d=e.getImageData(a,l,r,s)}catch{return null}const h=d.data;if(!h||h.length<4)return null;const g=r*s,y=Math.max(1,Math.floor(Math.sqrt(g/1200)))*4;let m=0,S=0,v=0,x=0,T=0;for(let k=0;k<h.length;k+=y){const C=h[k+3]/255;C<=0||(m+=h[k]*C,S+=h[k+1]*C,v+=h[k+2]*C,x+=C,T++)}return T<=0||x<=0?null:{r:m/x,g:S/x,b:v/x,a:x/T}}u(Xr,"averageRegionRGBA");function Ur(e){return e?(.2126*e.r+.7152*e.g+.0722*e.b)/255<.55?{fill:"#ffffff",stroke:"rgba(0,0,0,0.65)"}:{fill:"#111111",stroke:"rgba(255,255,255,0.7)"}:{fill:"#ffffff",stroke:"rgba(0,0,0,0.65)"}}u(Ur,"pickTextFillAndStroke");function oo(e){const o=e.trim();if(o.length===4&&o[0]==="#"){const t=Number.parseInt(o[1]+o[1],16),n=Number.parseInt(o[2]+o[2],16),i=Number.parseInt(o[3]+o[3],16);return Number.isFinite(t)&&Number.isFinite(n)&&Number.isFinite(i)?{r:t,g:n,b:i,a:1}:null}if(o.length===7&&o[0]==="#"){const t=Number.parseInt(o.slice(1,3),16),n=Number.parseInt(o.slice(3,5),16),i=Number.parseInt(o.slice(5,7),16);return Number.isFinite(t)&&Number.isFinite(n)&&Number.isFinite(i)?{r:t,g:n,b:i,a:1}:null}return null}u(oo,"parseHexColorToRGBA");function qr(e,o,t,n){var k;const i=e.onSuggestedTextStyleChange,r=e.textSampleRect;if(!i||!r)return;e.baseLayer||e.updateStaticCaches(o,t);const s=e.getDpr(),a=((k=e.baseLayer)==null?void 0:k.key)??"",l=yt(r.x,0,o),d=yt(r.y,0,t),h=yt(r.width,0,Math.max(0,o-l)),g=yt(r.height,0,Math.max(0,t-d)),f=Math.round(l*s),c=Math.round(d*s),y=Math.round(h*s),m=Math.round(g*s),S=`${a}|${f}|${c}|${y}|${m}`;if(e.cachedSuggestedTextStyle&&e.cachedSuggestedTextStyleSampleKey===S)return;let v=null;if(n!=null&&n.forceThemeFallback){const C=e.theme??w.light;v=oo(C.background.container)}else if(e.baseLayer){const C=e.baseLayer.canvas;v=Gr(C,f,c,y,m)??Xr(e.baseLayer.ctx,f,c,y,m)}else{const C=e.theme??w.light;v=oo(C.background.container)}const x=Ur(v);e.cachedSuggestedTextStyleSampleKey=S,e.cachedSuggestedTextStyle=x;const T=`${x.fill}|${x.stroke}`;if(e.lastSuggestedTextStyleKey!==T){if(e.lastSuggestedTextStyleKey=T,typeof queueMicrotask=="function"){queueMicrotask(()=>{e.isDisposed()||i(x)});return}setTimeout(()=>{e.isDisposed()||i(x)},0)}}u(qr,"updateSuggestedTextStyle");function Jr(e,o){return e===o?!0:!e||!o?!1:e.x===o.x&&e.y===o.y&&e.width===o.width&&e.height===o.height&&(e.radius??null)===(o.radius??null)}u(Jr,"isSameWindowRect");function Zr(e,o){return e===o?!0:!e||!o?!1:e.x===o.x&&e.y===o.y&&e.width===o.width&&e.height===o.height}u(Zr,"isSameRect");function Qr(e,o){const t=e.data,n=o.width!==t.width||o.height!==t.height,i=o.theme!==t.theme,r=o.blurPx!==t.blurPx,s=o.glassAlpha!==t.glassAlpha,a=o.animate!==t.animate,l=o.windowRatio!==t.windowRatio,d=!Jr(o.windowRect,t.windowRect),h=!Zr(o.textSampleRect,t.textSampleRect),g=o.onSuggestedTextStyleChange!==t.onSuggestedTextStyleChange,f=o.backgroundImageSrc!==t.backgroundImageSrc;if(n){e.markNeedsLayout();return}const c=i||l||d||f,y=c||h||g;y&&(e.cachedSuggestedTextStyleSampleKey="",e.cachedSuggestedTextStyle=null,g&&(e.lastSuggestedTextStyleKey=""));const{width:m,height:S}=e.renderObject.size;c&&m>0&&S>0&&e.updateStaticCaches(m,S),y&&m>0&&S>0&&e.updateSuggestedTextStyle(m,S),(r||s||a||c||h||g)&&e.markNeedsPaint()}u(Qr,"didUpdateFrostedGlassCard");const li=class li extends ae{constructor(){super(...arguments);b(this,"cardW");b(this,"cardH");b(this,"theme");b(this,"animate",!0);b(this,"blurPx",10);b(this,"glassAlpha",.18);b(this,"windowRatio",.32);b(this,"windowDisabled",!1);b(this,"windowRect");b(this,"textSampleRect");b(this,"onSuggestedTextStyleChange");b(this,"lastSuggestedTextStyleKey","");b(this,"cachedSuggestedTextStyleSampleKey","");b(this,"cachedSuggestedTextStyle",null);b(this,"backgroundImageSrc");b(this,"bgImage",null);b(this,"bgImageLoaded",!1);b(this,"bgImageNaturalW",0);b(this,"bgImageNaturalH",0);b(this,"bgImageVersion",0);b(this,"rafId",null);b(this,"timeMs",0);b(this,"baseLayer",null);b(this,"layoutCache",{layoutW:0,layoutH:0,radius:0,padding:0,windowDisabled:!1,hasWindowRect:!1,windowRatio:.32,windowRectX:0,windowRectY:0,windowRectW:0,windowRectH:0,windowRectRadius:null,windowX:0,windowY:0,windowW:0,windowH:0,windowR:0})}createElement(t){this.cardW=typeof t.width=="number"?t.width:void 0,this.cardH=typeof t.height=="number"?t.height:void 0,this.theme=t.theme,this.animate=t.animate!==!1,this.blurPx=typeof t.blurPx=="number"?yt(t.blurPx,0,40):10,this.glassAlpha=typeof t.glassAlpha=="number"?yt(t.glassAlpha,0,1):.18,this.windowRatio=typeof t.windowRatio=="number"?yt(t.windowRatio,.2,.5):.32;const n=t.windowRect;this.windowDisabled=n===!1,this.windowRect=!this.windowDisabled&&n&&typeof n=="object"&&typeof n.x=="number"&&typeof n.y=="number"&&typeof n.width=="number"&&typeof n.height=="number"?n:void 0;const i=t.textSampleRect;this.textSampleRect=i&&typeof i.x=="number"&&typeof i.y=="number"&&typeof i.width=="number"&&typeof i.height=="number"?i:void 0,this.onSuggestedTextStyleChange=typeof t.onSuggestedTextStyleChange=="function"?t.onSuggestedTextStyleChange:void 0,Br(this,t.backgroundImageSrc);const r=super.createElement(t);return t.isRepaintBoundary==null&&(this.isRepaintBoundary=!0),r}didUpdateWidget(t){Qr(this,t)}performLayout(t){return $r(this,t)}getDpr(){var i,r,s;const t=((r=(i=this.runtime)==null?void 0:i.getRenderer)==null?void 0:r.call(i))??null,n=((s=t==null?void 0:t.getResolution)==null?void 0:s.call(t))??1;return typeof n=="number"&&Number.isFinite(n)&&n>0?n:1}updateStaticCaches(t,n){jr(this,t,n)}updateSuggestedTextStyle(t,n,i){qr(this,t,n,i)}ensureBaseLayer(t,n,i,r,s,a,l,d,h,g,f){Nr(this,t,n,i,r,s,a,l,d,h,g,f)}startAnimationLoop(){this.animate&&this.rafId==null&&(this.rafId=requestAnimationFrame(t=>this.tick(t)))}tick(t){this.isDisposed()||(this.timeMs=t,this.markNeedsPaint(),this.rafId=requestAnimationFrame(n=>this.tick(n)))}dispose(){if(this.rafId!=null){try{cancelAnimationFrame(this.rafId)}catch{}this.rafId=null}this.baseLayer=null,this.cachedSuggestedTextStyleSampleKey="",this.cachedSuggestedTextStyle=null,this.bgImage=null,super.dispose()}paintSelf(t){this.startAnimationLoop(),Kr(this,t)}};u(li,"FrostedGlassCard");let Oe=li;function ts({width:e,height:o,windowRatio:t,windowRect:n,theme:i,textStyle:r}){const s=Math.max(12,Math.min(20,Math.min(e,o)*.06)),a=Math.min(24,o*.12),l=yt(t,.2,.5);let d,h,g,f,c;if(n){const x=yt(n.width,16,e),T=yt(n.height,16,o);d=yt(n.x,0,Math.max(0,e-x)),h=yt(n.y,0,Math.max(0,o-T)),g=x,f=T,c=yt(typeof n.radius=="number"?n.radius:Math.min(a*.7,14),0,Math.min(x,T)/2)}else g=yt(e*l,88,Math.min(180,e-s*2-40)),f=yt(o-s*2,96,o-s*2),d=e-s-g,h=(o-f)/2,c=Math.min(a*.7,14);const y=Math.max(0,d-s*2),m={x:s,y:Math.max(0,(o-o*.6)/2),width:y,height:o*.6},S=i??w.light,v=r??{fill:S.text.primary,stroke:S.background.base};return{padding:s,windowRect:{x:d,y:h,width:g,height:f,radius:c},leftContentW:y,sampleRect:m,textStyle:v}}u(ts,"resolveGlassCardCompositeLayout");const ci=class ci extends Pt{constructor(){super(...arguments);b(this,"state",{textStyle:null});b(this,"handleSuggestedTextStyleChange",u(t=>{const n=this.state.textStyle;n&&n.fill===t.fill&&n.stroke===t.stroke||this.setState({textStyle:t})},"handleSuggestedTextStyleChange"))}render(){const t=this.props.theme??w.light,n=typeof this.props.width=="number"?this.props.width:520,i=typeof this.props.height=="number"?this.props.height:260,r=typeof this.props.windowRatio=="number"?this.props.windowRatio:.32,s=ts({width:n,height:i,windowRatio:r,windowRect:this.props.windowRect,theme:t,textStyle:this.state.textStyle});return p(B,{width:n,height:i,color:"transparent",children:$(vt,{children:[p(Oe,{width:n,height:i,theme:t,backgroundImageSrc:this.props.imageSrc,blurPx:this.props.blurPx,glassAlpha:this.props.glassAlpha,windowRatio:r,windowRect:s.windowRect,textSampleRect:s.leftContentW>0?s.sampleRect:void 0,onSuggestedTextStyleChange:s.leftContentW>0?this.handleSuggestedTextStyleChange:void 0,animate:this.props.animate},"glass-card-base"),s.leftContentW>0?p(mt,{left:s.padding,top:0,width:s.leftContentW,height:i,children:p(B,{width:s.leftContentW,height:i,color:"transparent",children:$(Q,{spacing:10,mainAxisAlignment:wt.Center,crossAxisAlignment:U.Start,children:[this.props.title?p(_,{text:this.props.title,fontSize:22,fontWeight:"bold",color:s.textStyle.fill,strokeColor:s.textStyle.stroke,strokeWidth:3}):null,this.props.subtitle?p(_,{text:this.props.subtitle,fontSize:14,lineHeight:20,color:s.textStyle.fill,strokeColor:s.textStyle.stroke,strokeWidth:2}):null]},"glass-card-content-col")})},"glass-card-content"):null]},"glass-card-stack")},"glass-card-composite")}};u(ci,"GlassCardComposite");let _e=ci;const qt=u(({title:e,theme:o,width:t,height:n,children:i})=>{const r=o===w.dark?18:16,s=o===w.dark?.16:.14,a=16,l=Math.min(24,n*.12);return $(Q,{spacing:8,mainAxisSize:it.Min,children:[p(ve,{width:t,height:n,children:$(vt,{allowOverflowPositioned:!0,children:[p(ni,{borderRadius:l,children:p(Oe,{width:t,height:n,theme:o,blurPx:r,glassAlpha:s,animate:!1,windowRect:!1})}),p(mt,{left:0,top:0,children:p(B,{width:t,height:n,color:"transparent",padding:{left:a,right:a,top:a,bottom:a},children:i})})]})}),p(_,{text:e,fontSize:13,color:o.text.secondary,textAlign:Bt.Center})]},`glass-card-${e}`)},"GlassPanel"),Jt=u(({title:e,children:o,theme:t,width:n})=>$(Q,{spacing:16,mainAxisSize:it.Min,children:[$(Q,{spacing:6,mainAxisSize:it.Min,children:[p(_,{text:e,fontSize:18,fontWeight:"bold",color:t.text.primary}),p(B,{width:n,height:1,color:A(t.text.primary,t===w.dark?.14:.1)})]},`section-header-${e}`),p(Q,{spacing:16,mainAxisSize:it.Min,children:o},`section-body-${e}`)]},`section-${e}`),"GlassSection");function es(e,o,t){return Math.max(o,Math.min(t,e))}u(es,"clamp$1");const hi=class hi extends Pt{constructor(){super(...arguments);b(this,"state",{modalOpen:!1,drawerOpen:!1,selectedCity:null,checkedList:["shanghai"],radioValue:"a",pickedDate:null,currentPage:1})}render(){const t=this.props.theme||w.light,n=this.props.width&&this.props.width>0?this.props.width:800,i=this.props.height&&this.props.height>0?this.props.height:600,r=A(t.text.primary,.06),s=A(t.text.primary,.22),a=A(t.text.primary,.32),l=A(t.text.primary,.44),d=[{title:"姓名",key:"name",dataIndex:"name",width:120,fixed:"left"},{title:"年龄",key:"age",dataIndex:"age",width:80},{title:"城市",key:"city",dataIndex:"city",width:120},{title:"电话",key:"phone",dataIndex:"phone",width:160},{title:"邮箱",key:"email",dataIndex:"email",width:220},{title:"地址",key:"address",dataIndex:"address",width:240},{title:"操作",key:"action",width:120,fixed:"right",render:u(()=>"查看","render")}],h=12,g=120,f=(this.state.currentPage-1)*h,c=Math.max(0,Math.min(h,g-f)),y=Array.from({length:c}).map((S,v)=>{const x=f+v;return{key:String(x+1),name:x%2===0?`张三${x+1}`:`李四${x+1}`,age:20+x%20,city:x%3===0?"上海":x%3===1?"北京":"深圳",phone:`138-${String(1e3+x).padStart(4,"0")}-${String(2e3+x).padStart(4,"0")}`,email:`user${x+1}@example.com`,address:`某市某区 ${x+1} 号`}}),m=es(Math.min(760,n-48),0,760);return p(ve,{width:n,height:i,children:$(vt,{allowOverflowPositioned:!0,children:[p(jt,{width:n,height:i,scrollBarTrackColor:r,scrollBarColor:s,scrollBarHoverColor:a,scrollBarActiveColor:l,children:p(B,{minWidth:n,minHeight:i,alignment:"center",color:t.background.base,children:p(ct,{padding:24,children:$(Q,{mainAxisAlignment:wt.Center,crossAxisAlignment:U.Start,spacing:24,mainAxisSize:it.Max,children:[$(Q,{spacing:8,mainAxisSize:it.Min,crossAxisAlignment:U.Start,children:[p(_,{text:"组件库画廊（src/comp）",fontSize:30,height:36,lineHeight:36,color:t.text.primary,fontWeight:"bold"},"demo-title"),p(_,{text:"常规组件外观与交互。",fontSize:13,color:t.text.secondary,lineHeight:18},"demo-subtitle")]},"header"),p(Jt,{title:"1. Button 按钮",theme:t,width:m,children:p(qt,{title:"类型与状态",theme:t,width:m,height:120,children:$(at,{spacing:12,mainAxisSize:it.Min,crossAxisAlignment:U.Center,children:[p(Ot,{theme:t,btnType:"default",width:88,onClick:u(()=>Dt.info("点击默认按钮"),"onClick"),children:p(_,{text:"默认",fontSize:14,color:t.text.primary,textAlignVertical:kt.Center,pointerEvent:"none"})}),p(Ot,{theme:t,btnType:"primary",width:88,onClick:u(()=>Dt.success("点击主按钮"),"onClick"),children:p(_,{text:"主按钮",fontSize:14,color:t.text.inverse,textAlignVertical:kt.Center,pointerEvent:"none"})}),p(Ot,{theme:t,danger:!0,btnType:"primary",width:88,onClick:u(()=>Dt.error("危险操作"),"onClick"),children:p(_,{text:"危险",fontSize:14,color:t.text.inverse,textAlignVertical:kt.Center,pointerEvent:"none"})}),p(Ot,{theme:t,disabled:!0,btnType:"default",width:88,children:p(_,{text:"禁用",fontSize:14,color:t.text.placeholder,textAlignVertical:kt.Center,pointerEvent:"none"})})]})})}),p(Jt,{title:"2. Table + Pagination",theme:t,width:m,children:p(qt,{title:"基础表格",theme:t,width:m,height:420,children:$(Q,{spacing:12,crossAxisAlignment:U.Start,children:[p(qo,{theme:t,width:m,height:320,columns:d,dataSource:y}),p(at,{mainAxisAlignment:wt.End,crossAxisAlignment:U.Center,children:p(Jo,{theme:t,total:g,current:this.state.currentPage,onChange:u(S=>this.setState({currentPage:S}),"onChange")})})]})})}),p(Jt,{title:"3. Form + Select + DatePicker",theme:t,width:m,children:p(qt,{title:"表单布局",theme:t,width:m,height:260,children:$(Zo,{theme:t,labelWidth:96,children:[p(Ji,{theme:t,label:"城市",required:!0,help:this.state.selectedCity?"":"请选择城市",validateStatus:this.state.selectedCity?"success":"error",children:p(gn,{theme:t,width:240,placeholder:"请选择",value:this.state.selectedCity,options:[{label:"上海",value:"shanghai"},{label:"北京",value:"beijing"},{label:"深圳",value:"shenzhen"}],onChange:u(S=>this.setState({selectedCity:S}),"onChange")})}),p(Ji,{theme:t,label:"日期",children:p(Qo,{theme:t,width:240,placeholder:"请选择日期",value:this.state.pickedDate,onChange:u(S=>this.setState({pickedDate:S}),"onChange")})})]})})}),p(Jt,{title:"4. Checkbox + Radio",theme:t,width:m,children:p(qt,{title:"选择控件",theme:t,width:m,height:220,children:$(Q,{spacing:16,crossAxisAlignment:U.Start,children:[p(tr,{theme:t,options:[{label:"上海",value:"shanghai"},{label:"北京",value:"beijing"},{label:"广州",value:"guangzhou",disabled:!0}],value:this.state.checkedList,onChange:u(S=>this.setState({checkedList:S}),"onChange")}),p(er,{theme:t,options:[{label:"A",value:"a"},{label:"B",value:"b"},{label:"C",value:"c"}],value:this.state.radioValue,onChange:u(S=>this.setState({radioValue:S}),"onChange")}),p(nr,{theme:t,label:"我已阅读并同意"})]})})}),p(Jt,{title:"5. Menu 导航菜单",theme:t,width:m,children:p(qt,{title:"垂直菜单",theme:t,width:m,height:220,children:p(ir,{theme:t,width:240,items:[{key:"home",label:"首页"},{key:"docs",label:"文档"},{key:"disabled",label:"禁用项",disabled:!0}],defaultSelectedKeys:["home"],onSelect:u(S=>Dt.info(`选中：${S}`),"onSelect")})})}),p(Jt,{title:"6. Modal + Drawer + Message + Popconfirm",theme:t,width:m,children:p(qt,{title:"弹层交互",theme:t,width:m,height:140,children:$(at,{spacing:12,mainAxisSize:it.Min,crossAxisAlignment:U.Center,children:[p(Ot,{theme:t,btnType:"primary",onClick:u(()=>this.setState({modalOpen:!0}),"onClick"),children:p(_,{text:"打开 Modal",fontSize:14,color:t.text.inverse,textAlignVertical:kt.Center,pointerEvent:"none"})}),p(Ot,{theme:t,btnType:"default",onClick:u(()=>this.setState({drawerOpen:!0}),"onClick"),children:p(_,{text:"打开 Drawer",fontSize:14,color:t.text.primary,textAlignVertical:kt.Center,pointerEvent:"none"})}),p(Ot,{theme:t,btnType:"default",onClick:u(()=>Dt.success("操作成功"),"onClick"),children:p(_,{text:"Message.success",fontSize:14,color:t.text.primary,textAlignVertical:kt.Center,pointerEvent:"none"})}),p(or,{theme:t,title:"确认删除？",description:"删除后将无法恢复",onConfirm:u(()=>Dt.success("已删除"),"onConfirm"),onCancel:u(()=>Dt.info("已取消"),"onCancel"),children:p(Ot,{theme:t,btnType:"primary",danger:!0,children:p(_,{text:"删除",fontSize:14,color:t.text.inverse,textAlignVertical:kt.Center,pointerEvent:"none"})})})]})})}),p(ct,{padding:{top:12,bottom:48},children:p(_,{text:"以上示例用于展示 src/comp 的交互与布局效果。",fontSize:12,color:t.text.secondary,textAlign:Bt.Center,pointerEvent:"none"})})]},"comp-gallery-root")})})},"comp-gallery-scroll"),p(Io,{theme:t,open:this.state.modalOpen,title:"对话框",onCancel:u(()=>this.setState({modalOpen:!1}),"onCancel"),onOk:u(()=>{this.setState({modalOpen:!1}),Dt.success("已确认")},"onOk"),children:p(_,{text:"这是一个基于 InkWell Widget 实现的 Modal。",fontSize:14,color:t.text.primary,lineHeight:22,pointerEvent:"none"})},"modal"),p(rr,{theme:t,open:this.state.drawerOpen,viewportWidth:n,viewportHeight:i,title:"抽屉",onClose:u(()=>this.setState({drawerOpen:!1}),"onClose"),children:$(Q,{spacing:12,crossAxisAlignment:U.Start,children:[p(_,{text:"这里是抽屉内容区域。",fontSize:14,color:t.text.primary,pointerEvent:"none"}),p(Ot,{theme:t,btnType:"primary",onClick:u(S=>{Dt.info("抽屉内触发消息")},"onClick"),children:p(_,{text:"触发 Message",fontSize:14,color:t.text.inverse,textAlignVertical:kt.Center,pointerEvent:"none"})})]})},"drawer")]})},"comp-gallery-stage")}};u(hi,"CompGalleryRoot");let Sn=hi;function ns(e,o,t){var s,a;if(o>0&&t>0)return{width:o,height:t};const n=(a=(s=e.container)==null?void 0:s.getBoundingClientRect)==null?void 0:a.call(s),i=(n==null?void 0:n.width)??0,r=(n==null?void 0:n.height)??0;return i>0&&r>0?{width:i,height:r}:{width:800,height:600}}u(ns,"resolveViewportSize");function nn(e,o,t,n){const{width:i,height:r}=ns(e,o,t);e.render(p(Sn,{width:i,height:r,theme:n||w.light}))}u(nn,"runApp$5");const is={key:It.CompGallery,label:"组件画廊",description:"常规组件外观与交互。"};function os(){const e=Tt(),o=P.useRef(null),t=P.useRef({width:0,height:0}),n=u(r=>{o.current=r,nn(r,t.current.width,t.current.height,e)},"handleRuntimeReady"),i=u((r,s,a)=>{t.current={width:r,height:s},o.current=a,nn(a,r,s,e)},"handleResize");return P.useEffect(()=>{o.current&&nn(o.current,t.current.width,t.current.height,e)},[e]),E.jsx(Et,{style:{width:"100%",height:"100%",overflow:"hidden"},onRuntimeReady:n,onResize:i})}u(os,"CompGalleryDemo");const di=class di extends At{render(){const{theme:o,value:t,onChange:n}=this.props,i=o.border.base;return $(Q,{spacing:10,crossAxisAlignment:U.Start,children:[p(_,{text:"单行编辑器 (Input)",fontSize:16,color:o.text.secondary}),p(B,{width:300,height:42,border:{color:i,width:1},borderRadius:4,color:o.background.container,children:p(ct,{padding:{left:12,top:10,right:12,bottom:10},children:p(Fo,{value:t,onChange:n,color:o.text.primary,fontSize:14,selectionColor:o.state.focus,cursorColor:o.text.primary})})}),p(B,{width:300,children:p(_,{text:`当前值: ${t}`,fontSize:12,color:o.text.placeholder})})]})}};u(di,"InputPanel");let bn=di;const ui=class ui extends sr{constructor(t){super(t);b(this,"charWidgets",[]);b(this,"visibleGlobalIndices",[]);b(this,"globalToVisible",[]);b(this,"styles",[]);b(this,"undoStack",[]);b(this,"redoStack",[]);b(this,"preferredCursorX",null);b(this,"emptyLineWidgets",[]);b(this,"emptyLineStartIndices",[]);b(this,"didDragSelection",!1);b(this,"handlePointerDownWithDragEnd",u(t=>{this.didDragSelection=!0,this.handlePointerDown(t)},"handlePointerDownWithDragEnd"));b(this,"handlePointerUpWithDragEnd",u(t=>{var n,i;this.handlePointerUp(t),this.didDragSelection&&(this.didDragSelection=!1,(i=(n=this.props).onSelectionDragEnd)==null||i.call(n))},"handlePointerUpWithDragEnd"));this.state={...this.state,formatVersion:0,typingBold:!1,typingItalic:!1,typingColor:t.color??"#000000",typingFontSize:t.fontSize??14,typingFontFamily:t.fontFamily??"Arial, sans-serif"},this.syncStylesForNewText(t.value,t.color??"#000000",t.fontSize??14,t.fontFamily??"Arial, sans-serif"),this.initEditable()}createElement(t){t.value!==this.state.text&&(this.syncStylesForNewText(t.value,t.color??"#000000",this.state.typingFontSize??t.fontSize??14,this.state.typingFontFamily??t.fontFamily??"Arial, sans-serif"),this.state={...this.state,text:t.value,selectionStart:Math.min(this.state.selectionStart,t.value.length),selectionEnd:Math.min(this.state.selectionEnd,t.value.length)});const n=t.color??"#000000";return this.state.typingColor!==n&&(this.state={...this.state,typingColor:n}),super.createElement(t),this}createDomInput(){return document.createElement("textarea")}focusDomInput(){var t;(t=this.input)==null||t.focus()}restoreSelectionRange(t,n){var h,g;const i=this.state.text.length,r=Math.max(0,Math.min(t,i)),s=Math.max(0,Math.min(n,i));this.setState({selectionStart:r,selectionEnd:s,caretAffinity:void 0});const a=Math.min(r,s),l=Math.max(r,s),d=r>s?"backward":"forward";this.setDomSelectionRange(a,l,d),(g=(h=this.props).onSelectionChange)==null||g.call(h,r,s)}toggleBoldForTyping(){this.setState({typingBold:!this.state.typingBold})}toggleItalicForTyping(){this.setState({typingItalic:!this.state.typingItalic})}setColorForTyping(t){this.setState({typingColor:t})}setFontSizeForTyping(t){this.setState({typingFontSize:t})}setFontFamilyForTyping(t){this.setState({typingFontFamily:t})}getTypingFontSize(){return this.state.typingFontSize||this.props.fontSize||14}getTypingFontFamily(){return this.state.typingFontFamily||this.props.fontFamily||"Arial, sans-serif"}getTypingBold(){return!!this.state.typingBold}getTypingItalic(){return!!this.state.typingItalic}getTypingColor(){return String(this.state.typingColor||this.props.color||"#000000")}getBoldForSelection(){var s;const{start:t,end:n}=this.getNormalizedSelection();if(t===n)return null;let i=!1,r=!1;for(let a=t;a<n;a++)if(!!((s=this.styles[a])!=null&&s.bold)?i=!0:r=!0,i&&r)return null;return i}getItalicForSelection(){var s;const{start:t,end:n}=this.getNormalizedSelection();if(t===n)return null;let i=!1,r=!1;for(let a=t;a<n;a++)if(!!((s=this.styles[a])!=null&&s.italic)?i=!0:r=!0,i&&r)return null;return i}getColorForSelection(){var r,s;const{start:t,end:n}=this.getNormalizedSelection();if(t===n)return null;const i=(r=this.styles[t])==null?void 0:r.color;if(typeof i!="string")return null;for(let a=t+1;a<n;a++)if(((s=this.styles[a])==null?void 0:s.color)!==i)return null;return i}toggleBoldForSelection(){const{start:t,end:n}=this.getNormalizedSelection();if(t===n)return;this.pushUndoSnapshot();const i=!this.isRangeAllBold(t,n);for(let r=t;r<n;r++){const s=this.styles[r];s&&(s.bold=i)}this.bumpFormatVersion()}toggleItalicForSelection(){const{start:t,end:n}=this.getNormalizedSelection();if(t===n)return;this.pushUndoSnapshot();const i=!this.isRangeAllItalic(t,n);for(let r=t;r<n;r++){const s=this.styles[r];s&&(s.italic=i)}this.bumpFormatVersion()}setColorForSelection(t){const{start:n,end:i}=this.getNormalizedSelection();if(n!==i){this.pushUndoSnapshot();for(let r=n;r<i;r++){const s=this.styles[r];s&&(s.color=t)}this.bumpFormatVersion()}}setFontSizeForSelection(t){const{start:n,end:i}=this.getNormalizedSelection();if(n!==i){this.pushUndoSnapshot();for(let r=n;r<i;r++){const s=this.styles[r];s&&(s.fontSize=t)}this.bumpFormatVersion()}}setFontFamilyForSelection(t){const{start:n,end:i}=this.getNormalizedSelection();if(n!==i){this.pushUndoSnapshot();for(let r=n;r<i;r++){const s=this.styles[r];s&&(s.fontFamily=t)}this.bumpFormatVersion()}}applyInitialSpans(t){if(!t||t.length===0)return;const n=this.state.text.length;if(!(n<=0)){for(let i=0;i<t.length;i++){const r=t[i];if(!r||!r.style)continue;let s=r.start|0,a=r.end|0;if(s>a){const y=s;s=a,a=y}if(a<=0||s>=n||(s<0&&(s=0),a>n&&(a=n),s===a))continue;const l=r.style,d=typeof l.bold=="boolean",h=typeof l.italic=="boolean",g=typeof l.color=="string",f=typeof l.fontSize=="number",c=typeof l.fontFamily=="string";if(!(!d&&!h&&!g&&!f&&!c))for(let y=s;y<a;y++){const m=this.styles[y];m&&(d&&(m.bold=l.bold),h&&(m.italic=l.italic),g&&(m.color=l.color),f&&(m.fontSize=l.fontSize),c&&(m.fontFamily=l.fontFamily))}}this.undoStack.length=0,this.redoStack.length=0,this.bumpFormatVersion()}}getFontSizeForSelection(){var r,s;const{start:t,end:n}=this.getNormalizedSelection();if(t===n)return null;const i=(r=this.styles[t])==null?void 0:r.fontSize;if(typeof i!="number")return null;for(let a=t+1;a<n;a++)if(((s=this.styles[a])==null?void 0:s.fontSize)!==i)return null;return i}getFontFamilyForSelection(){var r,s;const{start:t,end:n}=this.getNormalizedSelection();if(t===n)return null;const i=(r=this.styles[t])==null?void 0:r.fontFamily;if(typeof i!="string")return null;for(let a=t+1;a<n;a++)if(((s=this.styles[a])==null?void 0:s.fontFamily)!==i)return null;return i}getCaretClientRect(){const t=this.getCaretViewportRect();if(!t)return null;const n=this.getCanvasClientRect();if(!n)return null;const i=this.getAbsolutePosition();return{left:n.left+i.dx+t.left,top:n.top+i.dy+t.top,width:t.width,height:t.height}}getSelectionClientRect(){const t=this.getSelectionViewportRect();if(!t)return null;const n=this.getCanvasClientRect();if(!n)return null;const i=this.getAbsolutePosition();return{left:n.left+i.dx+t.left,top:n.top+i.dy+t.top,width:t.width,height:t.height}}getRichSelectionInfo(){return{selectionStart:this.state.selectionStart,selectionEnd:this.state.selectionEnd,focused:this.state.focused,caretClientRect:this.getCaretClientRect(),selectionClientRect:this.getSelectionClientRect()}}handleInput(t){const n=t.target,i=this.state.text,r=n.value;i!==r&&(this.pushUndoSnapshot(),this.applyTextDiff(i,r),this.redoStack.length=0),super.handleInput(t)}handleKeyDown(t){if((t.metaKey||t.ctrlKey)&&!t.altKey&&(t.key==="z"||t.key==="Z")){t.preventDefault(),t.shiftKey?this.redo():this.undo();return}if((t.metaKey||t.ctrlKey)&&!t.altKey&&(t.key==="y"||t.key==="Y")){t.preventDefault(),this.redo();return}if(t.key==="ArrowUp"&&!t.metaKey&&!t.ctrlKey&&!t.altKey){this.resetCursorBlink(),this.handleVerticalCursorMove("up",t);return}if(t.key==="ArrowDown"&&!t.metaKey&&!t.ctrlKey&&!t.altKey){this.resetCursorBlink(),this.handleVerticalCursorMove("down",t);return}this.preferredCursorX=null,super.handleKeyDown(t)}ensureCursorVisible(){const t=this.scrollViewRef;if(!t)return;const n=t.width,i=t.height;if(n<=0||i<=0)return;const r=this.getCaretInfoAtIndex(this.state.selectionEnd),s=2,a=8,{contentW:l,contentH:d}=this.getContentExtent(),h=Math.max(0,l-n),g=Math.max(0,d-i),f=r.x,c=r.x+s,y=r.y,m=r.y+r.height,S=t.scrollX,v=t.scrollY,x=S+a,T=S+n-a,k=v+a,C=v+i-a;let R=S,M=v;f<x?R=f-a:c>T&&(R=c-(n-a)),y<k?M=y-a:m>C&&(M=m-(i-a)),R=Math.max(0,Math.min(h,R)),M=Math.max(0,Math.min(g,M)),!(R===S&&M===v)&&t.scrollTo(R,M)}getIndexAtContentPoint(t,n){const i=this.state.text;if(i.length===0)return 0;const r=this.buildVisualLines();if(r.length===0)return 0;const s=this.getClosestLineIndexByY(r,n),a=r[s],l=this.getInsertionIndexAtXInLine(a,t);return Math.max(0,Math.min(i.length,l))}getCaretViewportRect(){const t=this.scrollViewRef,n=this.getCaretInfoAtIndex(this.state.selectionEnd),i=t?t.scrollX:0,r=t?t.scrollY:0;return{left:n.x-i,top:n.y-r,width:2,height:n.height}}getSelectionViewportRectForOverlay(){return this.getSelectionViewportRect()}getSelectionViewportRect(){const{start:t,end:n}=this.getNormalizedSelection();if(t===n)return null;const i=this.scrollViewRef,r=i?i.scrollX:0,s=i?i.scrollY:0;let a=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,d=0,h=0;for(let g=t;g<n;g++){if(this.state.text[g]===`
`)continue;const f=this.getCharRectByGlobalIndex(g);f&&(a=Math.min(a,f.x),l=Math.min(l,f.y),d=Math.max(d,f.x+f.width),h=Math.max(h,f.y+f.height))}return!isFinite(a)||!isFinite(l)?null:{left:a-r,top:l-s,width:d-a,height:h-l}}getContentExtent(){const t=this.state.text,n=this.state.typingFontSize||this.props.fontSize||14,i=this.props.lineHeight??Math.round(n*1.6);if(t.length===0)return{contentW:0,contentH:i};let r=0,s=0;for(let a=0;a<t.length;a++){if(t[a]===`
`)continue;const l=this.getCharRectByGlobalIndex(a);l&&(r=Math.max(r,l.x+l.width),s=Math.max(s,l.y+l.height))}return{contentW:r,contentH:Math.max(i,s)}}getCaretInfoAtIndex(t){const n=this.state.typingFontSize||this.props.fontSize||14,i=this.props.lineHeight??Math.round(n*1.6),r=this.state.text,s=Math.max(0,Math.min(t,r.length));if(r.length===0)return{x:0,y:0,height:i};const a=this.getEmptyLineRectAtIndex(s);if(a)return{x:0,y:a.y,height:a.height};if(s>=r.length){for(let d=r.length-1;d>=0;d--){if(r[d]===`
`)continue;const h=this.getCharRectByGlobalIndex(d);if(h)return{x:h.x+h.width,y:h.y,height:h.height}}return{x:0,y:0,height:i}}if(r[s]===`
`){const d=this.getEmptyLineRectAtIndex(s);if(d)return{x:0,y:d.y,height:d.height};for(let g=s-1;g>=0&&r[g]!==`
`;g--){const f=this.getCharRectByGlobalIndex(g);if(f)return{x:f.x+f.width,y:f.y,height:f.height}}const h=this.findNextVisibleCharRect(s+1);return h?{x:0,y:h.y,height:h.height}:{x:0,y:0,height:i}}const l=this.getCharRectByGlobalIndex(s);return l?{x:l.x,y:l.y,height:l.height}:{x:0,y:0,height:i}}findNextVisibleCharRect(t){for(let n=t;n<this.state.text.length;n++){if(this.state.text[n]===`
`)continue;const i=this.getCharRectByGlobalIndex(n);if(i)return i}return null}getCharRectByGlobalIndex(t){const n=this.globalToVisible[t]??-1;if(n<0)return null;const i=this.charWidgets[n];if(!i||!i.renderObject)return null;const r=this.getOffsetToSelf(i);if(!r)return null;const s=i.renderObject.size;return{x:r.dx,y:r.dy,width:s.width,height:s.height}}getOffsetToSelf(t){if(!t||!t.renderObject)return null;let n=0,i=0,r=t;for(;r&&r!==this;){if(!r.renderObject)return null;n+=r.renderObject.offset.dx,i+=r.renderObject.offset.dy,r=r.parent}return r!==this?null:{dx:n,dy:i}}cloneStyles(t){const n=new Array(t.length);for(let i=0;i<t.length;i++){const r=t[i];n[i]={bold:r.bold,italic:r.italic,color:r.color,fontSize:r.fontSize,fontFamily:r.fontFamily}}return n}takeSnapshot(){return{text:this.state.text,styles:this.cloneStyles(this.styles),typingBold:!!this.state.typingBold,typingItalic:!!this.state.typingItalic,typingColor:String(this.state.typingColor||"#000000"),typingFontSize:Number(this.state.typingFontSize||this.props.fontSize||14),typingFontFamily:String(this.state.typingFontFamily||this.props.fontFamily||"Arial, sans-serif"),selectionStart:this.state.selectionStart,selectionEnd:this.state.selectionEnd,caretAffinity:this.state.caretAffinity}}pushUndoSnapshot(){this.undoStack.push(this.takeSnapshot()),this.undoStack.length>100&&this.undoStack.shift()}applySnapshot(t){var i,r,s,a;this.styles=this.cloneStyles(t.styles);const n=this.state.formatVersion+1;if(this.setState({text:t.text,selectionStart:Math.max(0,Math.min(t.selectionStart,t.text.length)),selectionEnd:Math.max(0,Math.min(t.selectionEnd,t.text.length)),caretAffinity:t.caretAffinity,typingBold:t.typingBold,typingItalic:t.typingItalic,typingColor:t.typingColor,typingFontSize:t.typingFontSize,typingFontFamily:t.typingFontFamily,formatVersion:n}),this.input){this.input.value=t.text;const l=Math.min(t.selectionStart,t.selectionEnd),d=Math.max(t.selectionStart,t.selectionEnd),h=t.selectionStart>t.selectionEnd?"backward":"forward";this.setDomSelectionRange(l,d,h)}(r=(i=this.props).onChange)==null||r.call(i,t.text),(a=(s=this.props).onSelectionChange)==null||a.call(s,t.selectionStart,t.selectionEnd),this.scheduleEnsureCursorVisible()}undo(){const t=this.undoStack.pop();return t?(this.redoStack.push(this.takeSnapshot()),this.applySnapshot(t),!0):!1}redo(){const t=this.redoStack.pop();return t?(this.undoStack.push(this.takeSnapshot()),this.applySnapshot(t),!0):!1}getEmptyLineRectAtIndex(t){const n=t;for(let i=0;i<this.emptyLineStartIndices.length;i++){if(this.emptyLineStartIndices[i]!==n)continue;const r=this.emptyLineWidgets[i];if(!r||!r.renderObject)return null;const s=this.getOffsetToSelf(r);if(!s)return null;const a=r.renderObject.size;return{x:s.dx,y:s.dy,width:a.width,height:a.height}}return null}buildVisualLines(){const t=[];for(let r=0;r<this.visibleGlobalIndices.length;r++){const s=this.visibleGlobalIndices[r]??-1;if(s<0)continue;const a=this.getCharRectByGlobalIndex(s);a&&t.push({gi:s,rect:a})}for(let r=0;r<this.emptyLineStartIndices.length;r++){const s=this.emptyLineStartIndices[r]??-1;if(s<0)continue;const a=this.emptyLineWidgets[r];if(!a||!a.renderObject)continue;const l=this.getOffsetToSelf(a);if(!l)continue;const d=a.renderObject.size;t.push({gi:s,rect:{x:l.dx,y:l.dy,width:d.width,height:d.height}})}t.sort((r,s)=>r.rect.y===s.rect.y?r.rect.x-s.rect.x:r.rect.y-s.rect.y);const n=[],i=1;for(const r of t){const s=n[n.length-1];if(!s){n.push({y:r.rect.y,height:r.rect.height,items:[r]});continue}if(Math.abs(r.rect.y-s.y)>Math.max(i,r.rect.height*.5)){n.push({y:r.rect.y,height:r.rect.height,items:[r]});continue}s.items.push(r),s.height=Math.max(s.height,r.rect.height),s.y=Math.min(s.y,r.rect.y)}for(const r of n)r.items.sort((s,a)=>s.rect.x-a.rect.x);return n}getClosestLineIndexByY(t,n){let i=0,r=Number.POSITIVE_INFINITY;for(let s=0;s<t.length;s++){const a=t[s],l=a.y+a.height/2,d=Math.abs(l-n);d<r&&(r=d,i=s)}return i}getInsertionIndexAtXInLine(t,n){if(t.items.length===0)return 0;let i=t.items[0].gi;for(let r=0;r<t.items.length;r++){const s=t.items[r],a=s.rect,l=a.x+a.width/2;if(n<l)return s.gi;i=s.gi+1}return i}handleVerticalCursorMove(t,n){const i=this.getCaretInfoAtIndex(this.state.selectionEnd);this.preferredCursorX===null&&(this.preferredCursorX=i.x);const r=this.buildVisualLines();if(r.length===0)return;const s=this.getClosestLineIndexByY(r,i.y+i.height/2),a=t==="up"?Math.max(0,s-1):Math.min(r.length-1,s+1);if(a===s)return;const l=r[a],d=Math.max(0,Math.min(this.state.text.length,this.getInsertionIndexAtXInLine(l,this.preferredCursorX)));if(n.shiftKey){if(this.setState({selectionEnd:d,caretAffinity:void 0}),this.input){const h=Math.min(this.state.selectionStart,d),g=Math.max(this.state.selectionStart,d),f=this.state.selectionStart>d?"backward":"forward";this.setDomSelectionRange(h,g,f)}}else this.setState({selectionStart:d,selectionEnd:d,caretAffinity:void 0}),this.setDomSelectionRange(d,d);this.scheduleEnsureCursorVisible()}getNormalizedSelection(){const t=Math.max(0,Math.min(this.state.selectionStart,this.state.text.length)),n=Math.max(0,Math.min(this.state.selectionEnd,this.state.text.length));return t<=n?{start:t,end:n}:{start:n,end:t}}isRangeAllBold(t,n){var i;for(let r=t;r<n;r++)if(!((i=this.styles[r])!=null&&i.bold))return!1;return!0}isRangeAllItalic(t,n){var i;for(let r=t;r<n;r++)if(!((i=this.styles[r])!=null&&i.italic))return!1;return!0}bumpFormatVersion(){this.setState({formatVersion:this.state.formatVersion+1})}syncStylesForNewText(t,n,i,r){this.styles=new Array(t.length);for(let s=0;s<t.length;s++)this.styles[s]={bold:!1,italic:!1,color:n,fontSize:i,fontFamily:r}}applyTextDiff(t,n){let i=0;const r=Math.min(t.length,n.length);for(;i<r&&t[i]===n[i];)i++;let s=0;for(;s<r-i&&t[t.length-1-s]===n[n.length-1-s];)s++;const a=t.length-i-s,l=n.length-i-s,d={bold:!!this.state.typingBold,italic:!!this.state.typingItalic,color:String(this.state.typingColor||"#000000"),fontSize:Number(this.state.typingFontSize||this.props.fontSize||14),fontFamily:String(this.state.typingFontFamily||this.props.fontFamily||"Arial, sans-serif")},h=[];for(let g=0;g<l;g++)h.push({...d});if(this.styles.splice(i,a,...h),this.styles.length<n.length){const g=n.length-this.styles.length;for(let f=0;f<g;f++)this.styles.push({...d})}else this.styles.length>n.length&&(this.styles.length=n.length);this.bumpFormatVersion()}beginSelectionHandleDrag(t,n){this.didDragSelection=!0,super.beginSelectionHandleDrag(t,n)}endSelectionHandleDrag(){var t,n;super.endSelectionHandleDrag(),this.didDragSelection&&(this.didDragSelection=!1,(n=(t=this.props).onSelectionDragEnd)==null||n.call(t))}render(){const t=w.light,{fontSize:n=14,fontFamily:i="Arial, sans-serif",lineHeight:r=Math.round(n*1.6),color:s="#000000",cursorColor:a="#000000",placeholder:l,disabled:d}=this.props,{text:h,selectionStart:g,selectionEnd:f,focused:c,cursorVisible:y}=this.state,m=this.resolveSelectionColor(),S=[],v=new Array(h.length).fill(-1),x=[],T=h.length===0&&typeof l=="string"&&l.length>0,k=t.text.placeholder,C=[];let R=0;for(let F=0;F<=h.length;F++)(F===h.length||h[F]===`
`)&&(C.push({start:R,text:h.slice(R,F)}),R=F+1);const M=T?p(_,{text:l,fontSize:n,lineHeight:r,fontFamily:i,color:k}):p(Q,{spacing:0,crossAxisAlignment:U.Start,children:C.map((F,j)=>p(ii,{spacing:0,runSpacing:0,alignBaseline:!0,children:F.text.length===0?p(_,{text:"",fontSize:n,lineHeight:r,fontFamily:i,ref:u(V=>{const O=x.length;x[O]!==F.start&&(x[O]=F.start),this.emptyLineWidgets[O]=V},"ref")}):F.text.split("").map((V,O)=>{const W=F.start+O,N=this.styles[W]??{bold:!1,italic:!1,color:s,fontSize:n,fontFamily:i},X=N.fontSize??n,K=N.fontFamily??i,tt=Math.round(X*1.6),G=S.length;return S.push(W),v[W]=G,p(_,{ref:u(ot=>{this.charWidgets[G]=ot},"ref"),text:V,fontSize:X,lineHeight:tt,fontFamily:K,fontWeight:N.bold?"bold":"normal",fontStyle:N.italic?"italic":"normal",color:N.color},`c-${W}`)})},`p-${j}`))});this.visibleGlobalIndices=S,this.globalToVisible=v,this.emptyLineStartIndices=x,this.charWidgets.length=S.length,this.emptyLineWidgets.length=x.length;const L=[];if(g!==f){const{start:F,end:j}=this.getNormalizedSelection(),V=[];for(let W=F;W<j;W++){if(h[W]===`
`)continue;const N=this.getCharRectByGlobalIndex(W);N&&N.width>0&&V.push(N)}V.sort((W,N)=>W.y===N.y?W.x-N.x:W.y-N.y);const O=[];for(const W of V){const N=O[O.length-1];N&&Math.abs(N.y-W.y)<=.5&&Math.abs(N.height-W.height)<=.5&&W.x<=N.x+N.width+.5?N.width=Math.max(N.width,W.x+W.width-N.x):O.push({...W})}for(let W=0;W<O.length;W++){const N=O[W];L.push(p(mt,{left:N.x,top:N.y,children:p(B,{width:N.width,height:N.height,color:m})},`sel-${W}`))}}const I=this.getCaretInfoAtIndex(f),D=this.getCaretInfoAtIndex(g),H=this.getCaretInfoAtIndex(f);return p(B,{onPointerDown:this.handlePointerDownWithDragEnd,onPointerMove:this.handlePointerMove,onPointerUp:this.handlePointerUpWithDragEnd,pointerEvent:"auto",alignment:"topLeft",cursor:d?"not-allowed":"text",children:p(jt,{ref:u(F=>this.scrollViewRef=F,"ref"),enableBounceVertical:!0,enableBounceHorizontal:!1,alwaysShowScrollbarY:!1,scrollBarVisibilityMode:"auto",children:$(vt,{children:[L,M,c&&g!==f&&!d&&$(ar,{children:[p(mt,{left:D.x,top:D.y+D.height,children:p(B,{width:8,height:8,borderRadius:4,color:a,pointerEvent:"auto",onPointerDown:u(F=>this.beginSelectionHandleDrag("start",F),"onPointerDown"),onPointerUp:u(F=>this.endSelectionHandleDrag(),"onPointerUp")})}),p(mt,{left:H.x,top:H.y+H.height,children:p(B,{width:8,height:8,borderRadius:4,color:a,pointerEvent:"auto",onPointerDown:u(F=>this.beginSelectionHandleDrag("end",F),"onPointerDown"),onPointerUp:u(F=>this.endSelectionHandleDrag(),"onPointerUp")})})]}),c&&y&&g===f&&!d&&p(mt,{left:I.x,top:I.y,children:p(B,{width:2,height:I.height,color:a})})]})})})}};u(ui,"RichTextEditor");let wn=ui;const st={buttonSize:28,spacing:8,paddingX:8,paddingY:8,fontSizeW:56,fontFamilyW:96,dropdownOffsetY:6,colorPanelCols:6,colorSwatchSize:22,colorPanelGap:6,colorPanelPadding:8,triggerRadius:6,toolbarRadius:8},he={toolbarW:st.buttonSize*2+st.fontSizeW+st.fontFamilyW+st.buttonSize+Math.max(0,4)*st.spacing+st.paddingX*2,toolbarH:st.buttonSize+st.paddingY*2,dropdownTopFromTrigger:st.buttonSize+st.paddingY+st.dropdownOffsetY,colorDropdownLeftFromTrigger:st.buttonSize-(st.colorPanelPadding*2+st.colorPanelCols*st.colorSwatchSize+Math.max(0,st.colorPanelCols-1)*st.colorPanelGap)},rs=[12,14,16,18,20,22,24,28,32],ss=[{label:"Arial",value:"Arial, sans-serif"},{label:"Helvetica",value:"Helvetica, Arial, sans-serif"},{label:"Verdana",value:"Verdana, Arial, sans-serif"},{label:"Georgia",value:'Georgia, "Times New Roman", Times, serif'},{label:"Times",value:'"Times New Roman", Times, serif'},{label:"Courier",value:'"Courier New", Courier, monospace'},{label:"Menlo",value:'Menlo, Monaco, Consolas, "Courier New", monospace'},{label:"苹方",value:'"PingFang SC", "Helvetica Neue", Arial, sans-serif'},{label:"思源黑体",value:'"Noto Sans SC", "Source Han Sans SC", "PingFang SC", sans-serif'},{label:"宋体",value:'"Songti SC", SimSun, serif'}];function ro(e){const o=e.padding*2+e.cols*e.swatchSize+Math.max(0,e.cols-1)*e.gap;return p(mt,{left:e.left,top:e.top,children:p(ni,{borderRadius:st.toolbarRadius,children:p(B,{width:o,borderRadius:st.toolbarRadius,border:{color:e.theme.border.base,width:1},color:e.theme.background.container,padding:[e.padding,e.padding],pointerEvent:"auto",onPointerLeave:e.onPointerLeave,children:p(Q,{spacing:e.gap,crossAxisAlignment:U.Start,mainAxisSize:it.Min,children:Array.from({length:Math.ceil(e.presets.length/e.cols)}).map((t,n)=>{const i=e.presets.slice(n*e.cols,n*e.cols+e.cols);return p(at,{spacing:e.gap,children:i.map(r=>p(B,{width:e.swatchSize,height:e.swatchSize,borderRadius:st.triggerRadius,border:{color:"rgba(0,0,0,0.15)",width:1},color:r.value,cursor:"pointer",pointerEvent:"auto",onPointerEnter:u(()=>e.onHoverKey(`c-${r.value}`),"onPointerEnter"),onPointerLeave:u(()=>e.onHoverKey(null),"onPointerLeave"),onPointerDown:u(s=>{var a;(a=s.stopPropagation)==null||a.call(s),e.onPick(r.value)},"onPointerDown"),children:e.hoveredKey===`c-${r.value}`&&p(B,{width:e.swatchSize,height:e.swatchSize,borderRadius:st.triggerRadius,color:"rgba(255,255,255,0.18)",pointerEvent:"none"})},e.swatchWidgetKey(r.value)))},`rt-color-row-${n}`)})})})})},e.widgetKey)}u(ro,"ToolbarColorPickerDropdown");function vn(e){return p(B,{width:e.width,height:e.height,borderRadius:e.borderRadius??6,border:{color:e.theme.border.base,width:1},color:e.backgroundColor,cursor:e.cursor??"pointer",alignment:"center",pointerEvent:"auto",onPointerEnter:e.onPointerEnter,onPointerLeave:e.onPointerLeave,onPointerDown:e.onPointerDown,children:e.children},e.widgetKey)}u(vn,"ToolbarButton$1");const as=['<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none">',"<path",' d="M12 3.5c-4.694 0-8.5 3.806-8.5 8.5S7.306 20.5 12 20.5h1.8c1.27 0 2.3-1.03 2.3-2.3'," 0-.69-.308-1.343-.84-1.78l-.16-.13a1.7 1.7 0 0 1-.62-1.31c0-.94.76-1.7 1.7-1.7H17",' c2.485 0 4.5-2.015 4.5-4.5C21.5 6.53 17.47 3.5 12 3.5Z"',' stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"',"/>","<path",' d="M7.6 12.2a1.2 1.2 0 1 0 0-2.4 1.2 1.2 0 0 0 0 2.4Z'," m3-3a1.2 1.2 0 1 0 0-2.4 1.2 1.2 0 0 0 0 2.4"," M14.4 9.4a1.2 1.2 0 1 0 0-2.4 1.2 1.2 0 0 0 0 2.4Z",' m2.2 3.2a1.2 1.2 0 1 0 0-2.4 1.2 1.2 0 0 0 0 2.4Z"',' fill="currentColor"',"/>","</svg>"].join("");function ls(e){const o=e.opened||e.hovered?e.theme.state.hover:e.active?e.theme.state.selected:e.theme.background.container,t=e.active?e.theme.primary:e.theme.text.primary;return p(vn,{widgetKey:e.widgetKey,theme:e.theme,width:e.width,height:e.height,backgroundColor:o,onPointerEnter:e.onPointerEnter,onPointerLeave:e.onPointerLeave,onPointerDown:e.onPointerDown,children:p(re,{svg:as,size:16,color:t})})}u(ls,"ToolbarColorPickerTrigger");const fi=class fi extends Pt{constructor(){super(...arguments);b(this,"state",{opened:!1});b(this,"_lastOverlayLeft",null);b(this,"_lastOverlayTop",null);b(this,"toggleOpened",u(t=>{var n;(n=t.stopPropagation)==null||n.call(t),this.setOpened(!this.state.opened)},"toggleOpened"));b(this,"closeOpened",u(()=>{this.setOpened(!1)},"closeOpened"))}setOpened(t){var n,i,r,s;t!==this.state.opened&&(this.setState({opened:t}),this.syncOverlay(),t?(i=(n=this.props).onOpen)==null||i.call(n):(s=(r=this.props).onClose)==null||s.call(r))}getOverlayEntryKey(){return`${String(this.key)}-color-picker-overlay`}syncOverlay(){const t=this.runtime;if(!t)return;const n=this.getOverlayEntryKey();if(!this.state.opened){this._lastOverlayLeft=null,this._lastOverlayTop=null,t.removeOverlayEntry(n);return}const i=Math.max(1,this.props.cols|0),r=Math.max(1,this.props.swatchSize|0),s=Math.max(0,this.props.gap|0),a=Math.max(0,this.props.padding|0),l=a*2+i*r+Math.max(0,i-1)*s,d=Math.max(1,Math.ceil(this.props.presets.length/i)),h=a*2+d*r+Math.max(0,d-1)*s,g=this.getAbsolutePosition(),f=t.getRootWidget(),c=(f==null?void 0:f.renderObject.size.width)??null,y=(f==null?void 0:f.renderObject.size.height)??null;let m=g.dx+this.props.dropdownLeft,S=g.dy+this.props.dropdownTop;if(c!==null&&(m=Math.max(0,Math.min(m,c-l))),y!==null){const v=g.dy+this.props.dropdownTop,x=v+h,T=g.dy-4-h;x>y&&T>=0?S=T:S=v,S=Math.max(0,Math.min(S,y-h))}this._lastOverlayLeft=m,this._lastOverlayTop=S,t.setOverlayEntry(n,$(vt,{allowOverflowPositioned:!0,children:[p(B,{width:c??void 0,height:y??void 0,alignment:"topLeft",pointerEvent:"auto",onPointerDown:u(v=>{var x;(x=v.stopPropagation)==null||x.call(v),this.closeOpened()},"onPointerDown")},`${n}-mask`),p(ro,{widgetKey:`${n}-dropdown`,theme:this.props.theme,left:m,top:S,cols:this.props.cols,swatchSize:this.props.swatchSize,gap:this.props.gap,padding:this.props.padding,presets:this.props.presets,hoveredKey:this.props.hoveredKey,onHoverKey:this.props.onHoverKey,swatchWidgetKey:this.props.swatchWidgetKey,onPick:u(v=>{this.props.onPick(v),this.props.onHoverKey(null),this.closeOpened()},"onPick")})]},`${n}-host`))}paint(t){if(super.paint(t),!this.state.opened||!this.runtime)return;const n=Math.max(1,this.props.cols|0),i=Math.max(1,this.props.swatchSize|0),r=Math.max(0,this.props.gap|0),s=Math.max(0,this.props.padding|0),a=s*2+n*i+Math.max(0,n-1)*r,l=Math.max(1,Math.ceil(this.props.presets.length/n)),d=s*2+l*i+Math.max(0,l-1)*r,h=this.getAbsolutePosition(),g=this.runtime.getRootWidget(),f=(g==null?void 0:g.renderObject.size.width)??null,c=(g==null?void 0:g.renderObject.size.height)??null;let y=h.dx+this.props.dropdownLeft,m=h.dy+this.props.dropdownTop;if(f!==null&&(y=Math.max(0,Math.min(y,f-a))),c!==null){const S=h.dy+this.props.dropdownTop,v=S+d,x=h.dy-4-d;v>c&&x>=0?m=x:m=S,m=Math.max(0,Math.min(m,c-d))}(this._lastOverlayLeft!==y||this._lastOverlayTop!==m)&&this.syncOverlay()}dispose(){const t=this.runtime;t&&t.removeOverlayEntry(this.getOverlayEntryKey()),super.dispose()}render(){const t=this.props.hoveredKey===this.props.triggerHoverKey,n=this.state.opened;return $(vt,{allowOverflowPositioned:!0,children:[p(ls,{widgetKey:this.props.widgetKey,theme:this.props.theme,width:this.props.width,height:this.props.height,active:this.props.active,opened:n,hovered:t,onPointerEnter:u(()=>this.props.onHoverKey(this.props.triggerHoverKey),"onPointerEnter"),onPointerLeave:u(()=>this.props.onHoverKey(null),"onPointerLeave"),onPointerDown:this.toggleOpened}),n&&!this.runtime&&p(ro,{widgetKey:`${this.props.widgetKey}-dropdown`,theme:this.props.theme,left:this.props.dropdownLeft,top:this.props.dropdownTop,cols:this.props.cols,swatchSize:this.props.swatchSize,gap:this.props.gap,padding:this.props.padding,presets:this.props.presets,hoveredKey:this.props.hoveredKey,onHoverKey:this.props.onHoverKey,swatchWidgetKey:this.props.swatchWidgetKey,onPick:u(i=>{this.props.onPick(i),this.props.onHoverKey(null),this.closeOpened()},"onPick")})]})}};u(fi,"ColorPicker");let xn=fi;const gi=class gi extends Pt{constructor(){super(...arguments);b(this,"state",{hoveredKey:null});b(this,"lastSelectionStart",null);b(this,"lastSelectionEnd",null);b(this,"savedSelectionStart",null);b(this,"savedSelectionEnd",null);b(this,"applyBold",u(()=>{const{editor:t,variant:n}=this.props;t&&(this.restoreSavedSelectionIfNeeded(),n==="selection"?t.toggleBoldForSelection():t.toggleBoldForTyping(),this.focusAfterAction())},"applyBold"));b(this,"applyItalic",u(()=>{const{editor:t,variant:n}=this.props;t&&(this.restoreSavedSelectionIfNeeded(),n==="selection"?t.toggleItalicForSelection():t.toggleItalicForTyping(),this.focusAfterAction())},"applyItalic"));b(this,"applyFontSize",u(t=>{const{editor:n,variant:i}=this.props;n&&(this.restoreSavedSelectionIfNeeded(),i==="selection"?n.setFontSizeForSelection(t):n.setFontSizeForTyping(t),this.clearSelectionSnapshot(),this.focusAfterAction())},"applyFontSize"));b(this,"applyFontFamily",u(t=>{const{editor:n,variant:i}=this.props;n&&(this.restoreSavedSelectionIfNeeded(),i==="selection"?n.setFontFamilyForSelection(t):n.setFontFamilyForTyping(t),this.clearSelectionSnapshot(),this.focusAfterAction())},"applyFontFamily"));b(this,"applyColor",u(t=>{const{editor:n,variant:i}=this.props;n&&(this.restoreSavedSelectionIfNeeded(),i==="selection"?n.setColorForSelection(t):n.setColorForTyping(t),this.clearSelectionSnapshot(),this.focusAfterAction())},"applyColor"))}focusAfterAction(){var t;(t=this.props.editor)==null||t.focusDomInput()}captureSelectionSnapshot(){const{editor:t,variant:n}=this.props,i=(t==null?void 0:t.getRichSelectionInfo())??null;if(!i){this.savedSelectionStart=null,this.savedSelectionEnd=null;return}if(n==="selection"){if(i.selectionStart!==i.selectionEnd){this.savedSelectionStart=i.selectionStart,this.savedSelectionEnd=i.selectionEnd;return}if(typeof this.lastSelectionStart=="number"&&typeof this.lastSelectionEnd=="number"&&this.lastSelectionStart!==this.lastSelectionEnd){this.savedSelectionStart=this.lastSelectionStart,this.savedSelectionEnd=this.lastSelectionEnd;return}}this.savedSelectionStart=i.selectionStart,this.savedSelectionEnd=i.selectionEnd}clearSelectionSnapshot(){this.savedSelectionStart=null,this.savedSelectionEnd=null}restoreSavedSelectionIfNeeded(){const{editor:t,variant:n}=this.props;if(!t||n!=="selection")return;let i=typeof this.savedSelectionStart=="number"?this.savedSelectionStart:typeof this.lastSelectionStart=="number"?this.lastSelectionStart:null,r=typeof this.savedSelectionEnd=="number"?this.savedSelectionEnd:typeof this.lastSelectionEnd=="number"?this.lastSelectionEnd:null;typeof i=="number"&&typeof r=="number"&&i===r&&typeof this.lastSelectionStart=="number"&&typeof this.lastSelectionEnd=="number"&&this.lastSelectionStart!==this.lastSelectionEnd&&(i=this.lastSelectionStart,r=this.lastSelectionEnd),!(typeof i!="number"||typeof r!="number")&&t.restoreSelectionRange(i,r)}render(){const{theme:t,variant:n,colorPresets:i,editor:r}=this.props;if(n==="selection"&&r){const f=r.getRichSelectionInfo();f.selectionStart!==f.selectionEnd&&(this.lastSelectionStart=f.selectionStart,this.lastSelectionEnd=f.selectionEnd)}const s=n==="selection"?((r==null?void 0:r.getBoldForSelection())??null)===!0:(r==null?void 0:r.getTypingBold())??!1,a=n==="selection"?((r==null?void 0:r.getItalicForSelection())??null)===!0:(r==null?void 0:r.getTypingItalic())??!1,l=n==="selection"?(r==null?void 0:r.getColorForSelection())??null:(r==null?void 0:r.getTypingColor())??null,d=typeof l=="string"&&l!=="#000000",h=n==="selection"?(r==null?void 0:r.getFontSizeForSelection())??null:(r==null?void 0:r.getTypingFontSize())??null,g=n==="selection"?(r==null?void 0:r.getFontFamilyForSelection())??null:(r==null?void 0:r.getTypingFontFamily())??null;return p(B,{width:he.toolbarW,pointerEvent:"none",cursor:"default",children:p(vt,{allowOverflowPositioned:!0,children:p(B,{width:he.toolbarW,height:he.toolbarH,borderRadius:st.toolbarRadius,border:{color:t.border.base,width:1},color:t.background.container,padding:[st.paddingY,st.paddingX],pointerEvent:"auto",children:$(at,{spacing:st.spacing,mainAxisAlignment:wt.Start,crossAxisAlignment:U.Center,children:[p(vn,{widgetKey:"rt-btn-bold",theme:t,width:st.buttonSize,height:st.buttonSize,backgroundColor:this.state.hoveredKey==="bold"?t.state.hover:s?t.state.selected:t.background.container,onPointerEnter:u(()=>this.setState({hoveredKey:"bold"}),"onPointerEnter"),onPointerLeave:u(()=>this.setState({hoveredKey:null}),"onPointerLeave"),onPointerDown:u(f=>{var c;(c=f.stopPropagation)==null||c.call(f),this.applyBold()},"onPointerDown"),children:p(_,{text:"B",fontSize:14,color:s?t.primary:t.text.primary,fontWeight:"bold",textAlign:Bt.Center,textAlignVertical:kt.Center,pointerEvent:"none"})}),p(vn,{widgetKey:"rt-btn-italic",theme:t,width:st.buttonSize,height:st.buttonSize,backgroundColor:this.state.hoveredKey==="italic"?t.state.hover:a?t.state.selected:t.background.container,onPointerEnter:u(()=>this.setState({hoveredKey:"italic"}),"onPointerEnter"),onPointerLeave:u(()=>this.setState({hoveredKey:null}),"onPointerLeave"),onPointerDown:u(f=>{var c;(c=f.stopPropagation)==null||c.call(f),this.applyItalic()},"onPointerDown"),children:p(_,{text:"I",fontSize:14,color:a?t.primary:t.text.primary,fontStyle:"italic",textAlign:Bt.Center,textAlignVertical:kt.Center,pointerEvent:"none"})}),p(gn,{theme:t,width:st.fontSizeW,size:"small",value:typeof h=="number"?h:null,placeholder:"字号",options:rs.map(f=>({label:`${f}px`,value:f})),onOpen:u(()=>this.captureSelectionSnapshot(),"onOpen"),onClose:u(()=>this.clearSelectionSnapshot(),"onClose"),onChange:u(f=>this.applyFontSize(f),"onChange")},"rt-select-fontSize"),p(gn,{theme:t,width:st.fontFamilyW,size:"small",value:typeof g=="string"?g:null,placeholder:"字体",options:ss.map(f=>({label:f.label,value:f.value})),onOpen:u(()=>this.captureSelectionSnapshot(),"onOpen"),onClose:u(()=>this.clearSelectionSnapshot(),"onClose"),onChange:u(f=>this.applyFontFamily(f),"onChange")},"rt-select-fontFamily"),p(xn,{widgetKey:"rt-btn-color",theme:t,width:st.buttonSize,height:st.buttonSize,active:d,triggerHoverKey:"color",dropdownTop:he.dropdownTopFromTrigger,dropdownLeft:he.colorDropdownLeftFromTrigger,cols:st.colorPanelCols,swatchSize:st.colorSwatchSize,gap:st.colorPanelGap,padding:st.colorPanelPadding,presets:i,hoveredKey:this.state.hoveredKey,onHoverKey:u(f=>this.setState({hoveredKey:f}),"onHoverKey"),swatchWidgetKey:u(f=>`rt-color-${n}-${f}`,"swatchWidgetKey"),onOpen:u(()=>this.captureSelectionSnapshot(),"onOpen"),onClose:u(()=>this.clearSelectionSnapshot(),"onClose"),onPick:u(f=>this.applyColor(f),"onPick")},"rt-btn-color")]})})})})}};u(gi,"RichTextToolbar");let Cn=gi;const mi=class mi extends Pt{constructor(){super(...arguments);b(this,"editorRef",null);b(this,"_appliedInitKey",null);b(this,"_applyInitTimer",null);b(this,"_pendingInitKey",null);b(this,"_pendingInitSpans",null);b(this,"state",{focused:!1,selectionStart:0,selectionEnd:0,draggingSelection:!1,selectionFromDrag:!1})}emitSelectionInfo(){var t,n;this.editorRef&&((n=(t=this.props).onSelectionInfo)==null||n.call(t,this.editorRef.getRichSelectionInfo()))}scheduleApplyInitialSpans(t,n){if(!n||n.length===0){this._pendingInitKey=null,this._pendingInitSpans=null;return}let i=t;for(let r=0;r<n.length;r++){const s=n[r];if(!s)continue;const a=s.style;i+=`|${s.start},${s.end},${a.bold??"_"},${a.italic??"_"},${a.color??"_"},`,i+=`${a.fontSize??"_"},${a.fontFamily??"_"}`}this._appliedInitKey!==i&&(this._pendingInitKey=i,this._pendingInitSpans=n,this._applyInitTimer!==null&&(clearTimeout(this._applyInitTimer),this._applyInitTimer=null),this._applyInitTimer=setTimeout(()=>{this._applyInitTimer=null,this.tryApplyInitialSpans()},0))}tryApplyInitialSpans(){if(this.isMounted&&this.editorRef&&!(!this._pendingInitKey||!this._pendingInitSpans)){if(this._appliedInitKey===this._pendingInitKey){this._pendingInitKey=null,this._pendingInitSpans=null;return}this.editorRef.applyInitialSpans(this._pendingInitSpans),this._appliedInitKey=this._pendingInitKey,this._pendingInitKey=null,this._pendingInitSpans=null}}dispose(){this._applyInitTimer!==null&&(clearTimeout(this._applyInitTimer),this._applyInitTimer=null),super.dispose()}render(){var f;const{theme:t,value:n,onChange:i}=this.props,r=t.border.base,s=typeof n=="string"?n:n.text,a=typeof n=="string"?null:n.spans??null;this.scheduleApplyInitialSpans(s,a);const l=[{label:"墨黑",value:"#1F2328"},{label:"岩灰",value:"#4B5563"},{label:"靛蓝",value:"#2F54EB"},{label:"纸红",value:"#B23A48"},{label:"松绿",value:"#2E7D32"},{label:"赭黄",value:"#B45309"},{label:"莓紫",value:"#6D28D9"},{label:"湖蓝",value:"#0EA5E9"}],d=this.state.selectionStart!==this.state.selectionEnd&&!this.state.draggingSelection&&this.state.selectionFromDrag,h=d?((f=this.editorRef)==null?void 0:f.getSelectionViewportRectForOverlay())??null:null,g=(()=>{if(!d||!h)return null;const c=28,y=8,m=8,S=8,k=c*2+56+96+c+Math.max(0,5-1)*y+m*2,C=c+S*2,R=12,M=300-R*2,L=150-R*2;let I=h.left,D=h.top-C-8;return D<0&&(D=h.top+h.height+8),I=Math.max(0,Math.min(M-k,I)),D=Math.max(0,Math.min(L-C,D)),p(mt,{left:I,top:D,zIndex:10,children:p(Cn,{theme:t,editor:this.editorRef,variant:"selection",colorPresets:l})})})();return $(Q,{spacing:10,crossAxisAlignment:U.Start,children:[p(_,{text:"富文本编辑器 (RichTextEditor)",fontSize:16,color:t.text.secondary}),p(B,{width:300,height:150,border:{color:r,width:1},borderRadius:4,color:t.background.container,pointerEvent:"auto",onPointerDown:u(()=>{this.state.selectionFromDrag&&(this.setState({selectionFromDrag:!1}),this.emitSelectionInfo())},"onPointerDown"),children:p(ct,{padding:12,children:$(vt,{children:[p(wn,{ref:u(c=>{this.editorRef=c},"ref"),value:s,onChange:u(c=>{if(typeof n=="string"){i(c);return}i({...n,text:c,spans:void 0})},"onChange"),onSelectionChange:u((c,y)=>{var v;const m=((v=this.editorRef)==null?void 0:v.isDragging)===!0,S=c!==this.state.selectionStart||y!==this.state.selectionEnd;this.setState({selectionStart:c,selectionEnd:y,draggingSelection:m&&c!==y,selectionFromDrag:c===y||m||S?!1:this.state.selectionFromDrag}),this.emitSelectionInfo()},"onSelectionChange"),onSelectionDragEnd:u(()=>{const c=this.state.selectionStart,y=this.state.selectionEnd;this.setState({draggingSelection:!1,selectionFromDrag:c!==y}),this.emitSelectionInfo()},"onSelectionDragEnd"),onFocus:u(()=>{this.setState({focused:!0,draggingSelection:!1}),this.emitSelectionInfo()},"onFocus"),onBlur:u(()=>{this.setState({focused:!1,draggingSelection:!1}),this.emitSelectionInfo()},"onBlur"),color:t.text.primary,fontSize:14,lineHeight:24,selectionColor:t.state.focus,cursorColor:t.text.primary,placeholder:"请输入富文本内容"},"rich-editor"),g]})})},"rich-text-panel-frame"),p(B,{width:300,children:p(_,{text:`字符数: ${s.length}`,fontSize:12,color:t.text.placeholder})})]})}};u(mi,"RichTextPanel");let kn=mi;const pi=class pi extends At{render(){const{theme:o,value:t,onChange:n}=this.props,i=o.border.base;return $(Q,{spacing:10,crossAxisAlignment:U.Start,children:[p(_,{text:"多行编辑器 (TextArea)",fontSize:16,color:o.text.secondary}),p(B,{width:300,height:150,border:{color:i,width:1},borderRadius:4,color:o.background.container,children:p(ct,{padding:12,children:p(lr,{value:t,onChange:n,color:o.text.primary,fontSize:14,lineHeight:24,selectionColor:o.state.focus,cursorColor:o.text.primary})})}),p(B,{width:300,children:p(_,{text:`字符数: ${t.length}`,fontSize:12,color:o.text.placeholder})})]})}};u(pi,"TextAreaPanel");let Mn=pi;const cs=(()=>{const e=`这是一个富文本编辑器
一眼可见：加粗、斜体、颜色、字号、字体
支持选区工具栏`,o=[],t=u((n,i)=>{const r=e.indexOf(n);r<0||o.push({start:r,end:r+n.length,style:i})},"addSpan");return t("加粗",{bold:!0,fontSize:16}),t("斜体",{italic:!0,fontSize:16}),t("颜色",{color:"#B23A48",fontSize:16}),t("字号",{fontSize:22,color:"#2F54EB"}),t("字体",{fontFamily:'"Songti SC", SimSun, serif',fontSize:16}),{text:e,spans:o}})(),yi=class yi extends Pt{constructor(){super(...arguments);b(this,"state",{singleLineValue:"这是一个单行编辑器",multiLineValue:`这是一个多行编辑器
支持回车换行
支持光标移动`,richValue:cs})}render(){const t=this.props.theme||w.light;return p(ct,{padding:32,children:$(Q,{spacing:32,crossAxisAlignment:U.Start,children:[p(at,{mainAxisAlignment:wt.Center,mainAxisSize:it.Max,children:$(Q,{spacing:8,crossAxisAlignment:U.Center,children:[p(_,{text:"文本编辑",fontSize:32,fontWeight:"bold",color:t.text.primary,textAlign:Bt.Center},"title"),p(_,{text:"展示 Input、TextArea、RichTextEditor 的输入、选区与快捷键能力",fontSize:16,color:t.text.secondary,textAlign:Bt.Center},"subtitle")]},"header")},"header-row"),$(Q,{spacing:24,crossAxisAlignment:U.Center,children:[p(at,{mainAxisAlignment:wt.Center,children:p(Q,{crossAxisAlignment:U.Start,children:p(bn,{theme:t,value:this.state.singleLineValue,onChange:u(n=>this.setState({singleLineValue:n}),"onChange")})})}),p(at,{mainAxisAlignment:wt.Center,children:p(Q,{crossAxisAlignment:U.Start,children:p(Mn,{theme:t,value:this.state.multiLineValue,onChange:u(n=>this.setState({multiLineValue:n}),"onChange")})})}),p(at,{mainAxisAlignment:wt.Center,children:p(Q,{crossAxisAlignment:U.Start,children:p(kn,{theme:t,value:this.state.richValue,onChange:u(n=>this.setState({richValue:n}),"onChange"),onSelectionInfo:u(n=>{var i,r;return(r=(i=this.props).onRichSelectionInfo)==null?void 0:r.call(i,n)},"onSelectionInfo")})})})]})]})})}};u(yi,"EditableTextDemoWidget");let Rn=yi;function on(e,o,t,n,i){e.render(p(jt,{width:o,height:t,enableBounceVertical:!0,enableBounceHorizontal:!1,children:p(B,{minWidth:o,minHeight:t,children:p(Rn,{theme:n,onRichSelectionInfo:i})},"editable-text-root-container")}))}u(on,"runApp$4");const hs={key:It.EditableText,label:"文本编辑",description:"展示文本编辑组件（Input/TextArea）的能力，支持单行和多行编辑模式，支持光标控制、选区、剪贴板等操作。"};function ds(){const e=Tt(),o=P.useRef(null),t=P.useRef({width:0,height:0}),n=u(r=>{o.current=r,on(r,t.current.width,t.current.height,e)},"handleRuntimeReady"),i=u((r,s,a)=>{t.current={width:r,height:s},o.current=a,on(a,r,s,e)},"handleResize");return P.useEffect(()=>{o.current&&on(o.current,t.current.width,t.current.height,e)},[e]),E.jsx(Et,{style:{width:"100%",height:"100%"},onRuntimeReady:n,onResize:i})}u(ds,"EditableTextDemo");const us="/assets/demo-01.Dy22I2Fv.jpeg";function le(e,o){let t=!1;return{name:e,pause(){t=!0},resume(){t=!1},update(n,i){t||o.update(n,i)},paint(n){o.paint(n)},dispose(){o.dispose()}}}u(le,"createPausableEffect");function Te(e,o){const t={...e},n=u((i,r,s)=>{const a=o[i];typeof a=="number"&&Number.isFinite(a)&&(t[i]=Math.max(r,Math.min(s,a)))},"setNum");return n("crystalCount",6,80),n("maxCrystalRadius",6,34),n("edgeStrength",0,1),n("blurDark",0,60),n("blurLight",0,60),t.crystalCount=Math.round(t.crystalCount),t}u(Te,"resolveFrostConfig");function fs(e){let o=2166136261;for(let t=0;t<e.length;t++)o^=e.charCodeAt(t),o=Math.imul(o,16777619);return o>>>0}u(fs,"hashSeed$3");function de(e){let o=e.v;return o^=o<<13,o^=o>>>17,o^=o<<5,e.v=o>>>0,(e.v>>>0)/4294967295}u(de,"rand01$2");function so(e,o){const t=Math.max(6,Math.min(80,Math.round(o))),n=new Float32Array(t),i=new Float32Array(t),r=new Float32Array(t),s=new Float32Array(t),a={v:fs(e)^2654435769};for(let l=0;l<t;l++){const d=de(a),h=de(a),g=.06+.22*de(a);d<.25?(n[l]=h,i[l]=g):d<.5?(n[l]=1-g,i[l]=h):d<.75?(n[l]=1-h,i[l]=1-g):(n[l]=g,i[l]=1-h),r[l]=.3+.7*de(a),s[l]=.5+.5*de(a)}return{seedKey:e,xs:n,ys:i,rs:r,ws:s}}u(so,"createFrostState");function gs(e){const o={crystalCount:22,maxCrystalRadius:16,edgeStrength:.8,blurDark:10,blurLight:12},t=u((c,y,m)=>c+(y-c)*m,"lerp"),n=u(c=>Math.max(0,Math.min(1,c)),"clamp01"),i=u(c=>c&&typeof c=="object"?c:void 0,"asObj");let r=Te(o,{}),s=r;const a={...r};let l;const d=u(c=>{const y=n(c);a.crystalCount=Math.round(y>=.5?s.crystalCount:r.crystalCount),a.maxCrystalRadius=t(r.maxCrystalRadius,s.maxCrystalRadius,y),a.edgeStrength=t(r.edgeStrength,s.edgeStrength,y),a.blurDark=t(r.blurDark,s.blurDark,y),a.blurLight=t(r.blurLight,s.blurLight,y)},"applyBlendedConfig"),h=u(c=>{const y=i(c),m=i(y==null?void 0:y.hover),S=i(y==null?void 0:y.active);m||S?(r=Te(o,m??{}),s=Te(o,S??{})):(r=Te(o,y??{}),s=r),g=void 0},"applyExternalConfig");let g;return le("frost",{update(c,y){const m=y.config;m!==l&&(l=m,h(m)),d(y.activeT),(!g||g.seedKey!==y.seed||g.xs.length!==Math.max(6,Math.min(80,Math.round(a.crystalCount))))&&(g=so(y.seed,a.crystalCount))},paint(c){const y=c.strength;if(y<=.001)return;const m=g;if(!m)return;const S=c.theme===w.dark?a.blurDark:a.blurLight,v=c.setFilter(`blur(${S}px)`);c.ctx.save(),c.ctx.globalCompositeOperation="screen";const x=Math.max(0,Math.min(1,a.edgeStrength)),T=(c.theme===w.dark?.22:.2)*y*(.25+.75*x),k=c.ctx.createRadialGradient(c.width*.5,c.height*.5,0,c.width*.5,c.height*.5,Math.hypot(c.width,c.height)*.65);k.addColorStop(0,A("#ffffff",0)),k.addColorStop(.65,A("#ffffff",T)),k.addColorStop(1,A("#ffffff",T*1.15)),c.ctx.globalAlpha=1,c.ctx.fillStyle=k,c.ctx.fillRect(0,0,c.width,c.height);const C=Math.max(6,Math.min(34,a.maxCrystalRadius));for(let R=0;R<m.xs.length;R++){const M=.5+.5*Math.sin((c.phase*(.7+m.ws[R])+R*.12)*Math.PI*2),L=(c.theme===w.dark?.14:.12)*y*(.2+.8*M);if(L<=.001)continue;const I=m.xs[R]*c.width,D=m.ys[R]*c.height,H=C*(.25+.75*m.rs[R])*(.6+.55*M);c.ctx.globalAlpha=L;const F=c.ctx.createRadialGradient(I,D,0,I,D,H);F.addColorStop(0,A("#ffffff",.85)),F.addColorStop(.5,A("#ffffff",.18)),F.addColorStop(1,A("#ffffff",0)),c.ctx.fillStyle=F,c.ctx.beginPath(),c.ctx.arc(I,D,H,0,Math.PI*2),c.ctx.fill(),c.ctx.globalAlpha=L*.55,c.ctx.strokeStyle=A(c.tint,c.theme===w.dark?.42:.34),c.ctx.lineWidth=Math.max(1,Math.min(2.2,c.height*.02)),c.ctx.beginPath(),c.ctx.moveTo(I-H*.9,D),c.ctx.lineTo(I+H*.9,D),c.ctx.moveTo(I,D-H*.9),c.ctx.lineTo(I,D+H*.9),c.ctx.stroke()}c.ctx.restore(),v&&c.setFilter(null)},dispose(){g=void 0,l=void 0}})}u(gs,"createFrostEffect");function Ae(e,o){const t={...e},n=u((i,r,s)=>{const a=o[i];typeof a=="number"&&Number.isFinite(a)&&(t[i]=Math.max(r,Math.min(s,a)))},"setNum");return n("slices",3,24),n("sliceLineWidth",.5,8),n("maxShift",0,30),n("dotCount",0,520),n("scanLineWidth",.5,8),n("blurDark",0,60),n("blurLight",0,60),t.slices=Math.round(t.slices),t.maxShift=Math.round(t.maxShift),t.dotCount=Math.round(t.dotCount),t}u(Ae,"resolveCyberpunkConfig");function ms(e){let o=2166136261;for(let t=0;t<e.length;t++)o^=e.charCodeAt(t),o=Math.imul(o,16777619);return o>>>0}u(ms,"hashSeed$2");function xt(e){let o=e.v;return o^=o<<13,o^=o>>>17,o^=o<<5,e.v=o>>>0,(e.v>>>0)/4294967295}u(xt,"rand01$1");function ps(e){const o={slices:12,sliceLineWidth:1.4,maxShift:8,dotCount:160,scanLineWidth:1,blurDark:2.2,blurLight:2.6},t=u((m,S,v)=>m+(S-m)*v,"lerp"),n=u(m=>Math.max(0,Math.min(1,m)),"clamp01"),i=u(m=>m&&typeof m=="object"?m:void 0,"asObj");let r=Ae(o,{}),s=r;const a={...r};let l;const d=u(m=>{const S=n(m);a.slices=Math.round(t(r.slices,s.slices,S)),a.dotCount=Math.round(t(r.dotCount,s.dotCount,S)),a.maxShift=t(r.maxShift,s.maxShift,S),a.sliceLineWidth=t(r.sliceLineWidth,s.sliceLineWidth,S),a.scanLineWidth=t(r.scanLineWidth,s.scanLineWidth,S),a.blurDark=t(r.blurDark,s.blurDark,S),a.blurLight=t(r.blurLight,s.blurLight,S)},"applyBlendedConfig"),h=u(m=>{const S=i(m),v=i(S==null?void 0:S.hover),x=i(S==null?void 0:S.active);v||x?(r=Ae(o,v??{}),s=Ae(o,x??{})):(r=Ae(o,S??{}),s=r)},"applyExternalConfig");let g=0,f="",c=0;return le("cyberpunk",{update(m,S){const v=S.config;v!==l&&(l=v,h(v)),d(S.activeT),f!==S.seed&&(f=S.seed,g=ms(f)),c+=m},paint(m){const S=m.strength;if(S<=.001)return;const v={v:g^Math.floor(c*60)},x=Math.max(3,Math.min(24,Math.round(a.slices))),T=Math.max(0,Math.min(30,a.maxShift)),k=Math.max(.5,Math.min(8,a.sliceLineWidth)),C=Math.max(.5,Math.min(8,a.scanLineWidth)),R=m.theme===w.dark?a.blurDark:a.blurLight,M=m.setFilter(`blur(${R}px)`);m.ctx.save(),m.ctx.globalCompositeOperation="screen";const L=Math.max(0,Math.min(m.width,m.x)),I=Math.max(0,Math.min(m.height,m.y)),D=m.ctx.createRadialGradient(L,I,0,L,I,Math.max(m.width,m.height)*.9);D.addColorStop(0,A(m.tint,m.theme===w.dark?.6:.46)),D.addColorStop(.5,A("#64e6ff",m.theme===w.dark?.18:.14)),D.addColorStop(1,A("#ff4bd9",0)),m.ctx.globalAlpha=(m.theme===w.dark?.22:.18)*S,m.ctx.fillStyle=D,m.ctx.fillRect(0,0,m.width,m.height);const H=m.width/x,F=m.height/x,j=(m.theme===w.dark?.08:.06)*S;m.ctx.globalAlpha=j,m.ctx.lineWidth=Math.max(.5,Math.min(2.4,k*.65)),m.ctx.strokeStyle=A("#64e6ff",1);for(let J=1;J<x;J++){const ht=J*H;m.ctx.beginPath(),m.ctx.moveTo(ht,0),m.ctx.lineTo(ht,m.height),m.ctx.stroke()}m.ctx.strokeStyle=A("#ff4bd9",1);for(let J=1;J<x;J++){const ht=J*F;m.ctx.beginPath(),m.ctx.moveTo(0,ht),m.ctx.lineTo(m.width,ht),m.ctx.stroke()}const V=Math.max(10,Math.min(m.width,m.height)*.22),O=Math.max(4,k*2.2),W=u((J,ht,et,pt,Ht)=>{m.ctx.strokeStyle=A(Ht,1),m.ctx.lineWidth=k,m.ctx.beginPath(),m.ctx.moveTo(J,ht+pt*V),m.ctx.lineTo(J,ht),m.ctx.lineTo(J+et*V,ht),m.ctx.stroke()},"drawCorner");m.ctx.globalAlpha=(m.theme===w.dark?.22:.18)*S,W(O,O,1,1,"#64e6ff"),W(m.width-O,O,-1,1,"#ff4bd9"),W(O,m.height-O,1,-1,"#ff4bd9"),W(m.width-O,m.height-O,-1,-1,"#64e6ff");const N=m.height-Math.max(10,m.height*.18),X=Math.max(2,k*1.1),K=Math.max(4,Math.min(18,Math.round(x*.75))),tt=m.width*.82/K,G=(m.width-tt*K)*.5;m.ctx.globalAlpha=(m.theme===w.dark?.18:.14)*S;for(let J=0;J<K;J++){const ht=(xt(v)*2-1)*T*(.25+.75*S),et=tt*(.35+.65*xt(v));m.ctx.fillStyle=A(J%2===0?"#64e6ff":"#ff4bd9",1),m.ctx.fillRect(G+J*tt+ht,N,et,X)}const ot=Math.max(3,Math.round(K*(.55+.85*S))),rt=m.width*.18,dt=m.width*.86,bt=Math.max(1,Math.min(8,X*.9));for(let J=0;J<ot;J++){const ht=xt(v)*m.height,et=rt+(dt-rt)*xt(v),pt=xt(v)*Math.max(0,m.width-et)+(xt(v)*2-1)*T*(.18+.82*S),Ht=(m.theme===w.dark?.16:.12)*S*(.25+.75*xt(v));m.ctx.globalAlpha=Ht,m.ctx.fillStyle=A(xt(v)<.55?"#64e6ff":"#ff4bd9",1),m.ctx.fillRect(pt,ht,et,bt)}const ft=Math.round(a.dotCount*(.35+.65*S));for(let J=0;J<ft;J++){const ht=xt(v)*m.width,et=xt(v)*m.height,pt=.8+xt(v)*1.8,Ht=.8+xt(v)*2.2,Ft=xt(v),Yt=(m.theme===w.dark?.2:.16)*S*(.25+.75*xt(v));m.ctx.globalAlpha=Yt,m.ctx.fillStyle=Ft<.62?A("#ffffff",1):Ft<.82?A("#64e6ff",1):A("#ff4bd9",1),m.ctx.fillRect(ht,et,pt,Ht)}m.ctx.globalAlpha=(m.theme===w.dark?.1:.08)*S,m.ctx.fillStyle=A("#ffffff",1);const St=c*.65%1*m.height;m.ctx.fillRect(0,St,m.width,C),m.ctx.restore(),M&&m.setFilter(null)},dispose(){f="",g=0,c=0,l=void 0}})}u(ps,"createCyberpunkEffect");function Pe(e,o){const t={...e},n=u((i,r,s)=>{const a=o[i];typeof a=="number"&&Number.isFinite(a)&&(t[i]=Math.max(r,Math.min(s,a)))},"setNum");return n("outlineBlurDark",0,60),n("outlineBlurLight",0,60),n("bandBlurDark",0,60),n("bandBlurLight",0,60),t}u(Pe,"resolvePrismConfig");function ys(e){const o={outlineBlurDark:2.2,outlineBlurLight:2.6,bandBlurDark:10,bandBlurLight:12},t=u((f,c,y)=>f+(c-f)*y,"lerp"),n=u(f=>Math.max(0,Math.min(1,f)),"clamp01"),i=u(f=>f&&typeof f=="object"?f:void 0,"asObj");let r=Pe(o,{}),s=r;const a={...r};let l;const d=u(f=>{const c=n(f);a.outlineBlurDark=t(r.outlineBlurDark,s.outlineBlurDark,c),a.outlineBlurLight=t(r.outlineBlurLight,s.outlineBlurLight,c),a.bandBlurDark=t(r.bandBlurDark,s.bandBlurDark,c),a.bandBlurLight=t(r.bandBlurLight,s.bandBlurLight,c)},"applyBlendedConfig"),h=u(f=>{const c=i(f),y=i(c==null?void 0:c.hover),m=i(c==null?void 0:c.active);y||m?(r=Pe(o,y??{}),s=Pe(o,m??{})):(r=Pe(o,c??{}),s=r)},"applyExternalConfig");return le("prism",{update(f,c){const y=c.config;y!==l&&(l=y,h(y)),d(c.activeT)},paint(f){const c=f.strength;if(c<=.001)return;const y=Math.max(1.1,Math.min(3.6,f.height*.052))*c,m=f.theme===w.dark?a.outlineBlurDark:a.outlineBlurLight,S=f.setFilter(`blur(${m}px)`);f.ctx.save(),f.ctx.globalCompositeOperation="screen",f.ctx.lineWidth=2.2,f.ctx.globalAlpha=(f.theme===w.dark?.34:.28)*c,f.ctx.strokeStyle=A("#64e6ff",1),f.ctx.beginPath(),ut(f.ctx,.5-y,.5-y*.55,f.width-1,f.height-1,Math.max(1,f.radius-.5)),f.ctx.stroke(),f.ctx.strokeStyle=A("#ff4bd9",1),f.ctx.beginPath(),ut(f.ctx,.5+y,.5+y*.6,f.width-1,f.height-1,Math.max(1,f.radius-.5)),f.ctx.stroke(),f.ctx.strokeStyle=A("#ffe56a",1),f.ctx.beginPath(),ut(f.ctx,.5+y*.15,.5-y*.85,f.width-1,f.height-1,Math.max(1,f.radius-.5)),f.ctx.stroke(),f.ctx.restore(),S&&f.setFilter(null),f.ctx.save(),f.ctx.globalCompositeOperation="screen",f.ctx.globalAlpha=(f.theme===w.dark?.26:.2)*c,f.ctx.beginPath(),ut(f.ctx,0,0,f.width,f.height,f.radius),f.ctx.clip();const v=f.phase*.55%1,x=-f.width*.6+f.width*2.1*v,T=f.ctx.createLinearGradient(x,-f.height*.2,x+f.width*1.1,f.height*1.2);T.addColorStop(0,A("#64e6ff",0)),T.addColorStop(.32,A("#64e6ff",.18)),T.addColorStop(.46,A("#ff4bd9",.18)),T.addColorStop(.6,A("#ffe56a",.16)),T.addColorStop(1,A("#ffe56a",0));const k=f.theme===w.dark?a.bandBlurDark:a.bandBlurLight,C=f.setFilter(`blur(${k}px)`);f.ctx.fillStyle=T,f.ctx.fillRect(0,0,f.width,f.height),C&&f.setFilter(null),f.ctx.restore()},dispose(){l=void 0}})}u(ys,"createPrismEffect");function Ss(e){let o=2166136261;for(let t=0;t<e.length;t++)o^=e.charCodeAt(t),o=Math.imul(o,16777619);return o>>>0}u(Ss,"hashSeed$1");function Le(e,o){const t={...e},n=u((i,r,s)=>{const a=o[i];typeof a=="number"&&Number.isFinite(a)&&(t[i]=Math.max(r,Math.min(s,a)))},"setNum");if(n("barCount",8,120),n("barGap",0,16),n("paddingX",0,1/0),n("paddingY",0,1/0),n("minHeightRatio",0,1),n("maxHeightRatio",0,1),n("rise",1,80),n("fall",1,80),n("heightSlowdown",0,10),n("spectrumPower",.2,2),n("glowBlurDark",0,60),n("glowBlurLight",0,60),n("barsBlurDark",0,60),n("barsBlurLight",0,60),n("particleCount",0,120),n("particleSize",.5,10),n("particleBlurDark",0,60),n("particleBlurLight",0,60),typeof o.easing=="string"){const i=o.easing;(i==="linear"||i==="cubicOut"||i==="quintOut"||i==="expoOut")&&(t.easing=i)}if(typeof o.particles=="boolean"&&(t.particles=o.particles),Array.isArray(o.padding)&&o.padding.length===4){const[i,r,s,a]=o.padding,l=u(d=>typeof d=="number"&&Number.isFinite(d)?Math.max(0,d):0,"clamp");t.padding=[l(i),l(r),l(s),l(a)]}if(Array.isArray(o.barGradientStops)){const i=o.barGradientStops.map(r=>{const s=typeof(r==null?void 0:r.pos)=="number"&&Number.isFinite(r.pos)?Math.max(0,Math.min(1,r.pos)):0,a=typeof(r==null?void 0:r.color)=="string"&&r.color?r.color:"#ffffff";return{pos:s,color:a}}).sort((r,s)=>r.pos-s.pos);t.barGradientStops=i.length?i:void 0}return t.barCount=Math.round(t.barCount),t.particleCount=Math.round(t.particleCount),t.minHeightRatio=Math.max(0,Math.min(1,t.minHeightRatio)),t.maxHeightRatio=Math.max(t.minHeightRatio,Math.min(1,t.maxHeightRatio)),t}u(Le,"resolveMusicConfig");function bs(e,o){const t=Math.max(0,Math.min(1,e));if(o==="linear")return t;if(o==="quintOut"){const i=1-t;return 1-i*i*i*i*i}if(o==="expoOut")return t>=1?1:1-Math.pow(2,-10*t);const n=1-t;return 1-n*n*n}u(bs,"ease01");function ao(e,o,t,n,i){if(e&&e.length>0){const g=t<=1?0:o/(t-1),f=Math.pow(g,1.65),c=Math.max(0,Math.min(e.length-1,Math.floor(f*(e.length-1)))),y=Number(e[c]),m=Number.isFinite(y)?y:0,S=m>1.5?m/255:m;return Math.max(0,Math.min(1,S))}const r=t<=1?0:o/(t-1),s=.5+.5*Math.sin((n*(1.05+r*1.4)+o*.11)*Math.PI*2),a=.5+.5*Math.sin((n*(.42+r*2.2)+o*.07+.37)*Math.PI*2),l=.5+.5*Math.sin((n*(1.9+r*.7)+o*.18+.9)*Math.PI*2),d=.62*s+.26*a+.12*l,h=.35+.65*(.5+.5*Math.sin((n*1.25+i%97*.0012)*Math.PI*2));return Math.max(0,Math.min(1,d*(.55+.45*h)))}u(ao,"readSpectrum");function ws(e,o,t){const n=Math.max(8,Math.min(120,Math.round(o.barCount))),i=Math.max(0,Math.min(120,Math.round(o.particleCount))),r=Ss(t);if(e&&e.barCount===n&&e.pCount===i&&e.seed===r)return e;const s=new Float32Array(n),a=new Float32Array(n),l=new Float32Array(i),d=new Float32Array(i),h=new Float32Array(i),g=new Float32Array(i),f=new Float32Array(i),c=new Float32Array(i);for(let y=0;y<i;y++)f[y]=0,c[y]=0;return{barCount:n,values:s,peaks:a,env:0,beat:0,px:l,py:d,pvx:h,pvy:g,plife:f,pmax:c,pCount:i,seed:r}}u(ws,"ensureMusicState");function vs(e,o,t,n){const i=n.barCount,r=t.spectrumPower,s=t.minHeightRatio,a=t.maxHeightRatio;let l=0;for(let m=0;m<i;m++){const S=ao(o.musicSpectrum,m,i,o.phase,n.seed),v=r===1?S:Math.pow(S,r),x=bs(v,t.easing),T=s+(a-s)*x,k=n.values[m],C=T-k;if(C>=0){const R=1/(1+t.heightSlowdown*k),M=1-Math.exp(-t.rise*R*e);n.values[m]=k+C*M}else{const R=1-Math.exp(-t.fall*e);n.values[m]=k+C*R}n.peaks[m]=Math.max(n.values[m],n.peaks[m]-e*.8),l+=n.values[m]}const d=i>0?l/i:0,f=1-Math.exp(-(d>n.env?12:5)*e);n.env+=(d-n.env)*f;const c=Math.max(0,d-n.env);if(n.beat+=(c-n.beat)*(1-Math.exp(-18*e)),!t.particles||n.pCount<=0)return;const y=Math.min(6,Math.floor(n.beat*40));if(y>0)for(let m=0;m<y;m++){let S=0,v=n.plife[0];for(let k=1;k<n.pCount;k++){const C=n.plife[k];C<v&&(v=C,S=k)}const x=ao(o.musicSpectrum,(m*7+n.seed%31)%i,i,o.phase,n.seed),T=(.5+.5*Math.sin((o.phase*3.7+m*1.3)*Math.PI*2))*2-1;n.px[S]=T*.18,n.py[S]=.55-x*.22,n.pvx[S]=T*.18,n.pvy[S]=-.45-.65*x,n.pmax[S]=.25+.35*x,n.plife[S]=n.pmax[S]}for(let m=0;m<n.pCount;m++){let S=n.plife[m];S<=0||(S=Math.max(0,S-e),n.plife[m]=S,n.pvy[m]+=1.2*e,n.px[m]+=n.pvx[m]*e,n.py[m]+=n.pvy[m]*e)}}u(vs,"updateMusic");function xs(e){const o={barCount:48,barGap:2,paddingX:18,paddingY:16,minHeightRatio:.08,maxHeightRatio:.62,rise:22,fall:14,heightSlowdown:2.2,spectrumPower:.72,easing:"cubicOut",glowBlurDark:22,glowBlurLight:24,barsBlurDark:10,barsBlurLight:12,particles:!0,particleCount:24,particleSize:2.4,particleBlurDark:8,particleBlurLight:10},t=u((c,y,m)=>c+(y-c)*m,"lerp"),n=u(c=>Math.max(0,Math.min(1,c)),"clamp01"),i=u(c=>c&&typeof c=="object"?c:void 0,"asObj");let r=Le(o,{}),s=r;const a={...r};let l,d;const h=u(c=>{const y=n(c),m=y>=.5?s:r;a.barCount=m.barCount,a.particleCount=m.particleCount,a.particles=m.particles,a.easing=m.easing,a.barGradientStops=m.barGradientStops,a.barGap=t(r.barGap,s.barGap,y),a.paddingX=t(r.paddingX,s.paddingX,y),a.paddingY=t(r.paddingY,s.paddingY,y),a.rise=t(r.rise,s.rise,y),a.fall=t(r.fall,s.fall,y),a.heightSlowdown=t(r.heightSlowdown,s.heightSlowdown,y),a.spectrumPower=t(r.spectrumPower,s.spectrumPower,y),a.glowBlurDark=t(r.glowBlurDark,s.glowBlurDark,y),a.glowBlurLight=t(r.glowBlurLight,s.glowBlurLight,y),a.barsBlurDark=t(r.barsBlurDark,s.barsBlurDark,y),a.barsBlurLight=t(r.barsBlurLight,s.barsBlurLight,y),a.particleSize=t(r.particleSize,s.particleSize,y),a.particleBlurDark=t(r.particleBlurDark,s.particleBlurDark,y),a.particleBlurLight=t(r.particleBlurLight,s.particleBlurLight,y),a.minHeightRatio=t(r.minHeightRatio,s.minHeightRatio,y);const S=t(r.maxHeightRatio,s.maxHeightRatio,y);a.maxHeightRatio=Math.max(a.minHeightRatio,S);const v=r.padding,x=s.padding;v&&x?a.padding=[t(v[0],x[0],y),t(v[1],x[1],y),t(v[2],x[2],y),t(v[3],x[3],y)]:a.padding=y>=.5?x:v},"applyBlendedConfig"),g=u(c=>{const y=i(c),m=i(y==null?void 0:y.hover),S=i(y==null?void 0:y.active);m||S?(r=Le(o,m??{}),s=Le(o,S??{})):(r=Le(o,y??{}),s=r),l=void 0},"applyExternalConfig");return le("rhythm",{update(c,y){const m=y.config;m!==d&&(d=m,g(m)),h(y.activeT),l&&l.barCount!==Math.round(a.barCount)&&(l=void 0),l=ws(l,a,y.seed),vs(c,y,a,l)},paint(c){const y=c.strength;if(y<=.001)return;const m=l;if(!m)return;const S=a.padding,v=Math.max(0,Array.isArray(S)?S[0]:a.paddingY),x=Math.max(0,Array.isArray(S)?S[1]:a.paddingX),T=Math.max(0,Array.isArray(S)?S[2]:a.paddingY),k=Math.max(0,Array.isArray(S)?S[3]:a.paddingX),C=k,R=v,M=Math.max(0,c.width-k-x),L=Math.max(0,c.height-v-T);if(M<=1||L<=1||m.barCount<=0)return;const I=m.barCount,D=Math.max(0,a.barGap),F=(M-D*(I-1))/I;if(!(F>.6))return;const j=Math.max(1,Math.min(8,F*.6)),V=Math.max(C,Math.min(C+M,c.x)),O=R+L-2,W=L*.64,N=Math.max(0,Math.min(1,m.env)),X=Math.max(0,Math.min(1,m.beat*6)),K=c.theme===w.dark?a.glowBlurDark:a.glowBlurLight,tt=c.setFilter(`blur(${K}px)`);c.ctx.save(),c.ctx.globalCompositeOperation="screen",c.ctx.globalAlpha=(c.theme===w.dark?.22:.18)*y*(.35+.65*N);const G=c.ctx.createRadialGradient(V,O,0,V,O,M*.8);G.addColorStop(0,A(c.tint,c.theme===w.dark?.58:.52)),G.addColorStop(.45,A("#ffffff",c.theme===w.dark?.1:.12)),G.addColorStop(1,A("#ffffff",0)),c.ctx.fillStyle=G,c.ctx.fillRect(0,0,c.width,c.height),c.ctx.restore(),tt&&c.setFilter(null);const ot=c.theme===w.dark?a.barsBlurDark:a.barsBlurLight,rt=c.setFilter(`blur(${ot}px)`);c.ctx.save(),c.ctx.globalCompositeOperation="screen";const dt=O-W,bt=O+W*.25,ft=c.ctx.createLinearGradient(0,bt,0,dt);if(a.barGradientStops&&a.barGradientStops.length>=2)for(const J of a.barGradientStops)ft.addColorStop(J.pos,J.color);else ft.addColorStop(0,A("#ffffff",c.theme===w.dark?.9:.95)),ft.addColorStop(.45,A(c.tint,c.theme===w.dark?.92:.88)),ft.addColorStop(1,A("#ffffff",c.theme===w.dark?.22:.26));c.ctx.fillStyle=ft;const Rt=(c.theme===w.dark?.46:.38)*y;for(let J=0;J<I;J++){const ht=Math.max(0,Math.min(1,m.values[J])),et=Math.max(L*.04,ht*L),pt=C+J*(F+D),Ht=O-et,Ft=Rt*(.25+.75*Math.min(1,et/(W+1)))*(.75+.25*X);if(Ft<=.001)continue;c.ctx.globalAlpha=Ft,c.ctx.beginPath(),ut(c.ctx,pt,Ht,F,et,j),c.ctx.fill();const Yt=et*.22;Yt>.5&&(c.ctx.globalAlpha=Ft*.22,c.ctx.beginPath(),ut(c.ctx,pt,O,F,Yt,j),c.ctx.fill())}c.ctx.restore(),rt&&c.setFilter(null);const St=c.setFilter(`blur(${c.theme===w.dark?2.2:2.6}px)`);c.ctx.save(),c.ctx.globalCompositeOperation="screen",c.ctx.globalAlpha=(c.theme===w.dark?.22:.18)*y*(.25+.75*X),c.ctx.strokeStyle=A("#ffffff",1),c.ctx.lineWidth=1.25;for(let J=0;J<I;J++){const ht=Math.max(L*.04,Math.max(0,Math.min(1,m.peaks[J]))*L),et=C+J*(F+D),pt=O-ht;pt<R||pt>R+L||(c.ctx.beginPath(),c.ctx.moveTo(et+F*.15,pt),c.ctx.lineTo(et+F*.85,pt),c.ctx.stroke())}if(c.ctx.restore(),St&&c.setFilter(null),a.particles&&m.pCount>0){const J=c.theme===w.dark?a.particleBlurDark:a.particleBlurLight,ht=c.setFilter(`blur(${J}px)`);c.ctx.save(),c.ctx.globalCompositeOperation="screen";for(let et=0;et<m.pCount;et++){const pt=m.plife[et];if(!(pt>0))continue;const Ht=m.pmax[et]>0?m.pmax[et]:.3,Ft=Math.max(0,Math.min(1,pt/Ht)),Yt=C+M*(.5+m.px[et]),Xi=R+L*m.py[et],Ui=a.particleSize*(.7+1.1*Ft);c.ctx.globalAlpha=(c.theme===w.dark?.18:.14)*y*Ft,c.ctx.fillStyle=A("#ffffff",1),c.ctx.beginPath(),c.ctx.arc(Yt,Xi,Ui,0,Math.PI*2),c.ctx.fill(),c.ctx.globalAlpha=(c.theme===w.dark?.14:.12)*y*Ft,c.ctx.fillStyle=A(c.tint,.9),c.ctx.beginPath(),c.ctx.arc(Yt,Xi,Ui*.85,0,Math.PI*2),c.ctx.fill()}c.ctx.restore(),ht&&c.setFilter(null)}},dispose(){l=void 0,d=void 0}})}u(xs,"createSparkleEffect");function Ie(e,o){const t={...e},n=u((i,r,s)=>{const a=o[i];typeof a=="number"&&Number.isFinite(a)&&(t[i]=Math.max(r,Math.min(s,a)))},"setNum");return n("bandWidth",2,24),n("blurDark",0,200),n("blurLight",0,200),t}u(Ie,"resolveRimConfig");function lo(e){const o={bandWidth:8,blurDark:7,blurLight:8},t=u((f,c,y)=>f+(c-f)*y,"lerp"),n=u(f=>Math.max(0,Math.min(1,f)),"clamp01"),i=u(f=>f&&typeof f=="object"?f:void 0,"asObj");let r=Ie(o,{}),s=r;const a={...r};let l;const d=u(f=>{const c=n(f);a.bandWidth=t(r.bandWidth,s.bandWidth,c),a.blurDark=t(r.blurDark,s.blurDark,c),a.blurLight=t(r.blurLight,s.blurLight,c)},"applyBlendedConfig"),h=u(f=>{const c=i(f),y=i(c==null?void 0:c.hover),m=i(c==null?void 0:c.active);y||m?(r=Ie(o,y??{}),s=Ie(o,m??{})):(r=Ie(o,c??{}),s=r)},"applyExternalConfig");return le("rim",{update(f,c){const y=c.config;y!==l&&(l=y,h(y)),d(c.activeT)},paint(f){const c=f.strength;if(c<=.001)return;const y=Math.max(2,Math.min(12,a.bandWidth)),m=f.phase*.9%1,S=-f.width*1.1+f.width*2.4*m,v=f.ctx.createLinearGradient(S,-f.height*.2,S+f.width*1.2,f.height*1.3);v.addColorStop(0,A("#ffffff",0)),v.addColorStop(.42,A("#ffffff",(f.theme===w.dark?.52:.62)*c)),v.addColorStop(.5,A(f.tint,(f.theme===w.dark?.22:.18)*c)),v.addColorStop(.58,A("#ffffff",(f.theme===w.dark?.26:.3)*c)),v.addColorStop(1,A("#ffffff",0));const x=f.theme===w.dark?a.blurDark:a.blurLight,T=f.setFilter(`blur(${x}px)`);f.ctx.save(),f.ctx.globalCompositeOperation="screen",f.ctx.fillStyle=v,f.ctx.beginPath(),ut(f.ctx,0,0,f.width,f.height,f.radius),ut(f.ctx,y,y,f.width-y*2,f.height-y*2,Math.max(0,f.radius-y)),f.ctx.fill("evenodd"),T&&f.setFilter(null),f.ctx.restore(),f.ctx.save(),f.ctx.globalCompositeOperation="screen",f.ctx.globalAlpha=(f.theme===w.dark?.22:.18)*c,f.ctx.lineWidth=1.5,f.ctx.strokeStyle=A(f.tint,.9),f.ctx.beginPath(),ut(f.ctx,.75,.75,f.width-1.5,f.height-1.5,Math.max(1,f.radius-.75)),f.ctx.stroke(),f.ctx.restore()},dispose(){l=void 0}})}u(lo,"createRimEffect");function Cs(e){let o=2166136261;for(let t=0;t<e.length;t++)o^=e.charCodeAt(t),o=Math.imul(o,16777619);return o>>>0}u(Cs,"hashSeed");function ue(e){let o=e.v;return o^=o<<13,o^=o>>>17,o^=o<<5,e.v=o>>>0,(e.v>>>0)/4294967295}u(ue,"rand01");function Fe(e,o){const t={...e},n=u((i,r,s)=>{const a=o[i];typeof a=="number"&&Number.isFinite(a)&&(t[i]=Math.max(r,Math.min(s,a)))},"setNum");return n("blurDark",0,60),n("blurLight",0,60),n("crestHeight",2,80),n("wavelength",24,420),n("speed",0,6),n("runupRatio",0,1),n("foamCount",0,140),n("foamSize",.5,14),n("foamJitter",0,32),t.foamCount=Math.round(t.foamCount),t}u(Fe,"resolveWaveConfig");function rn(e,o,t,n,i,r,s){const a=(e-s)/Math.max(1,o),l=Math.exp(-a*a*8.5),d=Math.PI*2/Math.max(24,i),h=Math.sin(e*d+n),g=Math.sin(e*d*.52+n*1.4+1.2);return t+(h*.72+g*.28)*r*(.55+.45*l)}u(rn,"waveY");function ks(e){const o={blurDark:14,blurLight:16,crestHeight:18,wavelength:140,speed:1.25,runupRatio:.62,foamCount:28,foamSize:3,foamJitter:10},t=u((c,y,m)=>c+(y-c)*m,"lerp"),n=u(c=>Math.max(0,Math.min(1,c)),"clamp01"),i=u(c=>c&&typeof c=="object"?c:void 0,"asObj");let r=Fe(o,{}),s=r;const a={...r};let l,d="wave-seed";const h=u(c=>{const y=n(c);a.blurDark=t(r.blurDark,s.blurDark,y),a.blurLight=t(r.blurLight,s.blurLight,y),a.crestHeight=t(r.crestHeight,s.crestHeight,y),a.wavelength=t(r.wavelength,s.wavelength,y),a.speed=t(r.speed,s.speed,y),a.runupRatio=t(r.runupRatio,s.runupRatio,y),a.foamSize=t(r.foamSize,s.foamSize,y),a.foamJitter=t(r.foamJitter,s.foamJitter,y),a.foamCount=Math.round(y>=.5?s.foamCount:r.foamCount)},"applyBlendedConfig"),g=u(c=>{const y=i(c),m=i(y==null?void 0:y.hover),S=i(y==null?void 0:y.active);m||S?(r=Fe(o,m??{}),s=Fe(o,S??{})):(r=Fe(o,y??{}),s=r)},"applyExternalConfig");return le("wave",{update(c,y){typeof y.seed=="string"&&y.seed&&(d=y.seed);const m=y.config;m!==l&&(l=m,g(m)),h(y.activeT)},paint(c){const y=c.strength;if(y<=.001)return;const m=c.width,S=c.height,v=c.phase*a.speed*Math.PI*2,x=Math.max(0,Math.min(m,c.x)),T=S*(.14+a.runupRatio*.72*y),k=S-T,C=Math.max(2,Math.min(80,a.crestHeight))*(.4+.6*y),R=Math.max(24,a.wavelength),M=c.theme===w.dark?a.blurDark:a.blurLight,L=c.setFilter(`blur(${M}px)`);c.ctx.save(),c.ctx.globalCompositeOperation="screen";const I=(c.theme===w.dark?.22:.18)*y,D=(c.theme===w.dark?.26:.22)*y,H=(c.theme===w.dark?.12:.08)*y,F=c.ctx.createLinearGradient(0,k-C*3,0,S);F.addColorStop(0,A(c.tint,0)),F.addColorStop(.35,A(c.tint,I)),F.addColorStop(1,A("#ffffff",I*.35)),c.ctx.fillStyle=F,c.ctx.beginPath(),c.ctx.moveTo(0,S),c.ctx.lineTo(0,rn(0,m,k,v,R,C,x));const j=Math.max(24,Math.min(120,Math.round(m/8)));for(let K=1;K<=j;K++){const tt=K/j*m,G=rn(tt,m,k,v,R,C,x);c.ctx.lineTo(tt,G)}c.ctx.lineTo(m,S),c.ctx.closePath(),c.ctx.fill();const V=c.ctx.createLinearGradient(0,k-C*1.4,0,k+C*2.2);V.addColorStop(0,A("#ffd59e",0)),V.addColorStop(.4,A("#ffd59e",H)),V.addColorStop(1,A("#6b4a22",H*.35)),c.ctx.globalAlpha=1,c.ctx.fillStyle=V,c.ctx.fillRect(0,k-C*1.6,m,C*3.6);const O={v:Cs(d)^1779033703^Math.floor(c.phase*60)},W=Math.max(0,Math.min(140,a.foamCount)),N=Math.max(.5,Math.min(14,a.foamSize)),X=Math.max(0,Math.min(32,a.foamJitter));for(let K=0;K<W;K++){const tt=ue(O),G=Math.max(0,Math.min(m,(K+tt)/Math.max(1,W)*m)),ot=rn(G,m,k,v,R,C,x),rt=(ue(O)*2-1)*X,dt=(ue(O)*2-1)*X*.7,bt=N*(.55+.9*ue(O))*(.6+.4*y);c.ctx.globalAlpha=D*(.35+.65*ue(O));const ft=c.ctx.createRadialGradient(G+dt,ot+rt,0,G+dt,ot+rt,bt);ft.addColorStop(0,A("#ffffff",.9)),ft.addColorStop(.45,A("#ffffff",.28)),ft.addColorStop(1,A("#ffffff",0)),c.ctx.fillStyle=ft,c.ctx.beginPath(),c.ctx.arc(G+dt,ot+rt,bt,0,Math.PI*2),c.ctx.fill()}c.ctx.restore(),L&&c.setFilter(null)},dispose(){l=void 0}})}u(ks,"createWaveEffect");const Si=class Si extends ae{constructor(){super(...arguments);b(this,"theme");b(this,"tint","#ffffff");b(this,"glyph","");b(this,"activeVariant","rim");b(this,"activeT",0);b(this,"hoverT",0);b(this,"pressX",0);b(this,"pressY",0);b(this,"hoverX",0);b(this,"hoverY",0);b(this,"phase",0);b(this,"effect")}setFrameState(t){this.theme=t.theme,this.tint=t.tint,this.glyph=t.glyph,this.activeVariant=t.activeVariant,this.activeT=t.activeT,this.hoverT=t.hoverT,this.pressX=t.pressX,this.pressY=t.pressY,this.hoverX=t.hoverX,this.hoverY=t.hoverY,this.phase=t.phase,this.effect=t.effect}createElement(t){return super.createElement(t),this.theme=t.theme,typeof t.tint=="string"&&t.tint&&(this.tint=t.tint),typeof t.glyph=="string"&&(this.glyph=t.glyph),typeof t.activeVariant=="string"&&t.activeVariant&&(this.activeVariant=t.activeVariant),this}performLayout(t){const n=Number.isFinite(t.maxWidth)?t.maxWidth:t.minWidth,i=Number.isFinite(t.maxHeight)?t.maxHeight:t.minHeight,r=Math.max(0,Number.isFinite(n)?n:0),s=Math.max(0,Number.isFinite(i)?i:0);return{width:r,height:s}}paintSelf(t){var v;const n=t.renderer,i=(v=n.getRawInstance)==null?void 0:v.call(n),r=this.theme??w.light,{width:s,height:a}=this.renderObject.size;if(!i||s<=0||a<=0){n.drawRect({x:0,y:0,width:s,height:a,fill:r.background.container,borderRadius:18});return}const l=i.filter,d=u(x=>typeof l=="string"?(x===null?i.filter=l:i.filter=x,!0):!1,"setFilter"),h=Math.min(a*.38,26),g=Math.max(0,Math.min(1,this.activeT)),f=g*g*(3-2*g),c=Math.max(0,Math.min(1,this.hoverT)),y=c*c*(3-2*c),m=Math.max(0,Math.min(s,this.hoverX)),S=Math.max(0,Math.min(a,this.hoverY));i.save(),i.clearRect(0,0,s,a),this.paintBase(i,r,s,a,h,f),i.save(),i.beginPath(),ut(i,0,0,s,a,h),i.clip(),this.paintFrosted(i,r,s,a,d),this.paintTintGlow(i,r,s,a,d,this.tint),this.paintEdge(i,r,s,a,h,f,y,d),this.paintEffects(i,r,s,a,h,f,y,m,S,d),this.paintTopHighlight(i,r,s,a,f),this.paintSpecks(i,r,s,a,d),this.paintBorder(i,r,s,a,h),i.restore(),this.glyph&&this.paintGlyphTile(i,r,a,f,d),i.restore()}paintBase(t,n,i,r,s,a){t.save();const l=n===w.dark?.34:.18,d=n===w.dark?26:24,h=n===w.dark?14:12;t.shadowColor=A("#000000",l*(1-.35*a)),t.shadowBlur=d*(1-.45*a),t.shadowOffsetY=h*(1-.55*a),t.beginPath(),ut(t,0,0,i,r,s);const g=t.createLinearGradient(0,0,i,r);n===w.dark?(g.addColorStop(0,A("#ffffff",.14+.06*a)),g.addColorStop(.55,A("#ffffff",.06+.05*a)),g.addColorStop(1,A("#ffffff",.1+.05*a))):(g.addColorStop(0,A("#ffffff",.66+.08*a)),g.addColorStop(.55,A("#ffffff",.32+.1*a)),g.addColorStop(1,A("#ffffff",.5+.08*a))),t.fillStyle=g,t.fill(),t.restore()}paintFrosted(t,n,i,r,s){const a=s(`blur(${n===w.dark?16:18}px)`);t.globalAlpha=n===w.dark?.62:.46;const l=t.createLinearGradient(0,0,i,r);l.addColorStop(0,A("#ffffff",n===w.dark?.08:.22)),l.addColorStop(.55,A("#ffffff",0)),l.addColorStop(1,A("#000000",n===w.dark?.26:.14)),t.fillStyle=l,t.fillRect(-18,-18,i+36,r+36),t.globalAlpha=1,a&&s(null)}paintTintGlow(t,n,i,r,s,a){t.save();const l=s(`blur(${n===w.dark?22:24}px)`);t.globalAlpha=n===w.dark?.34:.26;const d=t.createRadialGradient(i*.28,r*.34,0,i*.28,r*.34,Math.max(i,r)*.85);d.addColorStop(0,A(a,.7)),d.addColorStop(1,A(a,0)),t.fillStyle=d,t.fillRect(-20,-20,i+40,r+40),t.globalAlpha=1,l&&s(null),t.restore()}paintEdge(t,n,i,r,s,a,l,d){const h=Math.max(a,l*.52);if(h<=.001)return;const g=d(`blur(${n===w.dark?8:9}px)`);t.save(),t.globalCompositeOperation="screen",t.globalAlpha=(n===w.dark?.12:.14)*h*(1-.12*a),t.lineWidth=2;const f=t.createLinearGradient(0,0,i,r);f.addColorStop(0,A("#ffffff",.9)),f.addColorStop(.38,A("#ffffff",.24)),f.addColorStop(1,A("#ffffff",0)),t.strokeStyle=f,t.beginPath(),ut(t,1,1,i-2,r-2,Math.max(1,s-1)),t.stroke(),t.restore(),g&&d(null)}paintEffects(t,n,i,r,s,a,l,d,h,g){const f=this.effect;if(!f)return;const c=l*.68*(1-.22*a),y={ctx:t,theme:n,width:i,height:r,radius:s,tint:this.tint,phase:this.phase,setFilter:g,activeT:a,hoverT:l},m=[];if(this.activeVariant==="rhythm"){const S=Math.max(0,Math.min(i,this.pressX)),v=Math.max(0,Math.min(r,this.pressY)),x=a>c*.6;m.push({strength:Math.max(c,a),x:x?S:d,y:x?v:h})}else c>.001&&m.push({strength:c,x:d,y:h}),a>.001&&m.push({strength:a,x:Math.max(0,Math.min(i,this.pressX)),y:Math.max(0,Math.min(r,this.pressY))});for(const S of m)f.paint({...y,...S})}paintTopHighlight(t,n,i,r,s){t.save(),t.globalCompositeOperation="screen";const a=t.createLinearGradient(0,0,i,r);a.addColorStop(0,A("#ffffff",(n===w.dark?.24:.38)+.12*s)),a.addColorStop(.42,A("#ffffff",.08+.08*s)),a.addColorStop(1,A("#ffffff",0)),t.fillStyle=a,t.fillRect(0,0,i,r),t.restore()}paintSpecks(t,n,i,r,s){const a=s(`blur(${n===w.dark?10:12}px)`);t.globalAlpha=n===w.dark?.22:.2;for(let l=0;l<4;l++){const d=i*(.24+l*.18),h=r*(.35+l%2*.22),g=r*(.72+l%3*.14),f=t.createRadialGradient(d,h,0,d,h,g);f.addColorStop(0,A("#ffffff",.22)),f.addColorStop(1,A("#ffffff",0)),t.fillStyle=f,t.beginPath(),t.arc(d,h,g,0,Math.PI*2),t.fill()}t.globalAlpha=1,a&&s(null)}paintBorder(t,n,i,r,s){t.strokeStyle=A("#ffffff",n===w.dark?.18:.4),t.lineWidth=1,t.beginPath(),ut(t,.5,.5,i-1,r-1,Math.max(1,s-.5)),t.stroke(),t.strokeStyle=A("#000000",n===w.dark?.4:.12),t.beginPath(),ut(t,.5,.5,i-1,r-1,Math.max(1,s-.5)),t.stroke()}paintGlyphTile(t,n,i,r,s){const a=Math.max(14,i*.2),l=Math.min(i-a,i*.72),d=a*.92,h=(i-l)/2,g=Math.min(l*.28,18);t.save(),t.shadowColor=A("#000000",(n===w.dark?.38:.16)*(1-.35*r)),t.shadowBlur=(n===w.dark?18:16)*(1-.45*r),t.shadowOffsetY=(n===w.dark?10:8)*(1-.55*r),t.beginPath(),ut(t,d,h,l,l,g);const f=t.createLinearGradient(d,h,d+l,h+l);f.addColorStop(0,A("#ffffff",(n===w.dark?.12:.52)+.08*r)),f.addColorStop(.6,A("#ffffff",(n===w.dark?.06:.28)+.06*r)),f.addColorStop(1,A("#ffffff",(n===w.dark?.08:.36)+.07*r)),t.fillStyle=f,t.fill(),t.restore(),t.save(),t.beginPath(),ut(t,d,h,l,l,g),t.clip();const c=s(`blur(${n===w.dark?16:18}px)`);t.globalAlpha=n===w.dark?.52:.42;const y=t.createRadialGradient(d+l*.3,h+l*.3,0,d+l*.3,h+l*.3,l*1.1);y.addColorStop(0,A(this.tint,.9)),y.addColorStop(1,A(this.tint,0)),t.fillStyle=y,t.fillRect(d-10,h-10,l+20,l+20),t.globalAlpha=1,c&&s(null),t.save(),t.globalCompositeOperation="screen";const m=t.createLinearGradient(d,h,d+l,h+l);m.addColorStop(0,A("#ffffff",n===w.dark?.34:.48)),m.addColorStop(.48,A("#ffffff",.12)),m.addColorStop(1,A("#ffffff",0)),t.fillStyle=m,t.fillRect(d,h,l,l),t.restore(),t.restore()}};u(Si,"GlassButtonPainter");let Tn=Si;const bi=class bi extends Pt{constructor(){super(...arguments);b(this,"btnW");b(this,"btnH");b(this,"theme");b(this,"text","按钮");b(this,"glyph","");b(this,"tint","#ffffff");b(this,"activeVariant","rim");b(this,"isPressed",!1);b(this,"activeTarget",0);b(this,"activeT",0);b(this,"hoverTarget",0);b(this,"hoverT",0);b(this,"phase",0);b(this,"lastTickAt",0);b(this,"pressX",0);b(this,"pressY",0);b(this,"hoverX",0);b(this,"hoverY",0);b(this,"removeTick");b(this,"musicSpectrum");b(this,"config");b(this,"effects");b(this,"customEffect");b(this,"painter");b(this,"userPointerDownCapture");b(this,"userPointerUpCapture");b(this,"userPointerMoveCapture");b(this,"userPointerEnterCapture");b(this,"userPointerLeaveCapture");b(this,"userPointerOutCapture");b(this,"onPointerEnterCapture",u(t=>{const n=this.userPointerEnterCapture;n&&n(t),this.hoverX=Number.isFinite(t.x)?t.x:this.hoverX,this.hoverY=Number.isFinite(t.y)?t.y:this.hoverY,this.hoverTarget=1,this.syncPainter(),this.ensureTicking(),this.markNeedsPaint()},"onPointerEnterCapture"));b(this,"onPointerDownCapture",u(t=>{const n=this.userPointerDownCapture;n&&n(t),this.isPressed=!0,this.pressX=Number.isFinite(t.x)?t.x:this.pressX,this.pressY=Number.isFinite(t.y)?t.y:this.pressY,this.hoverX=this.pressX,this.hoverY=this.pressY,this.activeTarget=1,this.hoverTarget=1,this.syncPainter(),this.ensureTicking(),this.markNeedsPaint()},"onPointerDownCapture"));b(this,"onPointerUpCapture",u(t=>{const n=this.userPointerUpCapture;n&&n(t),this.isPressed=!1,this.activeTarget=0,this.hoverX=Number.isFinite(t.x)?t.x:this.hoverX,this.hoverY=Number.isFinite(t.y)?t.y:this.hoverY,this.hoverTarget=1,this.syncPainter(),this.ensureTicking(),this.markNeedsPaint()},"onPointerUpCapture"));b(this,"onPointerMoveCapture",u(t=>{const n=this.userPointerMoveCapture;n&&n(t),this.hoverX=Number.isFinite(t.x)?t.x:this.hoverX,this.hoverY=Number.isFinite(t.y)?t.y:this.hoverY,this.isPressed||(this.hoverTarget=1),this.syncPainter(),this.ensureTicking(),this.markNeedsPaint()},"onPointerMoveCapture"));b(this,"onPointerLeaveCapture",u(t=>{const n=this.userPointerLeaveCapture;n&&n(t),!this.isPressed&&(this.activeTarget=0,this.hoverTarget=0,this.syncPainter(),this.ensureTicking(),this.markNeedsPaint())},"onPointerLeaveCapture"));b(this,"onPointerOutCapture",u(t=>{const n=this.userPointerOutCapture;n&&n(t),!this.isPressed&&(this.activeTarget=0,this.hoverTarget=0,this.syncPainter(),this.ensureTicking(),this.markNeedsPaint())},"onPointerOutCapture"))}createElement(t){this.btnW=typeof t.width=="number"?t.width:void 0,this.btnH=typeof t.height=="number"?t.height:void 0,this.theme=t.theme,this.text=typeof t.text=="string"&&t.text?t.text:this.text,this.glyph=typeof t.glyph=="string"?t.glyph:"",this.tint=typeof t.tint=="string"&&t.tint?t.tint:this.tint;const n=t.activeType,i=t.activeVariant,r=typeof n=="string"?n:i;this.activeVariant=r==="rim"||r==="wave"||r==="rhythm"||r==="prism"||r==="cyberpunk"||r==="frost"?r:this.activeVariant;const s=t.musicSpectrum;this.musicSpectrum=s instanceof Float32Array||Array.isArray(s)?s:void 0;const a=t.config??t.musicConfig;this.config=a&&typeof a=="object"?a:void 0,typeof t.cursor>"u"&&(t.cursor="pointer");const d=t.onPointerDownCapture;this.userPointerDownCapture=typeof d=="function"&&d!==this.onPointerDownCapture?d:void 0,t.onPointerDownCapture=this.onPointerDownCapture;const h=t.onPointerUpCapture;this.userPointerUpCapture=typeof h=="function"&&h!==this.onPointerUpCapture?h:void 0,t.onPointerUpCapture=this.onPointerUpCapture;const g=t.onPointerMoveCapture;this.userPointerMoveCapture=typeof g=="function"&&g!==this.onPointerMoveCapture?g:void 0,t.onPointerMoveCapture=this.onPointerMoveCapture;const f=t.onPointerEnterCapture;this.userPointerEnterCapture=typeof f=="function"&&f!==this.onPointerEnterCapture?f:void 0,t.onPointerEnterCapture=this.onPointerEnterCapture;const c=t.onPointerLeaveCapture;this.userPointerLeaveCapture=typeof c=="function"&&c!==this.onPointerLeaveCapture?c:void 0,t.onPointerLeaveCapture=this.onPointerLeaveCapture;const y=t.onPointerOutCapture;return this.userPointerOutCapture=typeof y=="function"&&y!==this.onPointerOutCapture?y:void 0,t.onPointerOutCapture=this.onPointerOutCapture,this.ensureEffects(),this.syncPainter(),super.createElement(t)}didUpdateWidget(){this.syncPainter(),this.markNeedsPaint()}dispose(){this.stopTicking(),this.disposeEffects(),super.dispose()}useEffect(t){typeof t=="string"?(this.customEffect=void 0,this.activeVariant=t):this.customEffect=t,this.syncPainter(),this.ensureTicking(),this.markNeedsPaint()}ensureTicking(){const t=this.runtime;t&&(this.removeTick||(this.removeTick=t.addTickListener(()=>{this.handleActiveTick()})),t.requestTick())}stopTicking(){this.removeTick&&(this.removeTick(),this.removeTick=void 0),this.lastTickAt=0}handleActiveTick(){const t=this.runtime;if(!t||this.isDisposed()){this.stopTicking();return}const n=performance.now(),i=this.lastTickAt>0?Math.max(0,Math.min(.05,(n-this.lastTickAt)/1e3)):0;if(this.lastTickAt=n,i>0){const d=1-Math.exp(-18*i);this.activeT+=(this.activeTarget-this.activeT)*d,this.hoverT+=(this.hoverTarget-this.hoverT)*d,this.phase+=i,this.updateEffects(i),this.syncPainter()}const r=this.activeTarget>.5||this.hoverTarget>.5,s=Math.abs(this.activeTarget-this.activeT),a=Math.abs(this.hoverTarget-this.hoverT),l=s>.002||a>.002;if(!r&&!l){this.activeT=this.activeTarget,this.hoverT=this.hoverTarget,this.stopTicking(),this.markNeedsPaint();return}this.markNeedsPaint(),t.requestTick()}syncPainter(){const t=this.painter;if(!t)return;const n=this.theme??w.light;t.setFrameState({theme:n,tint:this.tint,glyph:this.glyph,activeVariant:this.activeVariant,activeT:this.activeT,hoverT:this.hoverT,pressX:this.pressX,pressY:this.pressY,hoverX:this.hoverX,hoverY:this.hoverY,phase:this.phase,effect:this.getActiveEffect()})}ensureEffects(){this.effects||(this.effects={rim:lo(),wave:ks(),prism:ys(),rhythm:xs(),cyberpunk:ps(),frost:gs()})}disposeEffects(){var t;if(this.effects){for(const n of Object.keys(this.effects))(t=this.effects[n])==null||t.dispose();this.effects=void 0}this.customEffect&&(this.customEffect.dispose(),this.customEffect=void 0)}getEffectSeed(){return String(this.props.key??this.key??"")}getActiveEffect(){var n,i;if(this.customEffect)return this.customEffect;this.ensureEffects();const t=(n=this.effects)==null?void 0:n[this.activeVariant];return t||(((i=this.effects)==null?void 0:i.rim)??lo())}createEffectRuntimeContext(){const t=this.theme??w.light,{width:n,height:i}=this.renderObject.size;return{theme:t,width:n,height:i,tint:this.tint,phase:this.phase,activeT:this.activeT,hoverT:this.hoverT,musicSpectrum:this.musicSpectrum,config:this.config,seed:this.getEffectSeed()}}updateEffects(t){const n=this.getActiveEffect(),i=this.createEffectRuntimeContext();n.update(t,i)}computeButtonSize(t){const n=Number.isFinite(t.maxWidth)?t.maxWidth:420,i=Number.isFinite(t.maxHeight)?t.maxHeight:240,r=Number.isFinite(t.minWidth)?t.minWidth:0,s=Number.isFinite(t.minHeight)?t.minHeight:0,a=typeof this.btnW=="number"?this.btnW:240,l=typeof this.btnH=="number"?this.btnH:72,d=Math.max(r,Math.min(a,n)),h=Math.max(s,Math.min(l,i));return{width:d,height:h}}getConstraintsForChild(t){const n=this.computeButtonSize(t);return{minWidth:n.width,maxWidth:n.width,minHeight:n.height,maxHeight:n.height}}performLayout(t){return this.computeButtonSize(t)}render(){const t=this.theme??w.light,n=this.renderObject.constraints,i=n?this.computeButtonSize(n):{width:this.btnW??240,height:this.btnH??72},r=i.width,s=i.height,a=Math.max(14,s*.2),l=this.glyph?Math.min(s-a,s*.72):0,d=a*.92,h=(s-l)/2,g=this.glyph?d+l+a*.82:0,f=this.glyph?Math.max(0,r-g):r,c=Math.round(Math.min(18,Math.max(12,s*.24))),y=Math.round(l*.52);return $(vt,{alignment:pn.TopLeft,fit:mn.Expand,children:[p(Tn,{ref:u(m=>{this.painter=m||void 0,this.syncPainter()},"ref"),theme:t,tint:this.tint,glyph:this.glyph,activeVariant:this.activeVariant}),this.glyph?p(mt,{left:d,top:h,children:p(ve,{width:l,height:l,children:p(_,{text:this.glyph,fontSize:y,fontWeight:800,color:A(t.text.primary,t===w.dark?.92:.88),textAlign:Bt.Center,textAlignVertical:kt.Center,height:l})})}):null,p(mt,{left:this.glyph?g:0,top:0,children:p(ve,{width:f,height:s,children:p(_,{text:this.text,fontSize:c,fontWeight:750,color:A(t.text.primary,t===w.dark?.92:.9),textAlign:this.glyph?Bt.Left:Bt.Center,textAlignVertical:kt.Center,height:s})})})]})}};u(bi,"GlassButton");let An=bi;const co=[{text:"光环",glyph:"◉",tint:"#ffd45a",activeVariant:"rim",config:{hover:{bandWidth:2,blurDark:3,blurLight:4},active:{bandWidth:4,blurDark:6,blurLight:6}}},{text:"浪潮",glyph:"≈",tint:"#2ec5ff",activeVariant:"wave",config:{hover:{blurDark:16,blurLight:18,crestHeight:16,wavelength:140,speed:1.25,runupRatio:.62,foamCount:30,foamSize:3,foamJitter:10},active:{blurDark:16,blurLight:18,crestHeight:20,wavelength:140,speed:1.25,runupRatio:.62,foamCount:30,foamSize:3,foamJitter:10}}},{text:"音律",glyph:"⌁",tint:"#8f6bff",activeVariant:"rhythm",config:{hover:{barCount:18,barGap:1,padding:[8,18,12,72],minHeightRatio:.05,maxHeightRatio:.62,rise:26,fall:16,heightSlowdown:2.6,spectrumPower:.92,easing:"quintOut",glowBlurDark:16,glowBlurLight:18,barsBlurDark:4,barsBlurLight:6,particles:!1,barGradientStops:[{pos:0,color:"rgba(255,255,255,0.92)"},{pos:.55,color:"rgba(255,255,255,0.6)"},{pos:1,color:"rgba(143,107,255,0.42)"}]},active:{barCount:18,barGap:1,padding:[8,18,12,64],minHeightRatio:.05,maxHeightRatio:.82,rise:26,fall:16,heightSlowdown:2.6,spectrumPower:.92,easing:"quintOut",glowBlurDark:16,glowBlurLight:18,barsBlurDark:4,barsBlurLight:6,particles:!1,barGradientStops:[{pos:0,color:"rgba(255,255,255,0.92)"},{pos:.55,color:"rgba(255,255,255,0.6)"},{pos:1,color:"rgba(143,107,255,0.42)"}]}}},{text:"棱镜",glyph:"▤",tint:"#59d9cf",activeVariant:"prism",config:{hover:{outlineBlurDark:2.2,outlineBlurLight:2.6,bandBlurDark:12,bandBlurLight:14},active:{outlineBlurDark:2.2,outlineBlurLight:2.6,bandBlurDark:12,bandBlurLight:14}}},{text:"朋克",glyph:"⌗",tint:"#ff4bd9",activeVariant:"cyberpunk",config:{hover:{slices:8,sliceLineWidth:1.2,maxShift:6,dotCount:20,scanLineWidth:1,blurDark:1.2,blurLight:1},active:{slices:12,sliceLineWidth:1.4,maxShift:8,dotCount:40,scanLineWidth:1,blurDark:2.2,blurLight:2}}},{text:"霜冻",glyph:"❄",tint:"#b6d5ff",activeVariant:"frost",config:{hover:{crystalCount:24,maxCrystalRadius:12,edgeStrength:.8,blurDark:10,blurLight:12},active:{crystalCount:24,maxCrystalRadius:12,edgeStrength:.8,blurDark:10,blurLight:12}}}];var Z=(e=>(e.Sunny="sunny",e.Rainy="rainy",e.Snowy="snowy",e.Cloudy="cloudy",e.Stormy="stormy",e.Foggy="foggy",e))(Z||{}),gt=(e=>(e.Day="day",e.Night="night",e))(gt||{}),Y=(e=>(e.DaySunny="day_sunny",e.DayCloudy="day_cloudy",e.DayRainy="day_rainy",e.DayStormy="day_stormy",e.DaySnowy="day_snowy",e.DayFoggy="day_foggy",e.NightSunny="night_sunny",e.NightCloudy="night_cloudy",e.NightRainy="night_rainy",e.NightStormy="night_stormy",e.NightSnowy="night_snowy",e.NightFoggy="night_foggy",e))(Y||{});const Kt={[Y.DaySunny]:{bgTop:"#9dddf9",bgBottom:"#5aa7d9",highlight:"#e8fbff",textPrimary:"#ffffff",textSecondary:"#e3f5ff",textMuted:"#cfe9f6",accent:"#7ed0ff",iconStroke:"#2f4a5a"},[Y.DayRainy]:{bgTop:"#c9cdd2",bgBottom:"#8e949b",highlight:"#f1f3f5",textPrimary:"#1f2a33",textSecondary:"#2d3742",textMuted:"#6a747d",accent:"#9aa1a8",iconStroke:"#2c3136"},[Y.DaySnowy]:{bgTop:"#e6f2ff",bgBottom:"#89a4c8",highlight:"#f6fbff",textPrimary:"#ffffff",textSecondary:"#edf6ff",textMuted:"#d5e5f3",accent:"#c8e7ff",iconStroke:"#283a49"},[Y.DayCloudy]:{bgTop:"#d7e3ee",bgBottom:"#7ea0bf",highlight:"#f6fbff",textPrimary:"#ffffff",textSecondary:"#e9f2ff",textMuted:"#d0deeb",accent:"#a7c4dd",iconStroke:"#2b3b48"},[Y.DayStormy]:{bgTop:"#b8c1cc",bgBottom:"#4f5a66",highlight:"#f3f6fb",textPrimary:"#ffffff",textSecondary:"#e6edf7",textMuted:"#c9d3df",accent:"#9c8cff",iconStroke:"#1f2830"},[Y.DayFoggy]:{bgTop:"#edf2f7",bgBottom:"#a7b8c9",highlight:"#ffffff",textPrimary:"#1f2a33",textSecondary:"#2d3742",textMuted:"#6a747d",accent:"#d5dee8",iconStroke:"#27313a"},[Y.NightSunny]:{bgTop:"#142a4f",bgBottom:"#07152c",highlight:"#eaf2ff",textPrimary:"#ffffff",textSecondary:"#e3eeff",textMuted:"#b9cbe4",accent:"#7ea7ff",iconStroke:"#d8e8ff"},[Y.NightCloudy]:{bgTop:"#17263a",bgBottom:"#0b1220",highlight:"#eaf2ff",textPrimary:"#ffffff",textSecondary:"#e1edff",textMuted:"#b7c7de",accent:"#7ea7ff",iconStroke:"#d8e8ff"},[Y.NightRainy]:{bgTop:"#1b2a33",bgBottom:"#0b151b",highlight:"#e9f3ff",textPrimary:"#ffffff",textSecondary:"#e3eeff",textMuted:"#b9cbe4",accent:"#6b8aa6",iconStroke:"#d8e8ff"},[Y.NightStormy]:{bgTop:"#1d1d3a",bgBottom:"#0b0b1e",highlight:"#f1f1ff",textPrimary:"#ffffff",textSecondary:"#e8e8ff",textMuted:"#c5c5f0",accent:"#a48cff",iconStroke:"#f2edff"},[Y.NightSnowy]:{bgTop:"#12223a",bgBottom:"#071527",highlight:"#eff6ff",textPrimary:"#ffffff",textSecondary:"#e3eeff",textMuted:"#b9cbe4",accent:"#b9ddff",iconStroke:"#d8e8ff"},[Y.NightFoggy]:{bgTop:"#1a2430",bgBottom:"#0a111a",highlight:"#eef5ff",textPrimary:"#ffffff",textSecondary:"#e3eeff",textMuted:"#b9cbe4",accent:"#c2ceda",iconStroke:"#d8e8ff"}},De=[Z.Sunny,Z.Cloudy,Z.Rainy,Z.Stormy,Z.Snowy,Z.Foggy],ho={[gt.Day]:{[Z.Sunny]:Y.DaySunny,[Z.Cloudy]:Y.DayCloudy,[Z.Rainy]:Y.DayRainy,[Z.Stormy]:Y.DayStormy,[Z.Snowy]:Y.DaySnowy,[Z.Foggy]:Y.DayFoggy},[gt.Night]:{[Z.Sunny]:Y.NightSunny,[Z.Cloudy]:Y.NightCloudy,[Z.Rainy]:Y.NightRainy,[Z.Stormy]:Y.NightStormy,[Z.Snowy]:Y.NightSnowy,[Z.Foggy]:Y.NightFoggy}},Zt={[Y.DaySunny]:gt.Day,[Y.DayCloudy]:gt.Day,[Y.DayRainy]:gt.Day,[Y.DayStormy]:gt.Day,[Y.DaySnowy]:gt.Day,[Y.DayFoggy]:gt.Day,[Y.NightSunny]:gt.Night,[Y.NightCloudy]:gt.Night,[Y.NightRainy]:gt.Night,[Y.NightStormy]:gt.Night,[Y.NightSnowy]:gt.Night,[Y.NightFoggy]:gt.Night},Qt={[Y.DaySunny]:Z.Sunny,[Y.DayCloudy]:Z.Cloudy,[Y.DayRainy]:Z.Rainy,[Y.DayStormy]:Z.Stormy,[Y.DaySnowy]:Z.Snowy,[Y.DayFoggy]:Z.Foggy,[Y.NightSunny]:Z.Sunny,[Y.NightCloudy]:Z.Cloudy,[Y.NightRainy]:Z.Rainy,[Y.NightStormy]:Z.Stormy,[Y.NightSnowy]:Z.Snowy,[Y.NightFoggy]:Z.Foggy},Ms=[{max:.2,kind:Y.DaySunny},{max:.4,kind:Y.DayRainy},{max:.6,kind:Y.DaySnowy},{max:.8,kind:Y.NightSunny},{max:1,kind:Y.NightRainy}];function Rs(e){const o=Math.max(0,Math.min(1,e));for(const t of Ms)if(o<t.max)return t.kind;return Y.NightSunny}u(Rs,"initialAtmosphereFromMix");function uo(e,o){var t;return((t=ho[e])==null?void 0:t[o])??ho[gt.Day][Z.Sunny]}u(uo,"toAtmosphereKind");function Ts(e){return e===gt.Day?gt.Night:gt.Day}u(Ts,"toggleTimeOfDay");const As=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ps=["January","February","March","April","May","June","July","August","September","October","November","December"];function nt(e,o,t){return Math.max(o,Math.min(t,e))}u(nt,"clamp");function ye(e,o,t){return e+(o-e)*t}u(ye,"lerp");function Pn(e){const o=1-e;return 1-o*o*o}u(Pn,"easeOutCubic$1");function Se(e){const o=new Date(e.getTime());return o.setHours(0,0,0,0),o}u(Se,"startOfDay");function $t(e,o){const t=Se(e);return t.setDate(t.getDate()+o),t}u($t,"addDays");function be(e){const o=Math.PI*2;let t=e%o;return t<0&&(t+=o),t}u(be,"normalizeAngle");function Be(e,o){const t=Math.PI*2;let n=be(e)-be(o);return n>Math.PI&&(n-=t),n<-Math.PI&&(n+=t),n}u(Be,"shortestAngleDiff");function Eo(e){const o=e.replace("#","").trim();if(o.length===3){const n=parseInt(o[0]+o[0],16),i=parseInt(o[1]+o[1],16),r=parseInt(o[2]+o[2],16);return{r:n,g:i,b:r}}const t=parseInt(o,16);return{r:t>>16&255,g:t>>8&255,b:t&255}}u(Eo,"parseHex");function fo(e){const o=e.trim();if(o.startsWith("rgb(")){const t=o.match(/rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/);if(t)return{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}}if(o.startsWith("rgba(")){const t=o.match(/rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/);if(t)return{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}}return Eo(o)}u(fo,"parseColor");function Lt(e,o,t){const n=fo(e),i=fo(o),r=Math.round(ye(n.r,i.r,t)),s=Math.round(ye(n.g,i.g,t)),a=Math.round(ye(n.b,i.b,t));return`rgb(${r}, ${s}, ${a})`}u(Lt,"mixRgb");function lt(e,o){const t=e.trim();if(t.startsWith("rgba("))return t;if(t.startsWith("rgb(")){const i=t.match(/rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/);return i?`rgba(${i[1]}, ${i[2]}, ${i[3]}, ${o})`:t}const n=Eo(t);return`rgba(${n.r}, ${n.g}, ${n.b}, ${o})`}u(lt,"rgba");function Ls(e,o,t,n,i,r){const s=Math.max(1,e),a=Math.max(1,o),l=s*s+a*a,d=l>0?nt((t*s+n*a)/l,0,1):0;return Lt(i,r,d)}u(Ls,"sampleDiagonalGradientColor");const wi=class wi extends ae{constructor(t){super(t);b(this,"cardW");b(this,"cardH");b(this,"theme");b(this,"currentTime",Se(new Date).getTime());b(this,"atmosphereFrom",Y.DaySunny);b(this,"atmosphereTo",Y.DaySunny);b(this,"atmosphereT",0);b(this,"wheelRotation",0);b(this,"wheelRotationFrom",0);b(this,"wheelRotationTo",0);b(this,"wheelRotationStartTime",0);b(this,"wheelRotationRaf",null);b(this,"wheelRotationKey","");b(this,"wheelSpinOffset",0);b(this,"wheelSpinFrom",0);b(this,"wheelSpinTo",0);b(this,"wheelSpinStartTime",0);b(this,"wheelSpinRaf",null);b(this,"paletteKey","");b(this,"scaleKey","");b(this,"cachedPalette",null);b(this,"scaleCache",null);b(this,"timelineSegmentCount",21);b(this,"timelineStartTime",$t(new Date(this.currentTime),-10).getTime());b(this,"timelineSelectedIndex",10);b(this,"textLayer",null);b(this,"lensLayer",null);b(this,"wheelLayer",null);b(this,"grainCanvas",null);b(this,"grainKey","");this.isRepaintBoundary=!0}getVisualAngleStep(t){const n=Math.PI*2,i=t>0?n/t:n,{width:r,height:s}=this.renderObject.size;if(!Number.isFinite(r)||!Number.isFinite(s)||r<=0||s<=0)return i;const a=Math.min(26,s*.12),d=nt(24,a+6,r/2-1),h=Math.max(1,r-d*2),g=r*1.72,f=nt(h*.12,22,56),c=Math.max(1,h/2-6-f*.9),y=nt(c/g,0,.999999),m=Math.asin(y);return nt(m/(3+.08),.005,.22)}createElement(t){const n=this.timelineSegmentCount,i=this.timelineSelectedIndex,r=this.timelineStartTime;this.cardW=typeof t.width=="number"?t.width:void 0,this.cardH=typeof t.height=="number"?t.height:void 0,this.theme=t.theme;const s=typeof t.currentTime=="number"&&Number.isFinite(t.currentTime)?t.currentTime:this.currentTime;this.currentTime=Se(new Date(s)).getTime();const a=typeof t.timelineSegmentCount=="number"&&Number.isFinite(t.timelineSegmentCount)?Math.max(3,Math.floor(t.timelineSegmentCount)):this.timelineSegmentCount;this.timelineSegmentCount=a;const l=typeof t.timelineSelectedIndex=="number"&&Number.isFinite(t.timelineSelectedIndex)?Math.max(0,Math.min(a-1,Math.floor(t.timelineSelectedIndex))):this.timelineSelectedIndex;this.timelineSelectedIndex=l;const d=typeof t.timelineStartTime=="number"&&Number.isFinite(t.timelineStartTime)?Se(new Date(t.timelineStartTime)).getTime():this.timelineStartTime;this.timelineStartTime=d,this.atmosphereFrom=t.atmosphereFrom??this.atmosphereFrom,this.atmosphereTo=t.atmosphereTo??this.atmosphereTo;const h=typeof t.atmosphereT=="number"&&Number.isFinite(t.atmosphereT)?t.atmosphereT:this.atmosphereT;this.atmosphereT=nt(h,0,1);const g=24*60*60*1e3,f=r!==this.timelineStartTime?Math.round((this.timelineStartTime-r)/g):0;return f!==0&&i===this.timelineSelectedIndex&&n===this.timelineSegmentCount&&this.animateWheelSpin(f,this.timelineSegmentCount),super.createElement(t)}didUpdateWidget(t){const n=this.data;if(t.width!==n.width||t.height!==n.height){this.markNeedsLayout();return}t.theme!==n.theme&&(this.theme=n.theme,this.paletteKey="",this.cachedPalette=null),(t.currentTime!==n.currentTime||t.timelineStartTime!==n.timelineStartTime||t.timelineSelectedIndex!==n.timelineSelectedIndex||t.timelineSegmentCount!==n.timelineSegmentCount||t.atmosphereFrom!==n.atmosphereFrom||t.atmosphereTo!==n.atmosphereTo||t.atmosphereT!==n.atmosphereT)&&(this.scaleKey="",this.scaleCache=null,this.markNeedsPaint())}performLayout(t){const n=Number.isFinite(t.maxWidth)?t.maxWidth:560,i=Number.isFinite(t.maxHeight)?t.maxHeight:360,r=Number.isFinite(t.minWidth)?t.minWidth:0,s=Number.isFinite(t.minHeight)?t.minHeight:0,a=typeof this.cardW=="number"?this.cardW:Math.min(520,n),l=typeof this.cardH=="number"?this.cardH:Math.min(340,i),d=nt(a,r,n),h=nt(l,s,i);return{width:d,height:h}}getScale(){const t=["timeline",String(this.timelineStartTime),String(this.timelineSegmentCount),String(this.timelineSelectedIndex)].join(":");if(this.scaleCache&&this.scaleKey===t)return this.scaleCache;const n=this.timelineSegmentCount,i=new Array(n),r=new Array(n);for(let l=0;l<n;l++){const d=$t(new Date(this.timelineStartTime),l);i[l]=d.getDate(),r[l]=As[d.getDay()]??""}const s=nt(this.timelineSelectedIndex,0,n-1),a={segmentCount:n,selectedIndex:s,days:i,weekdays:r};return this.scaleKey=t,this.scaleCache=a,a}animateWheelRotationTo(t,n){const i=Date.now();this.wheelRotationKey=n,this.wheelRotationFrom=this.wheelRotation;const r=Be(t,this.wheelRotation);if(Math.abs(r)<1e-4){this.wheelRotationRaf!=null&&(cancelAnimationFrame(this.wheelRotationRaf),this.wheelRotationRaf=null),this.wheelRotation=t,this.markNeedsPaint();return}this.wheelRotationTo=this.wheelRotation+r,this.wheelRotationStartTime=i;const s=360;this.wheelRotationRaf!=null&&cancelAnimationFrame(this.wheelRotationRaf);const a=u(()=>{const l=Math.min(1,(Date.now()-this.wheelRotationStartTime)/s),d=Pn(l);this.wheelRotation=this.wheelRotationFrom+(this.wheelRotationTo-this.wheelRotationFrom)*d,this.markNeedsPaint(),l<1?this.wheelRotationRaf=requestAnimationFrame(a):this.wheelRotationRaf=null},"loop");this.wheelRotationRaf=requestAnimationFrame(a)}animateWheelSpin(t,n){const i=Date.now(),r=this.getVisualAngleStep(n);this.wheelSpinFrom=t*r,this.wheelSpinTo=0,this.wheelSpinStartTime=i;const s=320;this.wheelSpinRaf!=null&&cancelAnimationFrame(this.wheelSpinRaf);const a=u(()=>{const l=Math.min(1,(Date.now()-this.wheelSpinStartTime)/s),d=Pn(l);this.wheelSpinOffset=this.wheelSpinFrom+(this.wheelSpinTo-this.wheelSpinFrom)*d,this.markNeedsPaint(),l<1?this.wheelSpinRaf=requestAnimationFrame(a):this.wheelSpinRaf=null},"loop");this.wheelSpinRaf=requestAnimationFrame(a)}getPalette(t,n,i){const r=`${t}:${n}:${i.toFixed(3)}`;if(this.cachedPalette&&this.paletteKey===r)return this.cachedPalette;const s=Kt[t]??Kt[Y.DaySunny],a=Kt[n]??Kt[Y.DaySunny],l={bgTop:Lt(s.bgTop,a.bgTop,i),bgBottom:Lt(s.bgBottom,a.bgBottom,i),highlight:Lt(s.highlight,a.highlight,i),textPrimary:Lt(s.textPrimary,a.textPrimary,i),textSecondary:Lt(s.textSecondary,a.textSecondary,i),textMuted:Lt(s.textMuted,a.textMuted,i),accent:Lt(s.accent,a.accent,i),iconStroke:Lt(s.iconStroke,a.iconStroke,i)};return this.paletteKey=r,this.cachedPalette=l,l}ensureLayer(t,n,i,r){const s=Math.max(1,Math.round(i)),a=Math.max(1,Math.round(r)),l=t.canvas,d=l&&typeof l.width=="number"&&i>0?l.width/i:1,h=l&&typeof l.height=="number"&&r>0?l.height/r:d,g=nt(Math.min(d,h),1,4),f=Math.max(1,Math.round(s*g)),c=Math.max(1,Math.round(a*g));if(n&&n.canvas.width===f&&n.canvas.height===c)return n;const y=(()=>{const S=t.canvas,v=(S==null?void 0:S.ownerDocument)??(typeof document<"u"?document:null);return v?v.createElement("canvas"):null})();if(!y)return null;y.width=f,y.height=c;const m=y.getContext("2d");return m?(typeof m.setTransform=="function"?m.setTransform(g,0,0,g,0,0):m.scale(g,g),{canvas:y,ctx:m}):null}ensureGrainCanvas(t){const n=String(this.currentTime);if(this.grainCanvas&&this.grainKey===n)return this.grainCanvas;const i=(()=>{const h=t.canvas,g=(h==null?void 0:h.ownerDocument)??(typeof document<"u"?document:null);return g?g.createElement("canvas"):null})();if(!i)return null;const r=128;i.width=r,i.height=r;const s=i.getContext("2d");if(!s)return null;let a=(this.currentTime^2654435769)>>>0;const l=u(()=>(a^=a<<13>>>0,a^=a>>>17,a^=a<<5>>>0,(a>>>0)/4294967296),"rand"),d=s;if(typeof d.createImageData=="function"&&typeof d.putImageData=="function"){const h=d.createImageData(r,r),g=h.data;for(let f=0;f<r*r;f++){const c=f*4,y=l(),m=Math.floor(ye(40,220,y));g[c]=m,g[c+1]=m,g[c+2]=m,g[c+3]=255}d.putImageData(h,0,0)}else for(let h=0;h<r;h++)for(let g=0;g<r;g++){const f=l(),c=Math.floor(ye(40,220,f));s.fillStyle=`rgb(${c}, ${c}, ${c})`,s.fillRect(g,h,1,1)}return this.grainCanvas=i,this.grainKey=n,i}drawFilmGrain(t,n,i,r,s){const a=this.ensureGrainCanvas(t);if(!a)return;t.save(),t.globalCompositeOperation="overlay",t.globalAlpha=.05+.02*(1-s);const l=Math.sin(r)*10,d=Math.cos(r)*10,h=t;if(typeof h.createPattern=="function"){const g=h.createPattern(a,"repeat");g&&(t.translate(l,d),t.fillStyle=g,t.fillRect(-64,-64,n+128,i+128))}else{const g=a.width||128,f=-g+l%g,c=-g+d%g;for(let y=c;y<i+g;y+=g)for(let m=f;m<n+g;m+=g)t.drawImage(a,m,y)}t.restore()}applyViewportFade(t,n,i,r,s,a,l){const d=nt(a,0,r/2),h=nt(l,0,s/2);if(t.save(),t.globalCompositeOperation="destination-in",d>0){const g=t.createLinearGradient(n,0,n+r,0),f=d/r,c=1-d/r;g.addColorStop(0,lt("#000000",0)),g.addColorStop(f,lt("#000000",1)),g.addColorStop(c,lt("#000000",1)),g.addColorStop(1,lt("#000000",0)),t.fillStyle=g,t.fillRect(n,i,r,s)}else t.fillStyle=lt("#000000",1),t.fillRect(n,i,r,s);if(h>0){const g=t.createLinearGradient(0,i,0,i+s),f=h/s,c=1-h/s;g.addColorStop(0,lt("#000000",0)),g.addColorStop(f,lt("#000000",1)),g.addColorStop(c,lt("#000000",1)),g.addColorStop(1,lt("#000000",0)),t.fillStyle=g,t.fillRect(n,i,r,s)}t.restore()}drawBackground(t,n,i,r,s,a){t.beginPath(),t.moveTo(r,0),t.arcTo(n,0,n,i,r),t.arcTo(n,i,0,i,r),t.arcTo(0,i,0,0,r),t.arcTo(0,0,n,0,r),t.closePath(),t.clip();const l=t.createLinearGradient(0,0,n,i);l.addColorStop(0,s),l.addColorStop(1,a),t.fillStyle=l,t.fillRect(0,0,n,i);const d=t.createLinearGradient(0,0,0,i);d.addColorStop(0,lt("#ffffff",.26)),d.addColorStop(.6,lt("#ffffff",.08)),d.addColorStop(1,lt("#ffffff",.02)),t.fillStyle=d,t.fillRect(0,0,n,i)}drawBand(t,n,i,r,s,a,l,d,h,g){t.save(),t.lineCap="round",t.save();try{t.filter="blur(18px)"}catch{}t.strokeStyle=lt("#ffffff",.18),t.lineWidth=l+18,t.beginPath(),t.arc(r,s,a,d,h),t.stroke();try{t.filter="none"}catch{}t.restore();const f=t.createLinearGradient(0,i-40,n,i+40);f.addColorStop(0,lt("#ffffff",.07)),f.addColorStop(.5,lt("#ffffff",.2)),f.addColorStop(1,lt("#ffffff",.09)),t.strokeStyle=f,t.lineWidth=l,t.beginPath(),t.arc(r,s,a,d,h),t.stroke();const c=a*.52,y=.3,m=t.createRadialGradient(r+Math.cos(d)*a,s+Math.sin(d)*a,0,r+Math.cos(d)*a,s+Math.sin(d)*a,c);m.addColorStop(0,lt(g,.82)),m.addColorStop(1,lt(g,0)),t.strokeStyle=m,t.lineWidth=l+2,t.beginPath(),t.arc(r,s,a,d,d+y),t.stroke();const S=t.createRadialGradient(r+Math.cos(h)*a,s+Math.sin(h)*a,0,r+Math.cos(h)*a,s+Math.sin(h)*a,c);S.addColorStop(0,lt(g,.82)),S.addColorStop(1,lt(g,0)),t.strokeStyle=S,t.lineWidth=l+2,t.beginPath(),t.arc(r,s,a,h-y,h),t.stroke(),t.restore()}drawWheelTextLayer(t,n,i,r,s,a,l,d,h,g,f,c){const y=d.segmentCount,m=-Math.PI/2,S=this.getVisualAngleStep(y),v=be(a),x=be(l),T=.24,k=y>10,C=k?"700 15px sans-serif":"700 17px sans-serif",R=k?18:24;t.textAlign="center",t.textBaseline="middle";const M=(a+l)/2,L=S*3.4,I=d.selectedIndex,D=3;for(let H=0;H<y;H++){if(y>=D*2+1&&Math.abs(H-I)>D)continue;const F=m+H*S+h,j=be(F);if(j<v||j>x)continue;const V=Math.cos(F),O=Math.sin(F),W=n+V*r,N=i+O*r,X=Math.abs(Be(F,M))/S,K=nt(1-X*(k?.06:.14),.24,1),tt=Math.min((j-v)/T,(x-j)/T),G=nt(tt,0,1),ot=G*G*(3-2*G),rt=K*ot,dt=Math.abs(Be(F,M)),bt=nt(1-dt/L,0,1),ft=1+.24*(bt*bt*(3-2*bt)),Rt=Be(F,M)*.45,St=d.weekdays[H]??"",J=d.days[H]??H+1;c&&(t.fillStyle=lt(g,rt*.78),t.font=C,t.fillText(St,W,N-s*.96)),t.save(),t.translate(W,N+s*.02),t.rotate(Rt),t.scale(ft,ft),t.fillStyle=lt(f,rt*.92),t.font=`700 ${Math.round(R)}px sans-serif`,t.fillText(String(J),0,0),t.restore()}}drawMagnifier(t,n,i,r,s,a,l,d,h,g){const f=Math.PI*2;t.save();try{t.filter="blur(12px)"}catch{}t.fillStyle=lt(g,.46),t.beginPath(),t.arc(s,a,l+7,0,f),t.fill();try{t.filter="none"}catch{}t.restore(),t.save(),t.fillStyle=h,t.beginPath(),t.arc(s,a,l+2,0,f),t.fill(),t.save(),t.beginPath(),t.arc(s,a,l+1,0,f),t.clip(),t.translate(s,a),t.scale(d,d),t.translate(-s,-a),t.globalAlpha=.96,t.drawImage(n,0,0,i,r),t.restore(),t.strokeStyle=lt("#ffffff",.42),t.lineWidth=1,t.beginPath(),t.arc(s,a,l+2,0,f),t.stroke(),t.save(),t.globalCompositeOperation="screen",t.lineWidth=1,t.strokeStyle=lt("#ff4dd8",.14),t.beginPath(),t.arc(s-.45,a,l+2.2,0,f),t.stroke(),t.strokeStyle=lt("#2de2ff",.14),t.beginPath(),t.arc(s+.45,a,l+2.2,0,f),t.stroke(),t.restore(),t.restore()}paintSelf(t){var ot;const n=t.renderer,i=(ot=n.getRawInstance)==null?void 0:ot.call(n),r=this.theme??w.light,{width:s,height:a}=this.renderObject.size;if(!i||s<=0||a<=0){n.drawRect({x:0,y:0,width:s,height:a,fill:r.background.container,borderRadius:Math.min(26,a*.12)});return}const l=Math.min(26,a*.12),d=nt(this.atmosphereT,0,1),h=this.getPalette(this.atmosphereFrom,this.atmosphereTo,d),g=h.bgTop,f=h.bgBottom,c=h.textPrimary,y=h.textSecondary;i.save(),this.drawBackground(i,s,a,l,g,f);const m=this.getScale(),S=m.segmentCount,v=m.selectedIndex,x=s/2,T=s*1.72,k=nt(a*.1,32,32),C=a*.6+k,R=C+T,M=nt(a*.18,52,74)*1.2,L=Math.PI*1.04,I=Math.PI*1.96,D=(L+I)/2,H=x+Math.cos(D)*T,F=R+Math.sin(D)*T,j=nt(M*.38,18,26),V=F+M*.02,O=Ls(s,a,H,V,g,f),W=h.accent,N=this.getVisualAngleStep(S),X=-Math.PI/2,K=`${S}:${this.timelineStartTime}:${v}`,tt=D-(X+v*N);this.wheelRotationKey?this.wheelRotationKey!==K&&this.animateWheelRotationTo(tt,K):(this.wheelRotationKey=K,this.wheelRotation=tt);const G=this.wheelRotation+this.wheelSpinOffset;if(this.drawFilmGrain(i,s,a,G,d),this.textLayer=this.ensureLayer(i,this.textLayer,s,a),this.lensLayer=this.ensureLayer(i,this.lensLayer,s,a),this.wheelLayer=this.ensureLayer(i,this.wheelLayer,s,a),this.textLayer&&this.lensLayer&&this.wheelLayer){const dt=nt(24,l+6,s/2-1),bt=Math.max(1,s-dt*2),ft=nt(C-M*1.32,l+6,a-l-6),Rt=nt(M*2.24,120,a-ft-l-6),St=this.wheelLayer.ctx;St.clearRect(0,0,s,a),St.save(),St.beginPath(),St.rect(dt,ft,bt,Rt),St.clip(),this.drawBand(St,s,C,x,R,T,M,L,I,f);const J=this.textLayer.ctx;J.clearRect(0,0,s,a),this.drawWheelTextLayer(J,x,R,T,M,L,I,m,G,c,y,!0),St.drawImage(this.textLayer.canvas,0,0,s,a);const ht=this.lensLayer.ctx;ht.clearRect(0,0,s,a),this.drawWheelTextLayer(ht,x,R,T,M,L,I,m,G,"#ffffff","#ffffff",!1),this.drawMagnifier(St,this.lensLayer.canvas,s,a,H,V,j,1.55,O,W);const et=nt(bt*.12,22,56),pt=nt(Rt*.12,10,32);this.applyViewportFade(St,dt,ft,bt,Rt,et,pt),St.restore(),i.drawImage(this.wheelLayer.canvas,0,0,s,a)}else this.drawBand(i,s,C,x,R,T,M,L,I,f),this.drawWheelTextLayer(i,x,R,T,M,L,I,m,G,c,y,!0),i.fillStyle=O,i.beginPath(),i.arc(H,V,j+2,0,Math.PI*2),i.fill();i.restore()}dispose(){this.wheelRotationRaf!=null&&(cancelAnimationFrame(this.wheelRotationRaf),this.wheelRotationRaf=null),this.wheelSpinRaf!=null&&(cancelAnimationFrame(this.wheelSpinRaf),this.wheelSpinRaf=null),super.dispose()}};u(wi,"GlassCalendarCard");let Ln=wi;const Is=['<svg width="24" height="24" viewBox="0 0 24 24"',' fill="none" xmlns="http://www.w3.org/2000/svg">','<circle cx="12" cy="12" r="4.5" stroke="currentColor" stroke-width="2"/>','<path d="M12 2.8V5.2M12 18.8V21.2M2.8 12H5.2M18.8 12H21.2M4.6 4.6L6.3 6.3M17.7 17.7L19.4 19.4','M19.4 4.6L17.7 6.3M6.3 17.7L4.6 19.4" stroke="currentColor" stroke-width="2"',' stroke-linecap="round"/></svg>'].join(""),Fs=['<svg width="24" height="24" viewBox="0 0 24 24"',' fill="none" xmlns="http://www.w3.org/2000/svg">','<g transform="translate(-1 2)">','<path d="M7.6 12.6C6.2 12.6 5 11.5 5 10.1c0-1.2.8-2.2 1.9-2.5'," .3-2.3 2.3-4.1 4.8-4.1 2 0 3.7 1.1 4.5 2.7 .2 0 .4-.1",' .7-.1 1.8 0 3.2 1.4 3.2 3.2 0 1.8-1.4 3.2-3.2 3.2H7.6Z"',' fill="currentColor"/>','<path d="M9 14.6L7.8 17.2M13 14.6L11.8 17.2M17 14.6L15.8 17.2"',' stroke="currentColor" stroke-width="2" stroke-linecap="round"/>',"</g></svg>"].join(""),Ds=['<svg width="24" height="24" viewBox="0 0 24 24"',' fill="none" xmlns="http://www.w3.org/2000/svg">','<path d="M15.6 13.9c-3.2 0-5.8-2.6-5.8-5.8 0-1.5.6-2.9 1.5-4'," -3.6.9-6.3 4.1-6.3 8 0 4.6 3.7 8.3 8.3 8.3 3.9 0 7.1-2.7 8-6.3",' -1.1.9-2.5 1.5-4 1.5Z" fill="currentColor"/>','<path d="M18.8 5.2l.6 1.4 1.4.6-1.4.6-.6 1.4-.6-1.4-1.4-.6 1.4-.6.6-1.4Z"',' fill="currentColor" opacity="0.9"/>',"</svg>"].join(""),Bs=['<svg width="24" height="24" viewBox="0 0 24 24"',' fill="none" xmlns="http://www.w3.org/2000/svg">','<g transform="translate(-1 2)">','<path d="M7.2 14.4C5.4 14.4 4 13 4 11.2c0-1.5 1-2.7 2.4-3.1'," .5-2.8 2.9-4.9 5.9-4.9 2.3 0 4.4 1.2 5.4 3.1 .2 0 .5-.1 .8-.1",' 2.2 0 4 1.8 4 4s-1.8 4-4 4H7.2Z" fill="currentColor"/>',"</g></svg>"].join(""),zs=['<svg width="24" height="24" viewBox="0 0 24 24"',' fill="none" xmlns="http://www.w3.org/2000/svg">','<g transform="translate(-1 2)">','<path d="M7.2 12.8C5.4 12.8 4 11.4 4 9.6c0-1.5 1-2.7 2.4-3.1'," .5-2.8 2.9-4.9 5.9-4.9 2.3 0 4.4 1.2 5.4 3.1 .2 0 .5-.1 .8-.1",' 2.2 0 4 1.8 4 4 0 2.2-1.8 4-4 4H7.2Z" fill="currentColor"/>','<path d="M12.3 13.6l-2.2 4.2h2.4l-1.3 3.2 4.7-5.9h-2.6l1-1.5"',' fill="currentColor" opacity="0.95"/>',"</g></svg>"].join(""),Es=['<svg width="24" height="24" viewBox="0 0 24 24"',' fill="none" xmlns="http://www.w3.org/2000/svg">','<path d="M5 8.5h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>','<path d="M3.8 12h16.4" stroke="currentColor" stroke-width="2" ','stroke-linecap="round" opacity="0.9"/>','<path d="M5.6 15.5h12.8" stroke="currentColor" stroke-width="2" ','stroke-linecap="round" opacity="0.8"/>',"</svg>"].join(""),Ws=['<svg width="24" height="24" viewBox="0 0 24 24"',' fill="none" xmlns="http://www.w3.org/2000/svg">','<circle cx="12" cy="12" r="4.2" fill="currentColor" opacity="0.95"/>','<path d="M12 2.6V5.1M12 18.9V21.4M2.6 12H5.1M18.9 12H21.4M4.6 4.6L6.4 6.4','M17.6 17.6L19.4 19.4M19.4 4.6L17.6 6.4M6.4 17.6L4.6 19.4"',' stroke="currentColor" stroke-width="2" stroke-linecap="round" opacity="0.9"/>',"</svg>"].join(""),Hs=['<svg width="24" height="24" viewBox="0 0 24 24"',' fill="none" xmlns="http://www.w3.org/2000/svg">','<path d="M12 3.2v17.6M5 7l14 10M19 7L5 17" stroke="currentColor" stroke-width="2"',' stroke-linecap="round" stroke-linejoin="round"/>','<path d="M12 6.2l-1.3 1.3M12 6.2l1.3 1.3M8.2 9.4l-1.7.1M8.2 9.4l-.7-1.6"',' stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity="0.9"/>','<path d="M15.8 9.4l1.7.1M15.8 9.4l.7-1.6" stroke="currentColor" stroke-width="1.6"',' stroke-linecap="round" opacity="0.9"/>','<path d="M12 17.8l-1.3-1.3M12 17.8l1.3-1.3M8.2 14.6l-1.7-.1M8.2 14.6l-.7 1.6"',' stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity="0.9"/>','<path d="M15.8 14.6l1.7-.1M15.8 14.6l.7 1.6" stroke="currentColor" stroke-width="1.6"',' stroke-linecap="round" opacity="0.9"/>',"</svg>"].join(""),Os=['<svg width="24" height="24" viewBox="0 0 24 24"',' fill="none" xmlns="http://www.w3.org/2000/svg">','<path d="M14.5 6.5L9.5 12L14.5 17.5" stroke="currentColor" stroke-width="2.5"',' stroke-linecap="round" stroke-linejoin="round"/></svg>'].join(""),_s=['<svg width="24" height="24" viewBox="0 0 24 24"',' fill="none" xmlns="http://www.w3.org/2000/svg">','<path d="M9.5 6.5L14.5 12L9.5 17.5" stroke="currentColor" stroke-width="2.5"',' stroke-linecap="round" stroke-linejoin="round"/></svg>'].join(""),Ns={[Z.Sunny]:Is,[Z.Cloudy]:Bs,[Z.Rainy]:Fs,[Z.Stormy]:zs,[Z.Snowy]:Hs,[Z.Foggy]:Es},$s={[gt.Day]:Ws,[gt.Night]:Ds};function go(e){const o=typeof e.boxSize=="number"?e.boxSize:24;return p(B,{width:o,height:o,alignment:"center",pointerEvent:"none",children:p(re,{svg:Ns[e.kind],size:e.size,color:e.color})})}u(go,"WeatherIcon");function mo(e){const o=typeof e.boxSize=="number"?e.boxSize:24;return p(B,{width:o,height:o,alignment:"center",pointerEvent:"none",children:p(re,{svg:$s[e.kind],size:e.size,color:e.color})})}u(mo,"TimeOfDayIcon");const Ks=Os,Vs=_s,js=520,Ys=320,Gs="Today",po="#ffffff",yo={[Z.Sunny]:"#ffe79a",[Z.Cloudy]:"#e8eef4",[Z.Rainy]:"#dfe7ee",[Z.Stormy]:"#d8cfff",[Z.Snowy]:"#eaf7ff",[Z.Foggy]:"#f1f5f9"},So={[gt.Day]:"#ffe79a",[gt.Night]:"#ffe9a6"},vi=class vi extends Pt{constructor(){super(...arguments);b(this,"state",{timelineSegmentCount:21,timelineStartTime:$t(new Date,-10).getTime(),timelineSelectedIndex:10,timeOfDay:gt.Day,weatherKind:Z.Sunny,atmosphereFrom:Y.DaySunny,atmosphereTo:Y.DaySunny,atmosphereT:0,navHover:null,actionHover:null,actionDown:null});b(this,"weatherRaf",null);b(this,"weatherFromT",0);b(this,"weatherToT",0);b(this,"weatherStartTime",0);b(this,"handlePrevClick",u(t=>{var n;(n=t.stopPropagation)==null||n.call(t),this.moveSelection(-1)},"handlePrevClick"));b(this,"handleNextClick",u(t=>{var n;(n=t.stopPropagation)==null||n.call(t),this.moveSelection(1)},"handleNextClick"));b(this,"handleWeatherClick",u(t=>{var s;if((s=t.stopPropagation)==null||s.call(t),this.weatherRaf!=null)return;const n=De.indexOf(this.state.weatherKind),i=De[(n+1+De.length)%De.length]??Z.Sunny,r=uo(this.state.timeOfDay,i);this.animateAtmosphereTo(r)},"handleWeatherClick"));b(this,"handleTimeOfDayClick",u(t=>{var r;if((r=t.stopPropagation)==null||r.call(t),this.weatherRaf!=null)return;const n=Ts(this.state.timeOfDay),i=uo(n,this.state.weatherKind);this.animateAtmosphereTo(i)},"handleTimeOfDayClick"));b(this,"handleNavEnter",u(t=>{this.state.navHover!==t&&this.setState({navHover:t})},"handleNavEnter"));b(this,"handleNavLeave",u(()=>{this.state.navHover!==null&&this.setState({navHover:null})},"handleNavLeave"));b(this,"handleActionEnter",u(t=>{this.state.actionHover!==t&&this.setState({actionHover:t})},"handleActionEnter"));b(this,"handleActionLeave",u(t=>{(this.state.actionHover===t||this.state.actionDown===t)&&this.setState({actionHover:this.state.actionHover===t?null:this.state.actionHover,actionDown:this.state.actionDown===t?null:this.state.actionDown})},"handleActionLeave"));b(this,"handleActionDown",u(t=>{this.state.actionDown!==t&&this.setState({actionDown:t})},"handleActionDown"));b(this,"handleActionUp",u(t=>{this.state.actionDown===t&&this.setState({actionDown:null})},"handleActionUp"))}initWidget(t){const n=typeof t.timelineSegmentCount=="number"&&Number.isFinite(t.timelineSegmentCount)?Math.max(7,Math.floor(t.timelineSegmentCount)):this.state.timelineSegmentCount,i=Math.floor(n/2),r=Se(new Date),s=$t(r,-i).getTime(),a=typeof t.initialWeatherMix=="number"&&Number.isFinite(t.initialWeatherMix)?nt(t.initialWeatherMix,0,1):0,l=Rs(a),d=Zt[l]??gt.Day,h=Qt[l]??Z.Sunny;this.state={...this.state,timelineSegmentCount:n,timelineStartTime:s,timelineSelectedIndex:i,timeOfDay:d,weatherKind:h,atmosphereFrom:l,atmosphereTo:l,atmosphereT:0,navHover:null,actionHover:null,actionDown:null}}animateAtmosphereTo(t){this.weatherRaf!=null&&(cancelAnimationFrame(this.weatherRaf),this.weatherRaf=null);const n=this.state.atmosphereTo;this.setState({atmosphereFrom:n,atmosphereTo:t,atmosphereT:0}),this.weatherFromT=0,this.weatherToT=1,this.weatherStartTime=Date.now();const i=360,r=u(()=>{const s=nt((Date.now()-this.weatherStartTime)/i,0,1),a=Pn(s),l=this.weatherFromT+(this.weatherToT-this.weatherFromT)*a;if(s<1)this.setState({atmosphereT:l});else{const d=Zt[t]??this.state.timeOfDay,h=Qt[t]??this.state.weatherKind;this.setState({timeOfDay:d,weatherKind:h,atmosphereFrom:t,atmosphereTo:t,atmosphereT:0})}s<1?this.weatherRaf=requestAnimationFrame(r):this.weatherRaf=null},"loop");this.weatherRaf=requestAnimationFrame(r)}moveSelection(t){const n=this.state.timelineSegmentCount,i=Math.min(3,Math.max(0,Math.floor(n/2)-1));let r=this.state.timelineStartTime,s=this.state.timelineSelectedIndex+t;if(s<0?(r=$t(new Date(r),-1).getTime(),s=0):s>n-1&&(r=$t(new Date(r),1).getTime(),s=n-1),n>i*2+1){for(;s<i;)r=$t(new Date(r),-1).getTime(),s+=1;for(;s>n-1-i;)r=$t(new Date(r),1).getTime(),s-=1}this.setState({timelineStartTime:r,timelineSelectedIndex:s})}render(){const t=this.props.theme??w.light,n=typeof this.props.width=="number"?this.props.width:js,i=typeof this.props.height=="number"?this.props.height:Ys,r=this.state.atmosphereFrom,s=this.state.atmosphereTo,a=nt(this.state.atmosphereT,0,1),l=Kt[r]??Kt[Y.DaySunny],d=Kt[s]??Kt[Y.DaySunny],h=Lt(l.textPrimary,d.textPrimary,a),g=Lt(l.accent,d.accent,a),f=nt(Math.min(n,i)*.12,32,32),c=f,y=c,m=nt(i*.12,34,42),S=m/2,v=nt(f*.4,8,12),x=m*2+v,T=n-f-x,k=c,C=nt(m*.56,18,24),R=nt(i*.18,52,74),M=nt(n*.14,64,92),L=nt(i*.09,18,24),I=Math.max(R*1.2,L+nt(i*.1,26,42)),D=(i-I)/2,H=$t(new Date(this.state.timelineStartTime),this.state.timelineSelectedIndex),F=Ps[H.getMonth()]??`${H.getMonth()+1}`,j=H.getDate(),V=new Date,O=V.getFullYear()===H.getFullYear()&&V.getMonth()===H.getMonth()&&V.getDate()===H.getDate(),W=nt(i*.16,32,56),N=nt(i*.12,16,32),X=nt(i*.04,12,16),K=nt(i*.02,8,12),tt=nt(i*.015,6,10),G=X+tt*2,ot=nt(i*.02,6,10),rt=nt(i*.02,8,12),dt=this.state.navHover,bt=dt==="prev"?.75:.28,ft=dt==="next"?.75:.28,Rt=this.state.actionHover,St=this.state.actionDown,J=u(et=>St===et?.28:Rt===et?.22:.18,"getActionBgAlpha"),ht=u(et=>St===et?.5:Rt===et?.42:.34,"getActionBorderAlpha");return p(B,{width:n,height:i,color:"transparent",children:$(vt,{children:[p(Ln,{width:n,height:i,theme:t,timelineStartTime:this.state.timelineStartTime,timelineSegmentCount:this.state.timelineSegmentCount,timelineSelectedIndex:this.state.timelineSelectedIndex,atmosphereFrom:r,atmosphereTo:s,atmosphereT:a},"glass-calendar-effects"),p(mt,{left:f,top:y,children:$(Q,{spacing:ot,mainAxisSize:it.Min,crossAxisAlignment:U.Start,children:[p(_,{text:F,fontSize:W,fontWeight:700,color:h}),$(at,{spacing:rt,mainAxisSize:it.Min,crossAxisAlignment:U.Center,children:[p(_,{text:String(j),fontSize:N,fontWeight:700,color:h}),O?p(B,{padding:{left:K,right:K,top:tt,bottom:tt},height:G,color:A(po,.18),border:{width:1,color:A(po,.42)},borderRadius:999,children:p(_,{text:Gs,fontSize:X,fontWeight:700,color:A(h,.92),textAlignVertical:kt.Center,pointerEvent:"none"})}):null]})]})},"glass-calendar-title"),p(mt,{left:T,top:k,width:x,height:m,children:$(at,{spacing:v,mainAxisSize:it.Min,crossAxisAlignment:U.Center,children:[p(B,{width:m,height:m,borderRadius:S,color:A(g,J("timeOfDay")),border:{width:1,color:A(g,ht("timeOfDay"))},cursor:"pointer",onPointerEnter:u(()=>this.handleActionEnter("timeOfDay"),"onPointerEnter"),onPointerLeave:u(()=>this.handleActionLeave("timeOfDay"),"onPointerLeave"),onPointerDown:u(et=>{var pt;(pt=et.stopPropagation)==null||pt.call(et),this.handleActionDown("timeOfDay"),this.handleTimeOfDayClick(et)},"onPointerDown"),onPointerUp:u(()=>this.handleActionUp("timeOfDay"),"onPointerUp"),children:$(vt,{children:[p(mt,{left:0,top:0,width:m,height:m,children:p(B,{width:m,height:m,alignment:"center",pointerEvent:"none",children:p(mo,{kind:Zt[r],size:C,color:lt(So[Zt[r]],1-a)})})}),p(mt,{left:0,top:0,width:m,height:m,children:p(B,{width:m,height:m,alignment:"center",pointerEvent:"none",children:p(mo,{kind:Zt[s],size:C,color:lt(So[Zt[s]],a)})})})]},"time-icon-stack")}),p(B,{width:m,height:m,borderRadius:S,color:A(g,J("weather")),border:{width:1,color:A(g,ht("weather"))},cursor:"pointer",onPointerEnter:u(()=>this.handleActionEnter("weather"),"onPointerEnter"),onPointerLeave:u(()=>this.handleActionLeave("weather"),"onPointerLeave"),onPointerDown:u(et=>{var pt;(pt=et.stopPropagation)==null||pt.call(et),this.handleActionDown("weather"),this.handleWeatherClick(et)},"onPointerDown"),onPointerUp:u(()=>this.handleActionUp("weather"),"onPointerUp"),children:$(vt,{children:[p(mt,{left:0,top:0,width:m,height:m,children:p(B,{width:m,height:m,alignment:"center",pointerEvent:"none",children:p(go,{kind:Qt[r],size:C,color:lt(yo[Qt[r]],1-a)})})}),p(mt,{left:0,top:0,width:m,height:m,children:p(B,{width:m,height:m,alignment:"center",pointerEvent:"none",children:p(go,{kind:Qt[s],size:C,color:lt(yo[Qt[s]],a)})})})]},"weather-icon-stack")})]})},"glass-calendar-actions"),p(mt,{left:0,top:D,width:M,height:I,children:p(B,{width:M,height:I,color:"transparent",cursor:"pointer",alignment:"center",onPointerEnter:u(()=>this.handleNavEnter("prev"),"onPointerEnter"),onPointerLeave:this.handleNavLeave,onClick:this.handlePrevClick,children:p(re,{svg:Ks,size:L,color:A(h,bt),pointerEvent:"none"})})},"glass-calendar-prev"),p(mt,{left:n-M,top:D,width:M,height:I,children:p(B,{width:M,height:I,color:"transparent",cursor:"pointer",alignment:"center",onPointerEnter:u(()=>this.handleNavEnter("next"),"onPointerEnter"),onPointerLeave:this.handleNavLeave,onClick:this.handleNextClick,children:p(re,{svg:Vs,size:L,color:A(h,ft),pointerEvent:"none"})})},"glass-calendar-next")]},"glass-calendar-stack")},"glass-calendar")}dispose(){this.weatherRaf!=null&&(cancelAnimationFrame(this.weatherRaf),this.weatherRaf=null),super.dispose()}};u(vi,"GlassCalendar");let In=vi;const bo=new Map,z=u((e,o)=>{if(globalThis.__INKWELL_DISABLE_APPLY_ALPHA_CACHE__===!0)return A(e,o);const n=(e||"").trim(),i=o<=0?0:o>=1?1:o,r=i*1e3+.5|0;if(r===1e3&&n&&(n[0]==="#"&&(n.length===4||n.length===7)||n.startsWith("rgb(")))return n;let s=bo.get(n);s||(s=[],bo.set(n,s));const a=s[r];if(a!==void 0)return a;const l=A(n,i);return s[r]=l,l},"applyAlpha"),Xs=u(e=>e<=0?0:e>=1?1:e,"clamp01$3"),Us=u((e,o,t,n,i,r,s)=>{e.clearRect(0,0,t,n),e.beginPath(),ut(e,0,0,t,n,i),e.save(),e.shadowColor=z("#000000",o===w.dark?.6:.18),e.shadowBlur=o===w.dark?26:20,e.shadowOffsetY=o===w.dark?12:10;const a=e.createLinearGradient(0,0,t,n);o===w.dark?(a.addColorStop(0,z("#202431",.96)),a.addColorStop(.55,z(r,.92)),a.addColorStop(1,z("#101219",.96))):(a.addColorStop(0,z("#ffffff",.98)),a.addColorStop(.55,z("#f7f8fb",.96)),a.addColorStop(1,z("#ffffff",.98))),e.fillStyle=a,e.fill(),e.restore(),e.strokeStyle=s,e.lineWidth=1,e.stroke()},"paintCardBase"),qs=u((e,o,t,n)=>{e.beginPath(),ut(e,0,0,o,t,n),e.clip()},"clipRoundedRect"),Js=u((e,o,t,n)=>{e.save(),e.globalCompositeOperation="source-atop";const i=e.createLinearGradient(0,0,t,n);i.addColorStop(0,z("#ffffff",o===w.dark?.06:.12)),i.addColorStop(.35,z("#ffffff",0)),i.addColorStop(1,z("#ffffff",0)),e.fillStyle=i,e.fillRect(0,0,t,n),e.restore()},"paintCardGlare"),Je=u(e=>e.filter,"readCanvasFilter"),Mt=u((e,o,t)=>typeof o!="string"?!1:(e.filter=t===null?o:t,!0),"setCanvasFilter"),Zs=u((e,o,t,n,i,r,s,a)=>{e.save(),e.shadowColor=z("#000000",o===w.dark?.22:.1),e.shadowBlur=o===w.dark?26:24,e.shadowOffsetY=o===w.dark?16:14,e.fillStyle=o===w.dark?z("#0f1118",.75):z("#ffffff",.98),e.beginPath(),e.arc(n,i,r,0,a),e.fill(),e.restore(),e.save(),e.beginPath(),e.arc(n,i,r,0,a),e.clip();const l=Mt(e,t,`blur(${o===w.dark?22:20}px)`);e.globalCompositeOperation="source-atop";const d=e.createRadialGradient(n,i,r*.55,n,i,r*1.05);d.addColorStop(0,z("#000000",0)),d.addColorStop(.8,z("#000000",o===w.dark?.1:.06)),d.addColorStop(1,z("#000000",o===w.dark?.14:.1)),e.fillStyle=d,e.fillRect(n-r*1.2,i-r*1.2,r*2.4,r*2.4),l&&Mt(e,t,null),e.restore(),e.save(),e.beginPath(),e.arc(n,i,r,0,a),e.clip();const h=e.createRadialGradient(n-r*.25,i-r*.3,0,n-r*.25,i-r*.3,r*1.2);h.addColorStop(0,z("#ffffff",o===w.dark?.08:.22)),h.addColorStop(.6,z("#ffffff",0)),h.addColorStop(1,z("#ffffff",0)),e.fillStyle=h,e.fillRect(n-r*1.2,i-r*1.2,r*2.4,r*2.4),e.restore(),e.save(),e.beginPath(),e.arc(n,i,r,0,a),e.clip();const g=Mt(e,t,`blur(${o===w.dark?24:22}px)`);e.globalCompositeOperation="source-atop",e.globalAlpha=o===w.dark?.16:.1,e.strokeStyle=z("#000000",1),e.lineWidth=s*.58,e.beginPath(),e.arc(n,i,r+s*.05,0,a),e.stroke(),e.globalAlpha=1,g&&Mt(e,t,null),e.restore()},"paintCenterDisk"),Wo=u((e,o,t,n,i,r)=>{e.beginPath(),e.arc(o,t,i,0,r),e.arc(o,t,n,0,r,!0);try{e.clip("evenodd")}catch{e.clip()}},"clipAnnulus"),Qs=u((e,o,t,n,i,r,s,a)=>{const l=e.createRadialGradient(t,n,i*.78,t,n,r*1.02);o===w.dark?(l.addColorStop(0,z("#1a1e28",.85)),l.addColorStop(.52,z("#121521",.9)),l.addColorStop(1,z("#070912",.92))):(l.addColorStop(0,z("#fdfefe",1)),l.addColorStop(.55,z("#e8eef6",1)),l.addColorStop(1,z("#b6c1cc",.95))),e.fillStyle=l,e.fillRect(t-r*1.1,n-r*1.1,r*2.2,r*2.2)},"paintGrooveBase"),ta=u((e,o,t,n,i,r,s,a)=>{const l=e.createRadialGradient(n+r*.3,i-r*.34,r*.2,n,i,r*1.2);l.addColorStop(0,z("#ffffff",o===w.dark?.12:.42)),l.addColorStop(.55,z("#ffffff",0)),l.addColorStop(1,z("#000000",o===w.dark?.24:.16)),e.globalAlpha=o===w.dark?.78:.72;const d=Mt(e,t,`blur(${o===w.dark?12:14}px)`);e.fillStyle=l,e.fillRect(n-r*1.1,i-r*1.1,r*2.2,r*2.2),d&&Mt(e,t,null),e.globalAlpha=1},"paintGrooveDepth"),ea=u((e,o,t,n,i,r,s,a)=>{e.save();const l=Mt(e,t,`blur(${o===w.dark?22:20}px)`);e.lineCap="round",e.globalAlpha=o===w.dark?.2:.12,e.strokeStyle=z("#000000",1),e.lineWidth=s*.34,e.beginPath(),e.arc(n,i,r+s*.14,0,a),e.stroke(),e.globalAlpha=1,l&&Mt(e,t,null),e.restore()},"paintGrooveAO"),na=u((e,o,t,n,i,r,s)=>{e.strokeStyle=o===w.dark?z("#ffffff",.08):z("#ffffff",.22),e.lineWidth=1,e.beginPath(),e.arc(t,n,i+.5,0,s),e.stroke(),e.strokeStyle=o===w.dark?z("#000000",.42):z("#000000",.12),e.beginPath(),e.arc(t,n,r-.5,0,s),e.stroke()},"paintGrooveStructureLines"),ia=u((e,o,t,n,i,r,s,a,l,d)=>{e.save();const h=Mt(e,t,`blur(${Math.max(26,a*1.55)}px)`);e.globalAlpha=o===w.dark?.09:.08,e.strokeStyle=z("#2eea68",1),e.lineWidth=s*1.55,e.lineCap="round",e.translate(-a*.08,a*.03),e.beginPath(),e.arc(n,i,r-s*.02,l,d),e.stroke(),e.globalAlpha=1,h&&Mt(e,t,null),e.restore(),e.save();const g=Mt(e,t,`blur(${Math.max(14,a*.82)}px)`);e.globalAlpha=o===w.dark?.14:.08,e.strokeStyle=z("#000000",1),e.lineWidth=a*1.12,e.lineCap="round",e.translate(-a*.14,a*.06),e.beginPath(),e.arc(n,i,r+a*.06,l,d),e.stroke(),e.globalAlpha=1,g&&Mt(e,t,null),e.restore();const f=o===w.dark?z("#7cff9d",.12):z("#6dff95",.14),c=o===w.dark?z("#29ea66",.18):z("#21e35e",.16);e.save();const y=Mt(e,t,`blur(${Math.max(22,a*1.28)}px)`);e.lineCap="round",e.globalAlpha=o===w.dark?.14:.1,e.strokeStyle=f,e.lineWidth=a*2.35,e.beginPath(),e.arc(n,i,r,l,d),e.stroke(),e.globalAlpha=o===w.dark?.12:.08,e.strokeStyle=c,e.lineWidth=a*1.85,e.beginPath(),e.arc(n,i,r,l,d),e.stroke(),e.globalAlpha=1,y&&Mt(e,t,null),e.restore()},"paintProgressAtmosphere"),Ho=u((e,o,t,n,i,r)=>{const s=e.createRadialGradient(t,n,Math.max(1,i-r*.72),t,n,i+r*.72);return s.addColorStop(0,z("#0e7f33",0)),s.addColorStop(.08,z("#0e7f33",o===w.dark?.62:.58)),s.addColorStop(.12,z("#0e7f33",o===w.dark?.78:.74)),s.addColorStop(.16,z("#0e7f33",o===w.dark?.86:.82)),s.addColorStop(.2,z("#0e7f33",o===w.dark?.9:.86)),s.addColorStop(.25,z("#0f8f3a",o===w.dark?.92:.9)),s.addColorStop(.3,z("#11a343",o===w.dark?.96:.94)),s.addColorStop(.36,z("#11a343",o===w.dark?.97:.95)),s.addColorStop(.42,z("#11a343",o===w.dark?.98:.96)),s.addColorStop(.48,z("#14b34b",o===w.dark?.99:.98)),s.addColorStop(.52,z("#18c255",1)),s.addColorStop(.56,z(o===w.dark?"#1fda5e":"#1fd45b",o===w.dark?.99:.97)),s.addColorStop(.6,z(o===w.dark?"#2eea68":"#25e061",o===w.dark?.97:.95)),s.addColorStop(.64,z(o===w.dark?"#2eea68":"#25e061",o===w.dark?.95:.93)),s.addColorStop(.7,z(o===w.dark?"#2eea68":"#25e061",o===w.dark?.92:.9)),s.addColorStop(.74,z(o===w.dark?"#2eea68":"#25e061",o===w.dark?.9:.88)),s.addColorStop(.79,z(o===w.dark?"#46ff82":"#4dff88",o===w.dark?.84:.8)),s.addColorStop(.84,z(o===w.dark?"#60ff94":"#72ffa2",o===w.dark?.76:.72)),s.addColorStop(.9,z(o===w.dark?"#c7ffd9":"#dcffe7",o===w.dark?.3:.24)),s.addColorStop(.92,z(o===w.dark?"#d9ffe7":"#ecfff3",o===w.dark?.22:.18)),s.addColorStop(.97,z(o===w.dark?"#d9ffe7":"#ecfff3",o===w.dark?.12:.1)),s.addColorStop(1,z(o===w.dark?"#d9ffe7":"#ecfff3",0)),s},"createProgressBodyGradient"),oa=u((e,o,t,n,i,r)=>{const s=e.createRadialGradient(t,n,Math.max(1,i-r*.65),t,n,i+r*.66);return s.addColorStop(0,z("#0e7f33",0)),s.addColorStop(.12,z("#0e7f33",o===w.dark?.62:.58)),s.addColorStop(.16,z("#0e7f33",o===w.dark?.72:.68)),s.addColorStop(.22,z("#0e7f33",o===w.dark?.8:.76)),s.addColorStop(.28,z("#0e7f33",o===w.dark?.86:.82)),s.addColorStop(.34,z("#0f8f3a",o===w.dark?.9:.86)),s.addColorStop(.4,z("#11a343",o===w.dark?.95:.93)),s.addColorStop(.48,z("#14b34b",o===w.dark?.98:.96)),s.addColorStop(.54,z("#18c255",1)),s.addColorStop(.62,z(o===w.dark?"#2eea68":"#25e061",o===w.dark?.95:.93)),s.addColorStop(.68,z(o===w.dark?"#2eea68":"#25e061",o===w.dark?.92:.9)),s.addColorStop(.74,z(o===w.dark?"#46ff82":"#4dff88",o===w.dark?.86:.82)),s.addColorStop(.8,z(o===w.dark?"#60ff94":"#72ffa2",o===w.dark?.74:.7)),s.addColorStop(.9,z(o===w.dark?"#d9ffe7":"#ecfff3",o===w.dark?.16:.12)),s.addColorStop(1,z(o===w.dark?"#d9ffe7":"#ecfff3",0)),s},"createProgressVolumeGradient"),se=u((e,o,t,n,i,r)=>{e.beginPath(),e.arc(o,t,n,i,r),e.stroke()},"strokeProgressArc"),ra=u((e,o,t,n,i,r,s,a)=>{const l=Ho(e,o,t,n,i,r);e.save(),e.strokeStyle=l,e.lineWidth=r*1.06,e.lineCap="round",se(e,t,n,i,s,a),e.restore()},"paintProgressBody"),sa=u((e,o,t,n,i,r,s,a)=>{const l=oa(e,o,t,n,i,r),d=Je(e);typeof d=="string"&&(e.filter="blur(1.6px)",e.globalAlpha=o===w.dark?.42:.38,e.strokeStyle=l,e.lineWidth=r*1.08,e.lineCap="round",se(e,t,n,i,s,a),e.filter=d,e.globalAlpha=1),e.strokeStyle=l,e.lineWidth=r*.98,e.lineCap="round",se(e,t,n,i,s,a)},"paintProgressVolume"),aa=u((e,o,t,n,i,r,s,a)=>{e.save(),e.globalCompositeOperation="lighter";const l=e.createRadialGradient(t,n,Math.max(1,i-r*.38),t,n,i+r*.7);l.addColorStop(0,z("#ffffff",0)),l.addColorStop(.48,z("#ffffff",o===w.dark?.12:.18)),l.addColorStop(.62,z("#ffffff",o===w.dark?.18:.24)),l.addColorStop(.74,z("#bfffd4",o===w.dark?.1:.12)),l.addColorStop(.88,z("#ffffff",o===w.dark?.06:.08)),l.addColorStop(1,z("#ffffff",0)),e.strokeStyle=l,e.lineWidth=r*.42,se(e,t,n,i+r*.18,s,a),e.restore()},"paintProgressStrip"),la=u((e,o,t,n,i,r,s,a)=>{e.save();const l=Je(e);typeof l=="string"&&(e.filter="blur(0.9px)"),e.globalCompositeOperation="lighter",e.globalAlpha=o===w.dark?.55:.48,e.strokeStyle=z("#ffffff",1),e.lineWidth=r*.16,e.lineCap="round",se(e,t,n,i+r*.44,s,a),e.globalAlpha=1,typeof l=="string"&&(e.filter=l),e.restore()},"paintProgressFineHighlight"),ca=u((e,o,t,n,i,r,s,a)=>{e.save(),e.globalCompositeOperation="multiply",e.globalAlpha=o===w.dark?.16:.12,e.strokeStyle="#000000",e.lineWidth=r*.32,e.lineCap="round",se(e,t,n,i-r*.22,s,a),e.globalAlpha=1,e.restore()},"paintProgressInnerShadow"),ha=u((e,o,t,n,i,r,s,a)=>{e.save(),e.globalCompositeOperation="destination-out";const l=u(d=>{const h=o+Math.cos(d)*n,g=t+Math.sin(d)*n,f=e.createRadialGradient(h,g,0,h,g,i);f.addColorStop(0,z("#000000",.78)),f.addColorStop(.55,z("#000000",.28)),f.addColorStop(1,z("#000000",0)),e.fillStyle=f,e.beginPath(),e.arc(h,g,i,0,r),e.fill()},"featherOne");l(s),l(a),e.restore()},"cutProgressFeatherEnds"),da=u((e,o,t,n,i,r,s,a,l,d,h,g,f,c)=>{e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,f,c),Wo(e,t,n,r,s,d),ra(e,o,t,n,i,a,h,g),sa(e,o,t,n,i,a,h,g),aa(e,o,t,n,i,a,h,g),la(e,o,t,n,i,a,h,g),ca(e,o,t,n,i,a,h,g),ha(e,t,n,i,l,d,h,g),e.restore()},"paintProgressOnScratch"),ua=u((e,o,t,n,i,r,s,a)=>{const l=Ho(e,o,t,n,i,r*.82);e.save(),e.lineCap="round",e.strokeStyle=l,e.lineWidth=r,e.beginPath(),e.arc(t,n,i,s,a),e.stroke(),e.restore()},"paintProgressFallback"),fa=u((e,o,t,n)=>{var d;const i=Math.max(1,Math.round(t)),r=Math.max(1,Math.round(n));if(e&&e.w===i&&e.h===r)return e;const s=globalThis;let a=null;if(typeof s.OffscreenCanvas=="function")a=new s.OffscreenCanvas(i,r);else{const h=o.constructor;if(typeof h=="function")try{a=new h(i,r)}catch{a=null}!a&&typeof((d=s.document)==null?void 0:d.createElement)=="function"&&(a=s.document.createElement("canvas"),a.width=i,a.height=r)}if(!a)return null;a.width=i,a.height=r;const l=a.getContext("2d");return l?{canvas:a,ctx:l,w:i,h:r}:null},"ensureScratchCanvas"),xi=class xi extends ae{performLayout(o){const t=Number.isFinite(o.maxWidth)?o.maxWidth:420,n=Number.isFinite(o.maxHeight)?o.maxHeight:520,i=Number.isFinite(o.minWidth)?o.minWidth:0,r=Number.isFinite(o.minHeight)?o.minHeight:0,s=Math.max(i,Math.min(t,o.maxWidth)),a=Math.max(r,Math.min(n,o.maxHeight));return{width:s,height:a}}didUpdateWidget(){this.markNeedsPaint()}paintFallbackRect(o,t,n,i){o.drawRect({x:0,y:0,width:n,height:i,fill:t.background.container,borderRadius:24})}computePaintParams(o,t,n,i){const r=Math.min(28,Math.min(t,n)*.08),s=o===w.dark?"#171a20":"#ffffff",a=z(o.text.primary,o===w.dark?.18:.08),l=t/2,d=n*.49,h=Math.min(t,n)*.335,g=Math.max(22,Math.min(44,h*.32)),f=Math.PI*2,c=-Math.PI/2,y=Xs(i),m=h+g*.5,S=Math.max(1,h-g*.5),v=Math.max(1,S-Math.max(10,g*.2));return{r,bg:s,border:a,cx:l,cy:d,ringR:h,ringW:g,tau:f,startA:c,p:y,outerR:m,innerR:S,diskR:v}}paintBackgroundLayer(o,t,n,i,r,s,a,l,d,h,g,f,c){o.save(),Us(o,t,n,i,r,s,a),o.save(),qs(o,n,i,r),Js(o,t,n,i),Zs(o,t,l,d,h,g,f,c),o.restore(),o.restore()}paintGridLayer(o,t,n,i,r,s,a,l,d,h,g){o.save(),o.lineCap="round",o.lineJoin="round",o.save(),Wo(o,s,a,l,d,g),Qs(o,t,s,a,l,d),ta(o,t,r,s,a,d),ea(o,t,r,s,a,l,h,g),na(o,t,s,a,l,d,g),o.restore(),o.restore()}paintDataLineLayer(o,t,n,i,r,s,a,l,d,h,g,f,c,y,m){if(m<=0)return;const S=y+c*m,v=Math.max(16,Math.min(h-1,h*.98)),x=Math.max(10,v*.75);ia(o,t,r,a,l,d,h,v,y,S),s?(da(s.ctx,t,a,l,d,g,f,v,x,c,y,S,n,i),o.drawImage(s.canvas,0,0)):ua(o,t,a,l,d,v,y,S)}paintInteractionLayer(o,t,n,i,r,s){}};u(xi,"GlassChartLayerBase");let Ne=xi;const Ci=class Ci extends Ne{paintSelf(o){var x;const t=o.renderer,n=(x=t.getRawInstance)==null?void 0:x.call(t),i=this.data.theme??w.light,{width:r,height:s}=this.renderObject.size;if(!n||r<=0||s<=0){this.paintFallbackRect(t,i,r,s);return}const a=Je(n),{r:l,bg:d,border:h,cx:g,cy:f,ringW:c,tau:y,outerR:m,innerR:S,diskR:v}=this.computePaintParams(i,r,s,0);this.paintBackgroundLayer(n,i,r,s,l,d,h,a,g,f,v,c,y),this.paintGridLayer(n,i,r,s,a,g,f,S,m,c,y),this.paintInteractionLayer(n,i,r,s,g,f)}};u(Ci,"GlassChartSlot");let Fn=Ci;const ki=class ki extends Ne{constructor(){super(...arguments);b(this,"scratch")}paintSelf(t){var x;const n=t.renderer,i=(x=n.getRawInstance)==null?void 0:x.call(n),r=this.data.theme??w.light,{width:s,height:a}=this.renderObject.size;if(!i||s<=0||a<=0)return;const l=Je(i),{cx:d,cy:h,ringR:g,ringW:f,tau:c,startA:y,p:m,outerR:S,innerR:v}=this.computePaintParams(r,s,a,this.data.progress);m<=0||(this.scratch=fa(this.scratch,i.canvas,s,a)??this.scratch,this.paintDataLineLayer(i,r,s,a,l,this.scratch,d,h,g,f,v,S,c,y,m))}};u(ki,"GlassChartProgressRing");let Dn=ki;const wo=u(e=>Math.max(0,Math.min(1,e)),"clamp01$2"),Mi=class Mi extends ae{performLayout(o){const t=Number.isFinite(o.maxWidth)?o.maxWidth:64,n=Number.isFinite(o.maxHeight)?o.maxHeight:64,i=Number.isFinite(o.minWidth)?o.minWidth:0,r=Number.isFinite(o.minHeight)?o.minHeight:0,s=Math.max(i,Math.min(t,o.maxWidth)),a=Math.max(r,Math.min(n,o.maxHeight));return{width:s,height:a}}didUpdateWidget(){this.markNeedsPaint()}paintSelf(o){var M;const t=o.renderer,n=(M=t.getRawInstance)==null?void 0:M.call(t),i=this.data.theme??w.light,{width:r,height:s}=this.renderObject.size;if(!n||r<=0||s<=0)return;const a=Math.min(r,s),l=a/2,d=r/2,h=s/2,g=wo(this.data.hoverT),f=wo(this.data.downT),c=f*1.2,y=n.filter,m=u(L=>typeof y=="string"?(L===null?n.filter=y:n.filter=L,!0):!1,"setFilter");n.save(),n.translate(0,c),n.beginPath(),n.arc(d,h,l,0,Math.PI*2),n.closePath(),n.save(),n.shadowColor=A("#000000",i===w.dark?.44:.16),n.shadowBlur=i===w.dark?26+g*6:22+g*6,n.shadowOffsetY=i===w.dark?14+g*1.5:12+g*1.5;const S=n.createLinearGradient(d-l,h-l,d+l,h+l),v=i===w.dark?.14:.62,x=i===w.dark?.06:.32,T=i===w.dark?.1:.46;S.addColorStop(0,A("#ffffff",v+g*.06)),S.addColorStop(.52,A("#ffffff",x+g*.06)),S.addColorStop(1,A("#ffffff",T+g*.05)),n.fillStyle=S,n.fill(),n.restore(),n.save(),n.beginPath(),n.arc(d,h,l,0,Math.PI*2),n.clip();const k=m(`blur(${i===w.dark?14:16}px)`),C=n.createLinearGradient(d-l,h-l,d+l,h+l);C.addColorStop(0,A("#ffffff",i===w.dark?.06:.18)),C.addColorStop(.55,A("#ffffff",0)),C.addColorStop(1,A("#000000",i===w.dark?.24:.12)),n.globalAlpha=(i===w.dark?.55:.42)+g*.1-f*.06,n.fillStyle=C,n.fillRect(d-l-14,h-l-14,a+28,a+28),n.globalAlpha=1,k&&m(null),n.save(),n.globalCompositeOperation="screen";const R=n.createRadialGradient(d-l*.35,h-l*.4,0,d-l*.35,h-l*.4,l*1.55);R.addColorStop(0,A("#ffffff",(i===w.dark?.24:.38)+g*.12)),R.addColorStop(.52,A("#ffffff",.08+g*.08)),R.addColorStop(1,A("#ffffff",0)),n.fillStyle=R,n.fillRect(d-l-10,h-l-10,a+20,a+20),n.restore(),n.restore(),n.strokeStyle=A("#ffffff",(i===w.dark?.18:.4)+g*.08),n.lineWidth=1,n.beginPath(),n.arc(d,h,l-.5,0,Math.PI*2),n.stroke(),n.strokeStyle=A("#000000",i===w.dark?.42:.12),n.beginPath(),n.arc(d,h,l-.5,0,Math.PI*2),n.stroke(),n.restore()}};u(Mi,"GlassRoundButtonCanvas");let Bn=Mi;const vo=u(e=>Math.max(0,Math.min(1,e)),"clamp01$1"),Ri=class Ri extends Pt{constructor(){super(...arguments);b(this,"state",{hoverT:0,downT:0});b(this,"handlePointerEnter",u(()=>{this.setState({hoverT:1})},"handlePointerEnter"));b(this,"handlePointerLeave",u(()=>{this.setState({hoverT:0,downT:0})},"handlePointerLeave"));b(this,"handlePointerDown",u(t=>{var n,i,r;(n=t.stopPropagation)==null||n.call(t),this.setState({downT:1}),(r=(i=this.props).onPress)==null||r.call(i,t)},"handlePointerDown"));b(this,"handlePointerUp",u(t=>{var n;(n=t.stopPropagation)==null||n.call(t),this.setState({downT:0})},"handlePointerUp"))}render(){const t=Math.max(1,this.props.size),n=t/2,i=Math.max(14,Math.min(18,t*.52)),r=vo(this.state.hoverT),s=vo(this.state.downT);return p(B,{width:t,height:t,borderRadius:n,cursor:"pointer",onPointerEnter:this.handlePointerEnter,onPointerLeave:this.handlePointerLeave,onPointerDown:this.handlePointerDown,onPointerUp:this.handlePointerUp,children:$(vt,{children:[p(mt,{left:0,top:0,right:0,bottom:0,children:p(Bn,{theme:this.props.theme,border:this.props.border,hoverT:r,downT:s})}),p(mt,{left:0,top:0,right:0,bottom:0,children:p(B,{alignment:"center",pointerEvent:"none",children:p(re,{svg:this.props.iconSvg,size:i,color:this.props.iconColor})})})]})})}};u(Ri,"GlassRoundButton");let $e=Ri;const ga='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none"><path d="M3.25 8h9.5" stroke="currentColor" stroke-width="2.4" stroke-linecap="round"/></svg>',ma='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none"><path d="M8 3.25v9.5M3.25 8h9.5" stroke="currentColor" stroke-width="2.4" stroke-linecap="round"/></svg>',pa="Chart",ya=360,Sa=460,fe=u(e=>Math.max(0,Math.min(1,e)),"clamp01"),ge=u(e=>Math.max(0,Math.min(100,Math.round(e))),"clampPercent"),ba=u(e=>1-Math.pow(1-e,3),"easeOutCubic"),Ti=class Ti extends Pt{constructor(){super(...arguments);b(this,"state",{percentTarget:36,progress:.36});b(this,"progressRaf",null);b(this,"handleDelta",u(t=>n=>{var r;(r=n.stopPropagation)==null||r.call(n);const i=ge(this.state.percentTarget+t);this.animateToPercent(i)},"handleDelta"))}initWidget(t){const n=typeof t.progress=="number"&&Number.isFinite(t.progress)?fe(t.progress):.36,i=ge(n*100);this.state={...this.state,progress:i/100,percentTarget:i}}didUpdateWidget(t){const n=this.data.progress,i=t.progress;if(typeof n=="number"&&Number.isFinite(n)&&n!==i){const r=ge(fe(n)*100);this.animateToPercent(r)}}dispose(){this.progressRaf!=null&&(cancelAnimationFrame(this.progressRaf),this.progressRaf=null),super.dispose()}animateToPercent(t){const n=ge(t);this.progressRaf!=null&&(cancelAnimationFrame(this.progressRaf),this.progressRaf=null);const i=fe(this.state.progress),r=n/100,s=320,a=Date.now();this.setState({percentTarget:n});const l=u(()=>{const d=fe((Date.now()-a)/s),h=ba(d),g=i+(r-i)*h;d<1?(this.setState({progress:g}),this.progressRaf=requestAnimationFrame(l)):(this.progressRaf=null,this.setState({progress:r}))},"loop");this.progressRaf=requestAnimationFrame(l)}render(){const t=this.props.theme??w.light,n=typeof this.props.width=="number"?this.props.width:ya,i=typeof this.props.height=="number"?this.props.height:Sa,r=typeof this.props.title=="string"&&this.props.title?this.props.title:pa,s=fe(this.state.progress),a=ge(s*100),l=Math.max(18,Math.min(28,n*.08)),d=Math.round(Math.min(34,Math.max(18,i*.07))),h=i*.49,g=Math.min(n,i)*.335,f=Math.max(22,Math.min(44,g*.32)),c=Math.max(1,g-f*.5),y=Math.max(1,c-Math.max(10,f*.2)),m=h-y*.05,S=Math.round(Math.min(62,Math.max(28,y*.52))),v=Math.round(S*.34),x=Math.max(18,Math.min(24,Math.min(n,i)*.055)),T=x*2,k=Math.max(16,x*.9),C=Math.max(x+18,l*.95),R=A(t.text.primary,t===w.dark?.18:.08),M=A(t.text.primary,t===w.dark?.86:.78);return p(ve,{width:n,height:i,children:$(vt,{children:[p(mt,{left:0,top:0,right:0,bottom:0,children:p(Fn,{theme:t})}),p(mt,{left:0,top:0,right:0,bottom:0,children:p(Dn,{theme:t,progress:s})}),p(mt,{left:l,top:l,children:p(_,{text:r,fontSize:d,fontWeight:800,color:t.text.primary,pointerEvent:"none"})}),p(mt,{left:8,right:0,top:m-S/2+8,children:p(at,{mainAxisAlignment:wt.Center,crossAxisAlignment:U.Center,mainAxisSize:it.Max,pointerEvent:"none",children:$(ii,{spacing:Math.max(4,S*.06),alignBaseline:!0,children:[p(_,{text:String(a),fontSize:S,fontWeight:900,color:t.text.primary}),p(_,{text:"%",fontSize:v,fontWeight:800,color:A(t.text.primary,t===w.dark?.86:.9)})]})})}),p(mt,{left:0,right:0,bottom:C-x,children:$(at,{mainAxisAlignment:wt.Center,crossAxisAlignment:U.Center,mainAxisSize:it.Max,spacing:k,pointerEvent:"auto",children:[p($e,{theme:t,size:T,border:R,iconSvg:ga,iconColor:M,onPress:this.handleDelta(-1)}),p($e,{theme:t,size:T,border:R,iconSvg:ma,iconColor:M,onPress:this.handleDelta(1)})]})})]})})}};u(Ti,"GlassChartCard");let zn=Ti;const Ai=class Ai extends At{render(){const o=this.props.theme??w.light,t=this.props.width,n=this.props.height,i=A(o.text.primary,.06),r=A(o.text.primary,.22),s=A(o.text.primary,.32),a=A(o.text.primary,.44),l=typeof t=="number"&&t>0?t:980,d=Math.min(980,Math.max(0,l-64)),h=Math.min(560,d),g=3,f=16,c=Math.max(0,h-24),y=Math.max(160,Math.floor((c-f*(g-1))/g)),m=76,S=.8,v=Math.round(Math.min(520,h)*S),x=Math.round(260*S),T=Math.max(1,Math.round(24*S)),k=[[],[],[]];for(let C=0;C<co.length;C++)k[C%g].push(co[C]);return p(jt,{width:t,height:n,scrollBarTrackColor:i,scrollBarColor:r,scrollBarHoverColor:s,scrollBarActiveColor:a,children:p(B,{minWidth:t,alignment:"center",color:o.background.base,children:p(ct,{padding:32,children:$(Q,{mainAxisAlignment:wt.Start,crossAxisAlignment:U.Center,spacing:24,mainAxisSize:it.Max,children:[$(Q,{spacing:8,mainAxisSize:it.Min,children:[p(_,{text:"Glass Components",fontSize:30,fontWeight:"bold",color:o.text.primary}),p(_,{text:"Canvas2D 自绘玻璃拟态：磨砂卡片、弧带日历、图标摘要、磨砂按钮。",fontSize:14,color:o.text.secondary})]},"glass-card-header"),$(Q,{spacing:12,mainAxisSize:it.Min,children:[p(_,{text:"磨砂卡片",fontSize:18,fontWeight:"bold",color:o.text.primary}),$(at,{spacing:24,mainAxisSize:it.Min,crossAxisAlignment:U.Start,children:[p(B,{width:420,height:320,color:"transparent",isRepaintBoundary:!0,children:p(ne,{children:p(_e,{width:v,height:x,theme:o,title:"比卡超",subtitle:"脸颊蓄电，释放电击。",imageSrc:cr,blurPx:T,glassAlpha:o===w.dark?.14:.18,windowRatio:.32,animate:!1,windowRect:{x:Math.round(150*S),y:Math.round(10*S),width:Math.round(220*S),height:Math.round(240*S),radius:Math.round(20*S)}})})}),p(B,{width:420,height:320,color:"transparent",isRepaintBoundary:!0,children:p(ne,{children:p(_e,{width:v,height:x,theme:o,title:"耿鬼",subtitle:"潜伏黑夜，擅长恶作剧。",imageSrc:us,blurPx:T,glassAlpha:o===w.dark?.14:.18,windowRatio:.32,animate:!0,windowRect:{x:Math.round(160*S),y:Math.round(10*S),width:Math.round(350*S),height:Math.round(240*S),radius:Math.round(18*S)}})})})]}),p(_,{text:"日历卡片",fontSize:18,fontWeight:"bold",color:o.text.primary}),p(B,{width:h,height:Math.min(360,(n??640)-140),color:"transparent",isRepaintBoundary:!0,children:p(ne,{children:p(In,{width:Math.min(520,h),height:320,theme:o})})}),p(_,{text:"磨砂图表",fontSize:18,fontWeight:"bold",color:o.text.primary}),p(B,{width:Math.min(360,h),height:Math.min(480,(n??720)-140),color:"transparent",isRepaintBoundary:!0,children:p(ne,{children:p(zn,{width:Math.min(340,h),height:460,theme:o,title:"Chart",progress:.36})})}),p(_,{text:"磨砂玻璃按钮",fontSize:18,fontWeight:"bold",color:o.text.primary}),p(B,{width:h,color:"transparent",isRepaintBoundary:!0,children:p(ct,{padding:12,children:p(at,{spacing:f,mainAxisSize:it.Min,crossAxisAlignment:U.Start,children:k.map((C,R)=>p(Q,{spacing:f,mainAxisSize:it.Min,children:C.map(M=>p(An,{width:y,height:m,theme:o,text:M.text,glyph:M.glyph,tint:M.tint,activeVariant:M.activeVariant,config:M.config},`glass-btn-${M.activeVariant}`))},`glass-btn-col-${R}`))})})})]})]},"glass-card-demo-root")})})},"glass-card-demo-scroll")}};u(Ai,"GlassCardDemoApp");let En=Ai;function sn(e,o,t,n){e.render(p(En,{width:o,height:t,theme:n}))}u(sn,"runApp$3");const wa={key:It.GlassCard,label:"玻璃组件",description:"Canvas2D 自绘玻璃拟态组件合集：磨砂卡片、磨砂弧带日历、磨砂图表、磨砂按钮。"};function va(){const e=Tt(),o=P.useRef(null),t=P.useRef({width:0,height:0}),n=u(r=>{o.current=r,sn(r,t.current.width,t.current.height,e)},"handleRuntimeReady"),i=u((r,s,a)=>{t.current={width:r,height:s},o.current=a,sn(a,r,s,e)},"handleResize");return P.useEffect(()=>{o.current&&sn(o.current,t.current.width,t.current.height,e)},[e]),E.jsx(Et,{style:{width:"100%",height:"100%",overflow:"hidden"},onRuntimeReady:n,onResize:i})}u(va,"GlassCardDemo");const xa="_container_1nefu_1",Ca="_frame_1nefu_13",ka="_dark_1nefu_22",Ma="_tabs_1nefu_37",Ra="_tabExtra_1nefu_41",Ta="_tabExtraLabel_1nefu_47",Aa="_presetSelect_1nefu_52",Pa="_description_1nefu_68",La="_demoWrap_1nefu_92",_t={container:xa,frame:Ca,dark:ka,tabs:Ma,tabExtra:Ra,tabExtraLabel:Ta,presetSelect:Aa,description:Pa,demoWrap:La},Ia={key:"interactive-counter",label:"交互计数器",description:"基础计数器功能演示。展示了状态管理、事件响应和基本的文本/按钮渲染能力。"};function Fa(){const e=Tt(),o=P.useRef(null),t=P.useRef({width:0,height:0}),n=u(i=>{o.current=i,Ze(i,t.current.width,t.current.height,e)},"handleRuntimeReady");return P.useEffect(()=>{o.current&&Ze(o.current,t.current.width,t.current.height,e)},[e]),E.jsx(Et,{style:{width:"100%",height:"100%"},onRuntimeReady:n,onResize:u((i,r,s)=>{t.current={width:i,height:r},o.current=s,Ze(s,i,r,e)},"onResize")})}u(Fa,"InteractiveCounterDemo");const Da="_errorBoundary_dlzrw_1",Ba="_title_dlzrw_18",za="_message_dlzrw_22",Ea="_actions_dlzrw_25",Wa="_button_dlzrw_29",me={errorBoundary:Da,title:Ba,message:za,actions:Ea,button:Wa},Pi=class Pi extends Ir.Component{constructor(t){super(t);b(this,"handleRetry",u(()=>{var t,n;this.setState({error:null});try{(n=(t=this.props).onRetry)==null||n.call(t)}catch{}},"handleRetry"));this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t){console.error("Mindmap error:",t)}render(){const{error:t}=this.state;return t?E.jsxs("div",{className:me.errorBoundary,children:[E.jsx("div",{className:me.title,children:"渲染错误"}),E.jsx("div",{className:me.message,children:t.message}),E.jsx("div",{className:me.actions,children:E.jsx("button",{className:me.button,onClick:this.handleRetry,children:"重试"})})]}):this.props.children}};u(Pi,"ErrorBoundary");let Wn=Pi;const Li=class Li{constructor(o,t){b(this,"controller");b(this,"view");this.controller=o,this.view=t}attach(){this.controller,this.view}};u(Li,"InteractionModule");let Hn=Li;const Ii=class Ii{constructor(o){b(this,"controller");this.controller=o}attach(){this.controller}markAffected(o,t=16){}};u(Ii,"LayoutModule");let On=Ii;const Fi=class Fi{constructor(o,t){b(this,"controller");b(this,"_scale");b(this,"_tx");b(this,"_ty");b(this,"onViewChange",null);b(this,"listeners",new Set);this.controller=o;const n=o.viewport;this._scale=n.scale,this._tx=n.tx,this._ty=n.ty,this.onViewChange=t??null}get scale(){return this._scale}get tx(){return this._tx}get ty(){return this._ty}syncFromViewport(){const o=this.controller.viewport;this._scale=o.scale,this._tx=o.tx,this._ty=o.ty,this.notifyListeners()}setPosition(o,t){this._tx=o,this._ty=t,this.apply()}zoomAt(o,t,n){const i=(t-this._tx)/this._scale,r=(n-this._ty)/this._scale;this._scale=o,this._tx=t-i*this._scale,this._ty=n-r*this._scale,this.apply()}addChangeListener(o){return this.listeners.add(o),()=>{this.listeners.delete(o)}}removeChangeListener(o){this.listeners.delete(o)}clampScale(o){return Math.max(We.MIN_SCALE,Math.min(We.MAX_SCALE,o))}apply(){this.controller.viewport.setTransform(this._scale,this._tx,this._ty),this.resetCanvasTransform(),this.notifyListeners()}notifyListeners(){var o,t;(o=this.onViewChange)==null||o.call(this,this._scale,this._tx,this._ty);for(const n of this.listeners)try{n(this._scale,this._tx,this._ty)}catch{}this.dispatchViewChangeEvent();try{this.controller.viewport.markDirty()}catch{}try{const n=this.controller.getPluginContext();for(const i of this.controller.getPlugins())(t=i.onViewChange)==null||t.call(i,n,this._scale,this._tx,this._ty)}catch{}}scheduleRender(){}setActiveKey(o){this.controller.viewport.setActiveKey(o);try{this.controller.viewport.markDirty()}catch{}this.dispatchActiveChangeEvent(o)}findNodeAtPoint(o,t,n){if(!o)return null;for(let a=o.children.length-1;a>=0;a--){const l=o.children[a],d=this.findNodeAtPoint(l,t,n);if(d)return d}const i=o.getAbsolutePosition(),r=o.renderObject.size;return o instanceof He&&t>=i.dx&&n>=i.dy&&t<=i.dx+r.width&&n<=i.dy+r.height?o:null}resetCanvasTransform(){var r,s;const o=(s=(r=this.controller.runtime.getRenderer())==null?void 0:r.getRawInstance)==null?void 0:s.call(r),t=(o==null?void 0:o.canvas)??null;if(!o||!t)return;const n=parseFloat(t.style.width||"0")||t.width,i=n>0?t.width/n:1;o.setTransform(i,0,0,i,0,0)}dispatchViewChangeEvent(){var i,r;const o=(r=(i=this.controller.runtime.getRenderer())==null?void 0:i.getRawInstance)==null?void 0:r.call(i),n=(o==null?void 0:o.canvas)??null??this.controller.runtime.container;try{n==null||n.dispatchEvent(new CustomEvent("inkwell:viewchange",{detail:{scale:this._scale,tx:this._tx,ty:this._ty}}))}catch{}}dispatchActiveChangeEvent(o){var r,s;const t=(s=(r=this.controller.runtime.getRenderer())==null?void 0:r.getRawInstance)==null?void 0:s.call(r),i=(t==null?void 0:t.canvas)??null??this.controller.runtime.container;try{i==null||i.dispatchEvent(new CustomEvent("inkwell:activechange",{detail:{activeKey:o}}))}catch{}}};u(Fi,"ViewModule");let _n=Fi;const ie=class ie{constructor(o,t,n){b(this,"runtime");b(this,"viewport");b(this,"viewScale");b(this,"viewTx");b(this,"viewTy");b(this,"plugins",new Set);b(this,"layoutModule");b(this,"view");b(this,"interaction");b(this,"onViewChangeCb",null);b(this,"layoutListeners",new Set);this.runtime=o,this.viewport=t,this.viewScale=t.scale,this.viewTx=t.tx,this.viewTy=t.ty,this.view=new _n(this,n),this.onViewChangeCb=n??null,this.bindViewport(t),this.layoutModule=new On(this),this.interaction=new Hn(this,this.view),this.plugins.add(this.layoutModule),this.plugins.add(this.interaction),this.plugins.add(this.view),this.plugins.forEach(i=>{typeof i.onInit=="function"&&i.onInit()}),ie.byRuntime.set(o,this),o.__mindmapController=this}syncView(o){this.viewScale=o.scale,this.viewTx=o.tx,this.viewTy=o.ty,this.view.syncFromViewport()}bindViewport(o){this.viewport!==o&&(this.viewport=o,this.viewport.addViewChangeListener(t=>{this.syncView(t)}),this.viewScale=o.scale,this.viewTx=o.tx,this.viewTy=o.ty)}get scrollX(){return this.viewport.scrollX}get scrollY(){return this.viewport.scrollY}notifyViewChange(){this.view.notifyListeners()}dispatchLayoutChange(){this.layoutListeners.forEach(o=>o())}addLayoutChangeListener(o){return this.layoutListeners.add(o),()=>this.layoutListeners.delete(o)}loadGraph(o){const t=this.runtime.getRootWidget();t&&typeof t.setGraphData=="function"&&t.setGraphData(o)}registerPlugin(o){var t;if(!(!o||this.plugins.has(o))){this.plugins.add(o);try{(t=o.onAttach)==null||t.call(o,this.getPluginContext())}catch{}}}unregisterPlugin(o){var t;if(!(!o||!this.plugins.has(o))){try{(t=o.onDetach)==null||t.call(o,this.getPluginContext())}catch{}this.plugins.delete(o)}}getPluginContext(){return{runtime:this.runtime,viewport:this.viewport,controller:this}}getPlugins(){return Array.from(this.plugins)}setViewPosition(o,t){var n;this.viewport.setPosition(o,t),this.viewScale=this.viewport.scale,this.viewTx=this.viewport.tx,this.viewTy=this.viewport.ty;try{(n=this.onViewChangeCb)==null||n.call(this,this.viewScale,this.viewTx,this.viewTy)}catch{}this.dispatchViewChangeEvent();try{this.viewport.markDirty()}catch{}}addViewChangeListener(o){return this.view.addChangeListener(o)}removeViewChangeListener(o){this.view.removeChangeListener(o)}zoomAt(o,t,n){var i,r;this.viewport.zoomAt(o,t,n),this.viewScale=this.viewport.scale,this.viewTx=this.viewport.tx,this.viewTy=this.viewport.ty;try{(i=this.onViewChangeCb)==null||i.call(this,this.viewScale,this.viewTx,this.viewTy)}catch{}try{const s=this.getPluginContext();for(const a of this.getPlugins())(r=a.onViewChange)==null||r.call(a,s,this.viewScale,this.viewTx,this.viewTy)}catch{}this.dispatchViewChangeEvent()}setActiveKey(o){this.viewport.setActiveKey(o);try{this.viewport.markDirty()}catch{}this.dispatchActiveChangeEvent(o)}static getByRuntime(o){try{return ie.byRuntime.get(o)??null}catch{return null}}dispatchViewChangeEvent(){var i,r;const o=(r=(i=this.runtime.getRenderer())==null?void 0:i.getRawInstance)==null?void 0:r.call(i),n=(o==null?void 0:o.canvas)??null??this.runtime.container;try{n==null||n.dispatchEvent(new CustomEvent("inkwell:viewchange",{detail:{scale:this.viewScale,tx:this.viewTx,ty:this.viewTy}}))}catch{}}dispatchActiveChangeEvent(o){var r,s;const t=(s=(r=this.runtime.getRenderer())==null?void 0:r.getRawInstance)==null?void 0:s.call(r),i=(t==null?void 0:t.canvas)??null??this.runtime.container;try{i==null||i.dispatchEvent(new CustomEvent("inkwell:activechange",{detail:{activeKey:o}}))}catch{}}};u(ie,"MindmapController"),b(ie,"byRuntime",new WeakMap);let we=ie;P.createContext(null);function Ha(e,o,t,n=0){const i=Math.max(1,e.width+n*2),r=Math.max(1,e.height+n*2),s=o/i,a=t/r,l=Math.min(s,a),d=(o-e.width*l)/2-e.x*l,h=(t-e.height*l)/2-e.y*l;return{s:l,ox:d,oy:h}}u(Ha,"fitBounds");function an(e,o,t,n,i,r,s,a){const l=(0-n)/t+r,d=(0-i)/t+s,h=e/t,g=o/t,f=a.ox+l*a.s,c=a.oy+d*a.s,y=h*a.s,m=g*a.s;return{x:f,y:c,width:y,height:m}}u(an,"computeViewportRect");const Oa="_canvas_1lg0u_1",_a={canvas:Oa};function Na({controller:e,fit:o,width:t,height:n,stroke:i,fill:r,borderWidth:s=2}){const a=P.useRef(null),l=P.useRef(!1),d=P.useRef(null),h=P.useRef(""),g=P.useRef("none"),f=P.useRef({x:0,y:0}),c=Tt(),y=e.runtime,m=P.useRef({scale:e.viewScale,tx:e.viewTx,ty:e.viewTy,scrollX:e.scrollX,scrollY:e.scrollY}),S=P.useCallback(M=>{M.save(),M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,M.canvas.width,M.canvas.height),M.restore()},[]),v=P.useCallback(()=>{const M=a.current;if(!M)return;const L=M.getContext("2d");if(!L)return;const I=window.devicePixelRatio||1,D=t,H=n,F=Math.round(D*I),j=Math.round(H*I);(M.width!==F||M.height!==j)&&(M.width=F,M.height=j);const V=y.container,O=(V==null?void 0:V.clientWidth)||1,W=(V==null?void 0:V.clientHeight)||1,N=m.current,X=an(O,W,N.scale,N.tx,N.ty,N.scrollX,N.scrollY,o),K=[X.x.toFixed(1),X.y.toFixed(1),X.width.toFixed(1),X.height.toFixed(1),F,j].join(":");h.current!==K&&(h.current=K,S(L),L.save(),L.scale(I,I),L.strokeStyle=i??"transparent",L.fillStyle=r??c.state.selected,L.lineWidth=s,L.beginPath(),L.rect(X.x,X.y,X.width,X.height),L.fill(),L.stroke(),L.restore())},[y,i,r,s,o,c.state.selected,S,t,n]),x=P.useCallback(()=>{d.current||(d.current=requestAnimationFrame(()=>{d.current=null,v()}))},[v]);P.useEffect(()=>{m.current={scale:e.viewScale,tx:e.viewTx,ty:e.viewTy,scrollX:e.scrollX,scrollY:e.scrollY},x();const M=e.addViewChangeListener((I,D,H)=>{m.current={scale:I,tx:D,ty:H,scrollX:e.scrollX,scrollY:e.scrollY},x()}),L=e.viewport.addScrollListener((I,D)=>{m.current={...m.current,scrollX:I,scrollY:D},x()});return()=>{M(),L()}},[e,x]);const T=P.useCallback((M,L)=>{const I=a.current;if(!I)return;const D=I.getBoundingClientRect(),H=M-D.left,F=L-D.top,j=(H-o.ox)/o.s,V=(F-o.oy)/o.s,O=y.container,W=(O==null?void 0:O.clientWidth)||1,N=(O==null?void 0:O.clientHeight)||1,X=e.viewScale,K=m.current,tt=W/2-(j-K.scrollX)*X,G=N/2-(V-K.scrollY)*X;e.setViewPosition(tt,G),x()},[y,e,o.s,o.ox,o.oy,x]),k=P.useRef(null),C=P.useCallback((M,L)=>{k.current={x:M,y:L},!d.current&&(d.current=requestAnimationFrame(()=>{const I=k.current;d.current=null,I&&(T(I.x,I.y),k.current=null)}))},[T]);P.useEffect(()=>(x(),()=>{d.current&&cancelAnimationFrame(d.current)}),[x]),P.useEffect(()=>{const M=a.current;if(!M)return;const L=u(H=>{var tt;const F=M.getBoundingClientRect(),j=H.clientX-F.left,V=H.clientY-F.top,O=m.current,W=y.container,N=(W==null?void 0:W.clientWidth)||1,X=(W==null?void 0:W.clientHeight)||1,K=an(N,X,O.scale,O.tx,O.ty,O.scrollX,O.scrollY,o);j>=K.x&&j<=K.x+K.width&&V>=K.y&&V<=K.y+K.height?(g.current="rect",f.current={x:j-K.x,y:V-K.y},M.style.cursor="grabbing"):(g.current="jump",C(H.clientX,H.clientY)),l.current=!0,(tt=M.setPointerCapture)==null||tt.call(M,H.pointerId)},"onDown"),I=u(H=>{if(!l.current){const F=M.getBoundingClientRect(),j=H.clientX-F.left,V=H.clientY-F.top,O=m.current,W=y.container,N=(W==null?void 0:W.clientWidth)||1,X=(W==null?void 0:W.clientHeight)||1,K=an(N,X,O.scale,O.tx,O.ty,O.scrollX,O.scrollY,o);j>=K.x&&j<=K.x+K.width&&V>=K.y&&V<=K.y+K.height?M.style.cursor="grab":M.style.cursor="default";return}if(g.current==="jump")C(H.clientX,H.clientY);else if(g.current==="rect"){const F=M.getBoundingClientRect(),j=H.clientX-F.left,V=H.clientY-F.top,O=j-f.current.x,W=V-f.current.y,N=m.current,X=N.scale,K=(O-o.ox)/o.s,tt=(W-o.oy)/o.s,G=-(K-N.scrollX)*X,ot=-(tt-N.scrollY)*X;e.setViewPosition(G,ot),x()}},"onMove"),D=u(H=>{var F;l.current=!1,g.current="none",M.style.cursor="default";try{(F=M.releasePointerCapture)==null||F.call(M,H.pointerId)}catch{}},"onUp");return M.addEventListener("pointerdown",L),M.addEventListener("pointermove",I),M.addEventListener("pointerup",D),M.addEventListener("pointerleave",D),()=>{M.removeEventListener("pointerdown",L),M.removeEventListener("pointermove",I),M.removeEventListener("pointerup",D),M.removeEventListener("pointerleave",D)}},[o,C,e,y,x]);const R=P.useMemo(()=>({width:`${t}px`,height:`${n}px`}),[t,n]);return E.jsx("canvas",{ref:a,className:_a.canvas,style:R})}u(Na,"HighlightOverlay");const $a="_minimap_18wu7_1",Ka={minimap:$a},Va="_canvas_cpr11_1",ja={canvas:Va};function Ya({controller:e,width:o,height:t,background:n,onFitChange:i}){const r=P.useRef(null),[,s]=P.useState({s:1,ox:0,oy:0}),a=P.useRef(null),l=P.useRef(""),d=Tt(),h=e.runtime,g=e.viewport,f=P.useCallback(()=>h.getRootWidget(),[h]),c=P.useCallback(k=>{if(!k)return[];const C=g.getAbsolutePosition(),R=[],M=u(L=>{if(L instanceof He){const I=L.getAbsolutePosition(),D=L.renderObject.size,H=(I.dx-C.dx-g.tx)/g.scale+e.scrollX,F=(I.dy-C.dy-g.ty)/g.scale+e.scrollY;R.push({x:H,y:F,width:D.width,height:D.height})}for(const I of L.children)M(I)},"walk");return M(k),R},[g,e]),y=P.useCallback(k=>{if(!k)return[];const C=g.getAbsolutePosition(),R=new Map,M=u(H=>{if(H instanceof He){const F=H.getAbsolutePosition(),j=H.renderObject.size;R.set(H.key,{x:(F.dx-C.dx-g.tx)/g.scale+e.scrollX,y:(F.dy-C.dy-g.ty)/g.scale+e.scrollY,width:j.width,height:j.height})}for(const F of H.children)M(F)},"buildRectMap"),L=[],I=u(H=>{if(H instanceof Do){const{fromKey:F,toKey:j,style:V}=H,O=R.get(F),W=R.get(j);if(O&&W){const N=O.x+O.width/2,X=W.x+W.width/2,K=N<=X?O:W,G=hr({left:K,right:K===O?W:O,style:V??dr.Bezier,samples:Me.samples,margin:Me.margin,elbowRadius:Me.elbowRadius,arcSegments:Me.arcSegments});L.push(G)}}for(const F of H.children)I(F)},"walk"),D=k;return D&&(M(D),I(D)),L},[g,e]),m=P.useCallback(k=>{const C=c(k);let R=1/0,M=1/0,L=-1/0,I=-1/0;for(const D of C)R=Math.min(R,D.x),M=Math.min(M,D.y),L=Math.max(L,D.x+D.width),I=Math.max(I,D.y+D.height);if(!Number.isFinite(R)){const D=g.renderObject.size;return{x:0,y:0,width:D.width,height:D.height}}return{x:R,y:M,width:Math.max(0,L-R),height:Math.max(0,I-M)}},[g,c]),S=P.useCallback(k=>{k.save(),k.setTransform(1,0,0,1,0,0),k.clearRect(0,0,k.canvas.width,k.canvas.height),k.fillStyle=n??d.background.surface,k.fillRect(0,0,k.canvas.width,k.canvas.height),k.restore()},[n,d.background.surface]),v=P.useCallback(()=>{const k=r.current;if(!k)return;const C=k.getContext("2d");if(!C)return;const R=window.devicePixelRatio||1,M=o,L=t,I=Math.round(M*R),D=Math.round(L*R);(k.width!==I||k.height!==D)&&(k.width=I,k.height=D);const H=f(),F=m(H),j=Ha(F,M,L,15),V=l.current,O=`${j.s.toFixed(3)}:${j.ox.toFixed(1)}:${j.oy.toFixed(1)}`;V!==O&&(s(j),i==null||i(j),l.current=O),S(C);const W=c(H);C.save(),C.scale(R,R),C.translate(j.ox,j.oy),C.scale(j.s,j.s);for(const X of W)C.fillStyle=d.background.container,C.strokeStyle=d.primary,C.lineWidth=1,C.beginPath(),C.rect(X.x,X.y,X.width,X.height),C.fill(),C.stroke();const N=y(H);C.strokeStyle=d.border.secondary,C.lineWidth=1;for(const X of N){C.beginPath();for(let K=0;K<X.length;K++){const tt=X[K];K===0?C.moveTo(tt.x,tt.y):C.lineTo(tt.x,tt.y)}C.stroke()}C.restore()},[o,t,i,S,m,f,d.primary,d.background.container,d.border.secondary,c,y]),x=P.useCallback(()=>{a.current||(a.current=requestAnimationFrame(()=>{a.current=null,v()}))},[v]);P.useEffect(()=>{x();const k=h.container||document.getElementById(h.getCanvasId()||"")||void 0,C=e.addLayoutChangeListener(()=>x()),R=new ResizeObserver(()=>x());return k&&R.observe(k),()=>{C==null||C(),R.disconnect();const M=a.current;M&&cancelAnimationFrame(M),a.current=null}},[h,e,o,t,x]);const T=P.useMemo(()=>({width:`${o}px`,height:`${t}px`}),[o,t]);return E.jsx("canvas",{ref:r,className:ja.canvas,style:T})}u(Ya,"ViewportPreview");function Ga({controller:e,width:o=200,height:t=140}){const[n,i]=P.useState({s:1,ox:0,oy:0}),r=P.useMemo(()=>({width:`${o}px`,height:`${t}px`}),[o,t]);return E.jsxs("div",{className:Ka.minimap,style:r,onMouseDown:u(s=>s.stopPropagation(),"onMouseDown"),onPointerDown:u(s=>s.stopPropagation(),"onPointerDown"),children:[E.jsx(Ya,{controller:e,width:o,height:t,onFitChange:i}),E.jsx(Na,{controller:e,fit:n,width:o,height:t})]})}u(Ga,"MinimapBase");function Xa({controller:e,width:o=200,height:t=140}){return E.jsx(Ga,{controller:e,width:o,height:t})}u(Xa,"MinimapWithController");const Ua="_toolbar_1f41s_1",qa="_bar_1f41s_10",Ja="_iconBtn_1f41s_20",ze={toolbar:Ua,bar:qa,iconBtn:Ja};function Za(e){const o=e.getRootWidget();if(!o)return{nodes:[],edges:[],activeKey:null,viewportSize:null};const t=Vt(o,xe.MindMapViewport),n=Vt(o,xe.MindMapLayout),i=[],r=[],s=(t==null?void 0:t.activeKey)??null,a=t?{width:t.width,height:t.height}:null;if(!n)return{nodes:i,edges:r,activeKey:s,viewportSize:a};for(const l of n.children)if(l instanceof He)i.push({key:l.key,title:l.title,prefSide:l.prefSide});else if(l instanceof Do){const d=l.fromKey,h=l.toKey;r.push({from:d,to:h})}return{nodes:i,edges:r,activeKey:s,viewportSize:a}}u(Za,"collectGraph");function Qa(e,o){const t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=o,document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(t)}u(Qa,"exportBlob");function tl({runtime:e,width:o,height:t}){const n=P.useRef(null),i=P.useMemo(()=>{let d=o??0,h=t??0;try{const g=e==null?void 0:e.container;g&&(d=g.clientWidth,h=g.clientHeight)}catch{}return{width:d,height:h}},[e,o,t]),r=P.useCallback(()=>{if(!e)return;const d=Za(e),h={nodes:d.nodes,edges:d.edges,activeKey:d.activeKey,viewport:d.viewportSize??i},g=new Blob([JSON.stringify(h,null,2)],{type:"application/json"});Qa(g,`mindmap-${Date.now()}.json`)},[e,i]),s=P.useCallback(async d=>{},[e]),a=P.useCallback(()=>{var d;(d=n.current)==null||d.click()},[]),l=P.useCallback(async d=>{var f;const h=((f=d.target.files)==null?void 0:f[0])??null;if(!h)return;const g=await h.text();try{const c=JSON.parse(g);await s(c)}catch(c){console.error("Import JSON failed:",c)}finally{d.target.value=""}},[s]);return E.jsx("div",{className:ze.toolbar,children:E.jsxs("div",{className:ze.bar,children:[E.jsx(oe,{title:"导出 JSON",children:E.jsx("button",{className:ze.iconBtn,"aria-label":"导出 JSON",onClick:r,children:E.jsx(ur,{})})}),E.jsx(oe,{title:"导入 JSON",children:E.jsx("button",{className:ze.iconBtn,"aria-label":"导入 JSON",onClick:a,children:E.jsx(fr,{})})}),E.jsx("input",{ref:n,type:"file",accept:"application/json",style:{display:"none"},onChange:l})]})})}u(tl,"Toolbar");function el(e){const[o,t]=P.useState({scale:e.viewScale,tx:e.viewTx,ty:e.viewTy,scrollX:e.scrollX,scrollY:e.scrollY});return P.useEffect(()=>{t({scale:e.viewScale,tx:e.viewTx,ty:e.viewTy,scrollX:e.scrollX,scrollY:e.scrollY});const n=e.addViewChangeListener((i,r,s)=>{t(a=>({...a,scale:i,tx:r,ty:s,scrollX:e.scrollX,scrollY:e.scrollY}))});return()=>{n()}},[e]),o}u(el,"useMindmapViewWithController");function pe(e,o,t,n){const i=Math.max(o,Math.min(t,e)),r=Math.round((i-o)/n),s=o+r*n;return Number(s.toFixed(4))}u(pe,"quantize");const nl="_zoomBar_1y4an_1",il="_track_1y4an_12",ol="_fill_1y4an_19",rl="_thumb_1y4an_27",sl="_controls_1y4an_37",al="_iconBtn_1y4an_44",ll="_percentInput_1y4an_64",Nt={zoomBar:nl,track:il,fill:ol,thumb:rl,controls:sl,iconBtn:al,percentInput:ll};function cl({controller:e,viewState:o,min:t=We.MIN_SCALE,max:n=We.MAX_SCALE,step:i=.01}){const r=o.scale,s=P.useCallback(()=>{var R,M;const T=(M=(R=e.runtime.container)==null?void 0:R.getBoundingClientRect)==null?void 0:M.call(R),k=(T==null?void 0:T.width)??window.innerWidth,C=(T==null?void 0:T.height)??window.innerHeight;return{cx:k/2,cy:C/2,vw:k,vh:C}},[e.runtime.container]),a=P.useCallback(T=>{const{cx:k,cy:C}=s();e.zoomAt(T,k,C)},[e,s]),l=P.useRef(null),[d,h]=P.useState(!1),g=Math.round(r*100),f=P.useMemo(()=>{const T=(r-t)/(n-t);return Math.max(0,Math.min(1,T))},[r,t,n]),c=P.useCallback(T=>{const k=l.current;if(!k)return;const C=k.getBoundingClientRect(),R=Math.max(1,C.width),L=Math.max(0,Math.min(R,T-C.left))/R,I=t+L*(n-t),D=pe(I,t,n,i);a(D)},[t,n,i,a]);P.useEffect(()=>{const T=Fr(C=>{d&&c(C.clientX)},16),k=u(()=>h(!1),"onUp");return window.addEventListener("pointermove",T),window.addEventListener("pointerup",k),()=>{window.removeEventListener("pointermove",T),window.removeEventListener("pointerup",k),T.cancel()}},[d,c]);const y=P.useCallback(T=>{T.stopPropagation(),h(!0),c(T.clientX)},[c]),m=P.useCallback(()=>{const T=pe(r-.1,t,n,i);a(T)},[r,t,n,i,a]),S=P.useCallback(()=>{const T=pe(r+.1,t,n,i);a(T)},[r,t,n,i,a]),v=P.useCallback(()=>{var M;const T=pe(1,t,n,i),k=e.runtime.getRootWidget(),C=Vt(k,xe.MindMapLayout),R=((M=C==null?void 0:C.renderObject)==null?void 0:M.size)??null;if(R){const{vw:L,vh:I}=s(),D=-((L-R.width)/2),H=-((I-R.height)/2);e.viewport.scrollTo(D,H)}e.viewport.setTransform(T,0,0),e.syncView({scale:e.viewport.scale,tx:e.viewport.tx,ty:e.viewport.ty})},[e,s,n,t,i]),x=P.useCallback(T=>{const k=Math.round(t*100),C=Math.round(n*100),R=Math.max(k,Math.min(C,Math.round(Number(T??g)))),M=pe(R/100,t,n,i);a(M)},[g,t,n,i,a]);return E.jsxs("div",{className:Nt.zoomBar,onMouseDown:u(T=>T.stopPropagation(),"onMouseDown"),onClick:u(T=>T.stopPropagation(),"onClick"),children:[E.jsxs("div",{className:Nt.track,ref:l,onPointerDown:y,children:[E.jsx("div",{className:Nt.fill,style:{width:`${f*100}%`}}),E.jsx("div",{className:Nt.thumb,style:{left:`${f*100}%`}})]}),E.jsxs("div",{className:Nt.controls,children:[E.jsx(oe,{title:"减少 10%",children:E.jsx("button",{className:Nt.iconBtn,onClick:m,"aria-label":"decrease",children:E.jsx(gr,{})})}),E.jsx(mr,{className:Nt.percentInput,min:Math.round(t*100),max:Math.round(n*100),step:10,value:g,precision:0,formatter:u(T=>`${T??""}%`,"formatter"),parser:u(T=>Number(String(T??"").replace(/%/g,"")),"parser"),onChange:x}),E.jsx(oe,{title:"增加 10%",children:E.jsx("button",{className:Nt.iconBtn,onClick:S,"aria-label":"increase",children:E.jsx(pr,{})})}),E.jsx(oe,{title:"重置为 100% 并居中",children:E.jsx("button",{className:Nt.iconBtn,onClick:v,"aria-label":"reset",children:E.jsx(Bo,{})})})]})]})}u(cl,"ZoomBarBase");function hl({controller:e,min:o,max:t,step:n}){const i=el(e);return E.jsx(cl,{controller:e,viewState:i,min:o,max:t,step:n})}u(hl,"ZoomBarWithController");const dl={key:"mindmap",label:"思维导图",description:"高性能思维导图应用演示。支持节点拖拽、缩放、编辑和无限画布功能。"};function ul({width:e,height:o}){const[t,n]=P.useState(null),[i,r]=P.useState(null),s=P.useRef({width:0,height:0}),a=Tt();P.useEffect(()=>{t&&s.current.width>0&&s.current.height>0&&Qe(t,s.current.width,s.current.height,a)},[a,t]);const l=P.useCallback(g=>{const f=g.getRootWidget(),c=Vt(f,xe.MindMapViewport);if(c){let y=we.byRuntime.get(g);!y||y.viewport!==c?(y=new we(g,c,()=>{}),r(y)):i||r(y)}},[i]),d=P.useCallback(g=>{if(n(g),g.container){const{width:f,height:c}=g.container.getBoundingClientRect();s.current={width:f,height:c},Qe(g,f,c,a),l(g)}},[l,a]),h=P.useCallback((g,f,c)=>{s.current={width:g,height:f},Qe(c,g,f,a);const y=we.byRuntime.get(c);if(y){const m=c.getRootWidget(),S=Vt(m,xe.MindMapViewport);S&&y.bindViewport(S)}else l(c)},[l,a]);return E.jsx(Wn,{children:E.jsxs("div",{style:{width:e!=null?`${e}px`:"100%",height:o!=null?`${o}px`:"100%"},children:[E.jsx(Et,{style:{width:"100%",height:"100%"},onRuntimeReady:d,onResize:h}),t&&i&&E.jsxs(E.Fragment,{children:[E.jsx(tl,{runtime:t,width:e,height:o}),E.jsx(hl,{controller:i}),E.jsx(Xa,{controller:i,width:200,height:150})]})]})})}u(ul,"MindmapDemo");function xo(e){return(e.split("/").pop()||e).replace(/\.(md|markdown)$/i,"")}u(xo,"titleFromPath");function ri(e){var s,a;const o=e.replace(/^\uFEFF/,""),t=o.split(/\r?\n/);if(((s=t[0])==null?void 0:s.trim())!=="---")return{frontMatter:{},body:o};let n=-1;for(let l=1;l<t.length;l++)if(((a=t[l])==null?void 0:a.trim())==="---"){n=l;break}if(n===-1)return{frontMatter:{},body:o};const i={};for(let l=1;l<n;l++){const d=t[l];if(!d)continue;const h=d.indexOf(":");if(h===-1)continue;const g=d.slice(0,h).trim(),f=d.slice(h+1).trim();if(g){if(g==="title"){i.title=f.replace(/^['"]|['"]$/g,"");continue}if(g==="link"){i.link=f.replace(/^['"]|['"]$/g,"");continue}if(g==="date"){i.date=f.replace(/^['"]|['"]$/g,"");continue}if(g==="categories"){const c=f.replace(/^['"]|['"]$/g,""),y=u(S=>S.trim().replace(/^['"]|['"]$/g,""),"cleanCategory");if(c.startsWith("[")&&c.endsWith("]")){const v=c.slice(1,-1).split(",").map(y).filter(Boolean);i.categories=v;continue}const m=c.split(",").map(y).filter(Boolean);i.categories=m.length>0?m:void 0;continue}}}const r=t.slice(n+1).join(`
`);return{frontMatter:i,body:r}}u(ri,"parseMarkdownFrontMatter");function fl(e){const o=[],t=u(i=>{for(const r of i){if(typeof r=="string"){o.push({id:r,title:xo(r)});continue}if(r.type==="doc"){o.push({id:r.id,title:r.label||xo(r.id)});continue}if(r.type==="category"){t(r.items);continue}r.type!=="autogenerated"&&r.type}},"walk");t(e);const n=new Set;return o.filter(i=>n.has(i.id)?!1:(n.add(i.id),!0))}u(fl,"flattenSidebarToDocMetas");var q=(e=>(e.Root="root",e.Header="header",e.Paragraph="paragraph",e.List="list",e.OrderedList="orderedList",e.TaskList="taskList",e.ListItem="listItem",e.TaskListItem="taskListItem",e.CodeBlock="codeBlock",e.Quote="quote",e.Text="text",e.Bold="bold",e.Italic="italic",e.Link="link",e.Image="image",e.Table="table",e.TableRow="tableRow",e.TableCell="tableCell",e.HorizontalRule="horizontalRule",e))(q||{});const Di=class Di{getIndent(o){const t=o.match(/^(\s*)/);return t?t[1].length:0}matchTaskListLine(o){const t=o.match(/^(\s*)-\s+\[([ x])\]\s+(.+)$/);return t?{indent:t[1].length,checked:t[2]==="x",text:t[3]}:null}matchUnorderedListLine(o){const t=o.match(/^(\s*)(\*|-)\s+(.+)$/);return t?{indent:t[1].length,text:t[3]}:null}matchOrderedListLine(o){const t=o.match(/^(\s*)(\d+)\.\s+(.+)$/);return t?{indent:t[1].length,text:t[3]}:null}parseListBlock(o,t){const n=o[t]??"",i=this.matchTaskListLine(n),r=i?null:this.matchOrderedListLine(n),s=i||r?null:this.matchUnorderedListLine(n);if(!i&&!r&&!s)return{node:{type:"paragraph",children:this.parseInline(n)},nextIndex:t+1};const a=(i||r||s).indent,d={type:i?"taskList":r?"orderedList":"list",children:[]};let h=t;for(;h<o.length;){const g=o[h];if(!g||g.trim()==="")break;let f,c;if(i){const m=this.matchTaskListLine(g);if(!m||m.indent!==a)break;f=m.text,c=m.checked}else if(r){const m=this.matchOrderedListLine(g);if(!m||m.indent!==a)break;f=m.text}else{const m=this.matchUnorderedListLine(g);if(!m||m.indent!==a)break;f=m.text}const y=i?{type:"taskListItem",checked:c,children:this.parseInline(f||"")}:{type:"listItem",children:this.parseInline(f||"")};for(h++;h<o.length;){const m=o[h];if(!m||m.trim()===""||this.getIndent(m)<=a||!(this.matchTaskListLine(m)||this.matchOrderedListLine(m)||this.matchUnorderedListLine(m)))break;const x=this.parseListBlock(o,h);y.children=[...y.children??[],x.node],h=x.nextIndex}d.children.push(y)}return{node:d,nextIndex:h}}parse(o){const t=o.split(/\r?\n/),n={type:"root",children:[]};let i=0;for(;i<t.length;){const r=t[i],s=r.trim();if(s===""){i++;continue}if(s.match(/^(\*{3,}|-{3,}|_{3,})$/)){n.children.push({type:"horizontalRule"}),i++;continue}if(s.startsWith("```")){const d=s.slice(3).trim();let h="";for(i++;i<t.length&&!t[i].trim().startsWith("```");)h+=t[i]+`
`,i++;n.children.push({type:"codeBlock",content:h,language:d}),i++;continue}const a=r.match(/^(#{1,6})\s+(.+)$/);if(a){n.children.push({type:"header",level:a[1].length,children:[{type:"text",content:a[2]}]}),i++;continue}if(s.startsWith("|")){const d={type:"table",children:[]},g={type:"tableRow",children:s.split("|").filter(f=>f.trim()!=="").map(f=>f.trim()).map(f=>({type:"tableCell",children:this.parseInline(f),isHeader:!0}))};for(d.children.push(g),i++,i<t.length&&t[i].trim().startsWith("|")&&t[i].includes("-")&&i++;i<t.length&&t[i].trim().startsWith("|");){const c={type:"tableRow",children:t[i].trim().split("|").filter((y,m,S)=>!(m===0&&y===""||m===S.length-1&&y==="")).map(y=>y.trim()).map(y=>({type:"tableCell",children:this.parseInline(y),isHeader:!1}))};d.children.push(c),i++}n.children.push(d);continue}if(this.matchTaskListLine(r)||this.matchOrderedListLine(r)||this.matchUnorderedListLine(r)){const d=this.parseListBlock(t,i);n.children.push(d.node),i=d.nextIndex;continue}if(s.startsWith(">")){const d={type:"quote",children:[]};for(;i<t.length&&t[i].trim().startsWith(">");){const h=t[i].trim().replace(/^>\s?/,"");d.children.push(...this.parseInline(h)),i++}n.children.push(d);continue}n.children.push({type:"paragraph",children:this.parseInline(r)}),i++}return n}parseInline(o){const t=u(r=>{if(!r)return[];const s=[],a=13;let l="",d=null,h=0;const g=u(()=>{l&&(s.push({type:"text",content:l}),l="",d=null,h=0)},"flush");for(let f=0;f<r.length;f++){const c=r.codePointAt(f);if(c===void 0)break;const y=String.fromCodePoint(c);if(y.length===2&&(f+=1),y===`
`){g(),s.push({type:"text",content:y});continue}if(/\s/.test(y)){d!=="space"&&(g(),d="space"),l+=y;continue}if(/[\u3400-\u9FFF]/.test(y)){d!=="cjk"&&(g(),d="cjk"),l+=y,h+=1,h>=a&&g();continue}d!=="ascii"&&(g(),d="ascii"),l+=y}return g(),s},"splitPlainText"),n=[];let i=o;for(;i.length>0;){const r=i.match(/!\[(.*?)\]\((.*?)\)/),s=i.match(/\[(.*?)\]\((.*?)\)/),a=i.match(/\*\*(.*?)\*\*/),l=i.match(/\*(.*?)\*/),d=i.match(/`(.*?)`/),h=[{type:"image",match:r,index:r==null?void 0:r.index},{type:"link",match:s,index:s==null?void 0:s.index},{type:"bold",match:a,index:a==null?void 0:a.index},{type:"italic",match:l,index:l==null?void 0:l.index},{type:"codeBlock",match:d,index:d==null?void 0:d.index,isInline:!0}].filter(y=>y.match!==null&&y.index!==void 0).sort((y,m)=>y.index-m.index);if(h.length===0){n.push(...t(i));break}const g=h[0],f=g.index,c=g.match[0].length;f>0&&n.push(...t(i.slice(0,f))),g.type==="image"?n.push({type:"image",alt:g.match[1],href:g.match[2]}):g.type==="link"?n.push({type:"link",href:g.match[2],children:[{type:"text",content:g.match[1]}]}):g.type==="bold"?n.push({type:"bold",content:g.match[1]}):g.type==="italic"?n.push({type:"italic",content:g.match[1]}):g.type==="codeBlock"&&n.push({type:"codeBlock",content:g.match[1]}),i=i.slice(f+c)}return n}};u(Di,"MarkdownParser");let Ke=Di;const Ct={inlineWrap:{spacing:0,runSpacing:4},text:{fontSize:14,lineHeight:24},header:{paddingTop:10,paddingBottom:10,fontSize:[28,24,20,16,12,8],lineHeight:[36,32,28,24,20,16],accentBar:void 0},paragraph:{marginBottom:12},list:{marginBottom:12,columnSpacing:6,rowSpacing:10,markerPaddingTop:10,markerSize:6,markerRadius:3},orderedList:{marginBottom:12,columnSpacing:6,rowSpacing:10,numberWidth:22,numberPaddingTop:2,numberFontSize:14,numberLineHeight:24},taskList:{marginBottom:12,columnSpacing:6,rowSpacing:10,checkboxPaddingTop:6,checkboxSize:14,checkboxBorderWidth:1,checkboxBorderRadius:2},quote:{marginBottom:14,borderRadius:6,borderWidth:1,barWidth:4,paddingLeft:12,paddingRight:12,paddingTop:10,paddingBottom:10},codeBlock:{marginBottom:14,borderRadius:8,borderWidth:1,padding:12,fontSize:14,lineHeight:20,fontFamily:"Monaco, Consolas, monospace"},inlineCode:{paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2,fontSize:14,lineHeight:20,fontFamily:"Monaco, Consolas, monospace"},table:{marginBottom:14,borderRadius:8,borderWidth:1,cellPaddingLeft:10,cellPaddingRight:10,cellPaddingTop:8,cellPaddingBottom:8,textFontSize:14,textLineHeight:24,dividerWidth:1},horizontalRule:{paddingTop:12,paddingBottom:12,height:1},image:{width:200,height:150,borderRadius:4,padding:10,textFontSize:14}};function gl(e){var o;return!!e.title||!!e.link||!!e.date||(((o=e.categories)==null?void 0:o.length)??0)>0}u(gl,"hasFrontMatter");const Bi=class Bi extends At{render(){const{categories:o,theme:t}=this.props;return((o==null?void 0:o.length)??0)===0?null:p(at,{spacing:6,children:o.map(n=>p($n,{category:n,theme:t},n))})}};u(Bi,"FrontMatterCategories");let Nn=Bi;const zi=class zi extends At{render(){const{category:o,theme:t}=this.props;return p(B,{color:t.state.hover,borderRadius:999,padding:{left:8,right:8,top:2,bottom:2},children:p(_,{text:o,fontSize:12,lineHeight:16,color:t.text.secondary})})}};u(zi,"FrontMatterCategoryPill");let $n=zi;const Ei=class Ei extends At{render(){const{date:o,theme:t}=this.props;return o?p(_,{text:o,fontSize:12,lineHeight:16,color:t.text.secondary}):null}};u(Ei,"FrontMatterDate");let Kn=Ei;const Wi=class Wi extends At{render(){const{link:o,theme:t}=this.props;return o?p(_,{text:`link: ${o}`,fontSize:12,lineHeight:16,color:t.text.placeholder}):null}};u(Wi,"FrontMatterLink");let Vn=Wi;const Hi=class Hi extends At{render(){const{title:o,theme:t}=this.props;return o?p(_,{text:o,fontSize:28,lineHeight:36,fontWeight:"bold",color:t.text.primary}):null}};u(Hi,"FrontMatterTitle");let jn=Hi;const Oi=class Oi extends At{render(){var i;const{frontMatter:o,theme:t}=this.props,n=!!o.date||(((i=o.categories)==null?void 0:i.length)??0)>0;return p(B,{alignment:"topLeft",children:p(ct,{padding:{bottom:16},children:$(Q,{crossAxisAlignment:U.Start,spacing:10,children:[p(jn,{title:o.title,theme:t}),n?$(at,{spacing:10,children:[p(Kn,{date:o.date,theme:t}),p(Nn,{categories:o.categories,theme:t})]}):null,p(Vn,{link:o.link,theme:t})]})})})}};u(Oi,"FrontMatter");let Yn=Oi;function Oo(e,o){return!e||e.length===0?o:[...e,...o]}u(Oo,"createRendererChain");function Gn(e,o){for(const t of o)if(t.match(e))return t.render(e)}u(Gn,"renderWithChain");function Xt(e){if(e!=null)return String(e)}u(Xt,"ensureKey$1");const ml={match:u(e=>e.node.type===q.Bold,"match"),render:u(e=>{const o=Xt(e.widgetKey);return p(_,{text:e.node.content||"",fontSize:e.style.text.fontSize,lineHeight:e.style.text.lineHeight,fontWeight:"bold",color:e.theme.text.primary},o)},"render")},pl={match:u(e=>e.node.type===q.CodeBlock,"match"),render:u(e=>{const o=Xt(e.widgetKey);return p(B,{color:e.theme.state.hover,children:p(ct,{padding:{left:e.style.inlineCode.paddingLeft,right:e.style.inlineCode.paddingRight,top:e.style.inlineCode.paddingTop,bottom:e.style.inlineCode.paddingBottom},children:p(_,{text:e.node.content||"",fontSize:e.style.inlineCode.fontSize,lineHeight:e.style.inlineCode.lineHeight,fontFamily:e.style.inlineCode.fontFamily,color:e.theme.text.primary})})},o)},"render")},yl={match:u(()=>!0,"match"),render:u(e=>p(_,{text:e.node.content||"",fontSize:e.style.text.fontSize,lineHeight:e.style.text.lineHeight,color:e.theme.text.primary},Xt(e.widgetKey)),"render")},Sl={match:u(e=>e.node.type===q.Image,"match"),render:u(e=>{const o=Xt(e.widgetKey),t=e.node.alt||"";return p(B,{width:e.style.image.width,height:e.style.image.height,color:e.theme.background.surface,borderRadius:e.style.image.borderRadius,children:p(ct,{padding:e.style.image.padding,children:p(_,{text:`[Image: ${t}]`,fontSize:e.style.image.textFontSize,color:e.theme.text.secondary})})},o)},"render")},bl={match:u(e=>e.node.type===q.Italic,"match"),render:u(e=>{const o=Xt(e.widgetKey);return p(_,{text:e.node.content||"",fontSize:e.style.text.fontSize,lineHeight:e.style.text.lineHeight,fontStyle:"italic",color:e.theme.text.primary},o)},"render")};function wl(e,o){return typeof e=="string"&&e?e:typeof o=="string"&&o?o:""}u(wl,"getLinkText");const vl={match:u(e=>e.node.type===q.Link,"match"),render:u(e=>{var a,l;const o=Xt(e.widgetKey),t=wl((l=(a=e.node.children)==null?void 0:a[0])==null?void 0:l.content,e.node.href),n=e.node.href;let i=null,r=!1;const s=u(()=>{n&&window.open(n,"_blank")},"openLink");return p(_,{text:t,fontSize:e.style.text.fontSize,lineHeight:e.style.text.lineHeight,color:e.theme.primary,cursor:"pointer",pointerEvent:"auto",onMouseDown:u(d=>{r=!1,i={x:d.x,y:d.y,t:Date.now()}},"onMouseDown"),onMouseUp:u(d=>{if(!i)return;const h=d.x-i.x,g=d.y-i.y,f=Date.now()-i.t;i=null,h*h+g*g<=9&&f<=600&&(r=!0,s())},"onMouseUp"),onClick:u(()=>{if(r){r=!1;return}s()},"onClick")},o)},"render")},xl={match:u(e=>e.node.type===q.Text,"match"),render:u(e=>{const o=Xt(e.widgetKey);return p(_,{text:e.node.content||"",fontSize:e.style.text.fontSize,lineHeight:e.style.text.lineHeight,color:e.theme.text.primary},o)},"render")},Cl=[xl,ml,bl,pl,vl,Sl,yl];function kl(e){const{node:o,theme:t,style:n,inlineRenderers:i,key:r}=e,s={node:o,theme:t,style:n??Ct,widgetKey:r},a=Oo(i,Cl);return Gn(s,a)}u(kl,"InlineNodeRenderer");function Wt(e){if(e!=null)return String(e)}u(Wt,"ensureKey");function Ve(e){let o="";for(const t of e||[]){if(t.type===q.Text){o+=t.content||"";continue}if(t.type===q.Bold||t.type===q.Italic){o+=t.content||"";continue}if(t.type===q.CodeBlock){o+=t.content||"";continue}if(t.type===q.Link){const n=Ve(t.children);o+=n||t.href||"";continue}if(t.type===q.Image){o+=t.alt||"";continue}t.children&&(o+=Ve(t.children))}return o}u(Ve,"plainText");function Ml({code:e,language:o,theme:t,style:n}){const i=e.split(`
`);return i.length>0&&i[i.length-1]===""&&i.pop(),p(Q,{crossAxisAlignment:U.Start,children:i.map((r,s)=>p(Rl,{line:r,language:o,theme:t,style:n},String(s)))})}u(Ml,"CodeBlockHighlighter");function Rl({line:e,language:o,theme:t,style:n,key:i}){if(!e)return p(B,{height:n.codeBlock.lineHeight});const r=Tl(e,o,t);return p(oi,{spacing:0,children:r.map((s,a)=>p(_,{text:s.content,fontSize:n.codeBlock.fontSize,lineHeight:n.codeBlock.lineHeight,fontFamily:n.codeBlock.fontFamily,color:s.color},`${i||"t"}-${a}`))})}u(Rl,"CodeLineRenderer");function Tl(e,o,t){const n=["const","let","var","function","return","if","else","for","while","class","new","import","from","export"];return e.split(/(\s+|[(){}[\];,.])/).filter(r=>r.length>0).map(r=>n.includes(r)?{content:r,color:t.primary}:r.match(/^["'`].*["'`]$/)?{content:r,color:t.success}:r.match(/^\d+$/)?{content:r,color:t.warning}:{content:r,color:t.text.primary})}u(Tl,"tokenize");function Al(e){if(!e||e.length<=1)return e;const o=[];let t=null;const n=u(i=>{if(i.length===0||/^\s+$/.test(i))return"ws";let r=0;for(;r<i.length;){const s=i.codePointAt(r);if(s===void 0)break;const a=String.fromCodePoint(s);if(/\s/.test(a)||/[A-Za-z0-9]/.test(a)||/[\u3400-\u9FFF]/.test(a))return null;r+=a.length}return"punct"},"getTextKind");for(const i of e){if(i.type!==q.Text){o.push(i),t=null;continue}const r=i.content??"",s=n(r),a=o[o.length-1];if(a&&a.type===q.Text&&s&&t===s){o[o.length-1]={...a,content:(a.content??"")+r};continue}o.push({...i,content:r}),t=s}return o}u(Al,"coalesceInlineTextNodes");function ce({children:e,theme:o,style:t,inlineRenderers:n,keyPrefix:i,pointerEvent:r="auto"}){const s=Al(e);return p(ii,{spacing:t.inlineWrap.spacing,runSpacing:t.inlineWrap.runSpacing,pointerEvent:r,children:s==null?void 0:s.map((a,l)=>p(kl,{node:a,theme:o,style:t,inlineRenderers:n},`${i??"inline"}-${l}`))})}u(ce,"InlineWrap");const Pl={match:u(e=>e.node.type===q.CodeBlock,"match"),render:u(e=>{const o=Wt(e.widgetKey);return p(B,{color:e.theme.component.headerBg,borderRadius:e.style.codeBlock.borderRadius,border:{width:e.style.codeBlock.borderWidth,color:e.theme.border.secondary},margin:{bottom:e.style.codeBlock.marginBottom},children:p(ct,{padding:e.style.codeBlock.padding,children:p(Ml,{code:e.node.content||"",language:e.node.language||"",theme:e.theme,style:e.style})})},o)},"render")},Ll={match:u(()=>!0,"match"),render:u(e=>p(B,{},Wt(e.widgetKey)),"render")},Il={match:u(e=>e.node.type===q.Header,"match"),render:u(e=>{const o=Wt(e.anchorKey??e.widgetKey),t=e.node.level||1,n=Ve(e.node.children),i=Math.min(Math.max(t,1),6)-1,r=e.style.header.fontSize[i]??e.style.text.fontSize,s=e.style.header.lineHeight[i]??e.style.text.lineHeight,a=e.style.header.accentBar,l=!!a&&a.levels.includes(t),d=(a==null?void 0:a.color)??e.theme.primary,h=(a==null?void 0:a.height)??Math.max(0,s-6);return p(ct,{padding:{top:e.style.header.paddingTop,bottom:e.style.header.paddingBottom},children:l?$(at,{crossAxisAlignment:U.Start,spacing:a.gap,children:[p(B,{width:a.width,height:h,color:d,borderRadius:a.radius}),p(_,{text:n,fontSize:r,lineHeight:s,fontWeight:"bold",color:e.theme.text.primary})]}):p(_,{text:n,fontSize:r,lineHeight:s,fontWeight:"bold",color:e.theme.text.primary})},o)},"render")},Fl={match:u(e=>e.node.type===q.HorizontalRule,"match"),render:u(e=>{const o=Wt(e.widgetKey);return p(ct,{padding:{top:e.style.horizontalRule.paddingTop,bottom:e.style.horizontalRule.paddingBottom},children:p(B,{height:e.style.horizontalRule.height,color:e.theme.component.gridLine})},o)},"render")};function Dl(e){return e===q.Text||e===q.Bold||e===q.Italic||e===q.Link||e===q.Image||e===q.CodeBlock}u(Dl,"isInlineNodeType$2");const Bl={match:u(e=>e.node.type===q.List,"match"),render:u(e=>{var i;const o=Wt(e.widgetKey),t=e.depth,n=e.style.list.markerSize+e.style.list.rowSpacing;return p(ct,{padding:{left:n*t,bottom:t===0?e.style.list.marginBottom:0},children:p(Q,{crossAxisAlignment:U.Start,spacing:e.style.list.columnSpacing,children:(i=e.node.children)==null?void 0:i.map((r,s)=>{const a=r.children??[],l=a.filter(h=>Dl(h.type)),d=a.filter(h=>h.type===q.List||h.type===q.OrderedList||h.type===q.TaskList);return $(Q,{crossAxisAlignment:U.Start,spacing:e.style.list.columnSpacing,children:[$(at,{crossAxisAlignment:U.Start,spacing:e.style.list.rowSpacing,children:[p(ct,{padding:{top:e.style.list.markerPaddingTop},children:p(B,{width:e.style.list.markerSize,height:e.style.list.markerSize,color:e.theme.text.primary,borderRadius:e.style.list.markerRadius})}),p(zt,{flex:{flex:1},children:p(ce,{theme:e.theme,style:e.style,inlineRenderers:e.inlineRenderers,children:l,keyPrefix:`${o??"ul"}-li-${s}`})})]}),d.map((h,g)=>e.renderBlock({node:h,depth:t+1,widgetKey:`${o??"ul"}-li-${s}-b-${g}`}))]},String(s))})})},o)},"render")};function zl(e){return e===q.Text||e===q.Bold||e===q.Italic||e===q.Link||e===q.Image||e===q.CodeBlock}u(zl,"isInlineNodeType$1");const El={match:u(e=>e.node.type===q.OrderedList,"match"),render:u(e=>{var i;const o=Wt(e.widgetKey),t=e.depth,n=e.style.orderedList.numberWidth+e.style.orderedList.rowSpacing;return p(ct,{padding:{left:n*t,bottom:t===0?e.style.orderedList.marginBottom:0},children:p(Q,{crossAxisAlignment:U.Start,spacing:e.style.orderedList.columnSpacing,children:(i=e.node.children)==null?void 0:i.map((r,s)=>{const a=r.children??[],l=a.filter(h=>zl(h.type)),d=a.filter(h=>h.type===q.List||h.type===q.OrderedList||h.type===q.TaskList);return $(Q,{crossAxisAlignment:U.Start,spacing:e.style.orderedList.columnSpacing,children:[$(at,{crossAxisAlignment:U.Start,spacing:e.style.orderedList.rowSpacing,children:[p(B,{width:e.style.orderedList.numberWidth,padding:{top:e.style.orderedList.numberPaddingTop},children:p(_,{text:`${s+1}.`,fontSize:e.style.orderedList.numberFontSize,lineHeight:e.style.orderedList.numberLineHeight,color:e.theme.text.primary})}),p(zt,{flex:{flex:1},children:p(ce,{theme:e.theme,style:e.style,inlineRenderers:e.inlineRenderers,children:l,keyPrefix:`${o??"ol"}-li-${s}`})})]}),d.map((h,g)=>e.renderBlock({node:h,depth:t+1,widgetKey:`${o??"ol"}-li-${s}-b-${g}`}))]},String(s))})})},o)},"render")},Wl={match:u(e=>e.node.type===q.Paragraph,"match"),render:u(e=>{const o=Wt(e.widgetKey);return p(ct,{padding:{bottom:e.style.paragraph.marginBottom},children:p(ce,{theme:e.theme,style:e.style,inlineRenderers:e.inlineRenderers,children:e.node.children,keyPrefix:`${o??"p"}`})},o)},"render")},Hl={match:u(e=>e.node.type===q.Quote,"match"),render:u(e=>{const o=Wt(e.widgetKey);return p(ct,{padding:{bottom:e.style.quote.marginBottom},children:p(B,{color:e.theme.component.headerBg,borderRadius:e.style.quote.borderRadius,border:{width:e.style.quote.borderWidth,color:e.theme.border.secondary},children:$(at,{crossAxisAlignment:U.Stretch,children:[p(B,{width:e.style.quote.barWidth,color:e.theme.primary}),p(ct,{padding:{left:e.style.quote.paddingLeft,top:e.style.quote.paddingTop,bottom:e.style.quote.paddingBottom,right:e.style.quote.paddingRight},children:p(ce,{theme:e.theme,style:e.style,inlineRenderers:e.inlineRenderers,children:e.node.children})})]})})},o)},"render")},Ol={match:u(e=>e.node.type===q.Table,"match"),render:u(e=>{var r;const o=Wt(e.widgetKey),t=e.style.table.textFontSize,n=e.style.table.textLineHeight,i={...e.style,text:{fontSize:t,lineHeight:n}};return p(ct,{padding:{bottom:e.style.table.marginBottom},children:p(B,{borderRadius:e.style.table.borderRadius,border:{width:e.style.table.borderWidth,color:e.theme.component.gridLine},children:p(Q,{children:(r=e.node.children)==null?void 0:r.map((s,a)=>{var f;const l=s.children??[],d=a===(((f=e.node.children)==null?void 0:f.length)??0)-1,h=a===0&&l.some(c=>c.isHeader),g=l.flatMap((c,y)=>{const m=y===l.length-1,S=p(zt,{flex:{flex:1},children:p(ct,{padding:{left:e.style.table.cellPaddingLeft,right:e.style.table.cellPaddingRight,top:e.style.table.cellPaddingTop,bottom:e.style.table.cellPaddingBottom},children:p(oi,{spacing:0,runSpacing:4,children:c.isHeader?p(_,{text:Ve(c.children),fontSize:t,lineHeight:n,fontWeight:"bold",color:e.theme.text.primary}):p(ce,{theme:e.theme,style:i,inlineRenderers:e.inlineRenderers,children:c.children,keyPrefix:`${o??"table"}-${a}-${y}`})})})},`cell-${y}`);return m?[S]:[S,p(B,{width:e.style.table.dividerWidth,color:e.theme.component.gridLine},`divider-${y}`)]});return p(B,{color:h?e.theme.component.headerBg:a%2===0?e.theme.background.base:e.theme.background.surface,children:$(Q,{children:[p(at,{children:g}),d?null:p(B,{height:e.style.table.dividerWidth,color:e.theme.component.gridLine})]})},String(a))})})})},o)},"render")};function _l(e){return e===q.Text||e===q.Bold||e===q.Italic||e===q.Link||e===q.Image||e===q.CodeBlock}u(_l,"isInlineNodeType");const Nl={match:u(e=>e.node.type===q.TaskList,"match"),render:u(e=>{var i;const o=Wt(e.widgetKey),t=e.depth,n=e.style.taskList.checkboxSize+e.style.taskList.rowSpacing;return p(ct,{padding:{left:n*t,bottom:t===0?e.style.taskList.marginBottom:0},children:p(Q,{crossAxisAlignment:U.Start,spacing:e.style.taskList.columnSpacing,children:(i=e.node.children)==null?void 0:i.map((r,s)=>{const a=r.children??[],l=a.filter(h=>_l(h.type)),d=a.filter(h=>h.type===q.List||h.type===q.OrderedList||h.type===q.TaskList);return $(Q,{crossAxisAlignment:U.Start,spacing:e.style.taskList.columnSpacing,children:[$(at,{crossAxisAlignment:U.Start,spacing:e.style.taskList.rowSpacing,children:[p(ct,{padding:{top:e.style.taskList.checkboxPaddingTop},children:p(B,{width:e.style.taskList.checkboxSize,height:e.style.taskList.checkboxSize,border:{width:e.style.taskList.checkboxBorderWidth,color:e.theme.border.base},borderRadius:e.style.taskList.checkboxBorderRadius,color:r.checked?e.theme.primary:e.theme.background.base})}),p(zt,{flex:{flex:1},children:p(ce,{theme:e.theme,style:e.style,inlineRenderers:e.inlineRenderers,children:l,keyPrefix:`${o??"task"}-li-${s}`})})]}),d.map((h,g)=>e.renderBlock({node:h,depth:t+1,widgetKey:`${o??"task"}-li-${s}-b-${g}`}))]},String(s))})})},o)},"render")},$l=[Il,Wl,Pl,Hl,Bl,El,Nl,Ol,Fl,Ll];function Kl(e){const{node:o,theme:t,style:n,inlineRenderers:i,anchorKey:r,depth:s,blockRenderers:a,key:l}=e,d=Oo(a,$l),h=u(f=>{const c={node:f.node,theme:t,style:n??Ct,inlineRenderers:i,anchorKey:f.anchorKey,depth:f.depth,renderBlock:h,widgetKey:f.widgetKey};return Gn(c,d)??p(B,{})},"renderBlock");return Gn({node:o,theme:t,style:n??Ct,inlineRenderers:i,anchorKey:r,depth:s??0,renderBlock:h,widgetKey:l},d)??p(B,{})}u(Kl,"BlockNodeRenderer");const _i=class _i extends At{render(){var l;const{ast:o,theme:t,headerKeyPrefix:n,style:i,inlineRenderers:r,blockRenderers:s}=this.props;let a=0;return p(Q,{crossAxisAlignment:U.Start,mainAxisAlignment:wt.Start,mainAxisSize:it.Min,children:(l=o.children)==null?void 0:l.map((d,h)=>p(Kl,{node:d,theme:t,style:i,inlineRenderers:r,blockRenderers:s,anchorKey:d.type===q.Header?`${n}-${a++}`:void 0},String(h)))})}};u(_i,"MarkdownBody");let Xn=_i;const Vl=new Ke,Ni=class Ni extends At{render(){const{content:o,theme:t,ast:n,headerKeyPrefix:i,style:r,inlineRenderers:s,blockRenderers:a}=this.props,{frontMatter:l,body:d}=ri(o),h=n??Vl.parse(d),g=i??`${this.key||"md"}-h`,f=gl(l);return $(Q,{crossAxisAlignment:U.Start,mainAxisAlignment:wt.Start,mainAxisSize:it.Min,children:[f?p(Yn,{frontMatter:l,theme:t}):null,p(Xn,{ast:h,theme:t,headerKeyPrefix:g,style:r??Ct,inlineRenderers:s,blockRenderers:a})]})}};u(Ni,"MarkdownPreview");let Ce=Ni;const _o="/assets/avator.CNjih69y.jpeg",je=780,Un="inkwell:resume-unlock",qn=`\`\`\`resume-profile
name: 李健乐
title: 前端工程师（编辑器 / 渲染 / 工程化 / AIGC 应用）
tag: 赛博奴隶主 / 编码深度爱好者 / 长期主义
avatar: src/demo/resume/assets/avator.jpeg
contacts: 18410225473, edeity.fly@gmail.com, ede.ink
\`\`\`

## 核心竞争力

- 精通 **Web 编辑器**各类场景：文档、表格、图文等复杂交互与工程落地
- 熟悉 **浏览器渲染原理**与**性能优化**：参与多个**百万 DAU 级**重交互场景的性能治理
- 了解 **AIGC 应用落地**：参与扩散模型与 LLM Agent 场景工程化落地
- 具备 **体系化** 的工程思想，**跨端渲染框架**研发与落地经验

## 工作经历

**字节跳动** · 前端工程师（头条 / 飞书 / TikTok 国际电商）
*2021.05 - 至今*

- 工作表现：职级 **2-2**（入职至今）；21、22 年度绩效 **M**；23、24 年度绩效 **M+**
- TikTok 国际电商（2024~2025）：主导 **AIGC 图文**、参与 **Agent** 方向工程落地
- 飞书 / Base（2022~2024）：参与 **Faster** 框架建设；主导 Base 看板升级 Faster 2.0
- 头条 (2021)：基于 **ProseMirror** 建设创作者工具；推动开源 **Syllepsis**；组织对外分享与高校合作

**金山办公（WPS）** · 前端工程师（编辑器方向）
*2018.10 - 2021.05*

- 工作表现：职级 类 P6，18、19 年度绩效 B；20 年度绩效 A
- 从 0 到 1 参与两款编辑器类应用：文字（Web-Office Word、自排自绘）与文档（Notion-like、基于 Prosemirror），WebOffice 套件高峰月活过亿，完成多个编辑器场景功能开发，攻克 DOM **长文档虚拟滚动**， **光标选区一致性** 等难题，主导 文字 OpenSDK 建设
- 性能：建设TTV、TTI 看板，解决 ESM 包体积治理 **-6%**，引入 chunk 分级机制和属性缓存，首屏优化约 **200ms**

**Banggood** · 前端工程师
*2018.03 - 2018.10*

- 基于 Vue 的移动商城开发与迭代

**用友** · 前端工程师
*2016.07 - 2018.02*

- 参与预算多维合并报表工程，开发前端表格单据模板和表格套件

## 项目经历

### AIGC 图文生成链路｜电商业务落地 2024 ~ 2025

- 目标：把设计稿意图变成可规模化的“运营图文产物”（如商详图），降低运营制作成本
- 技术建设：完成 设计稿 → JSON Schema 模板 预览编辑成图链路
  - 协议与生产：梳理图文协议与模板规范；编写 **Figma 插件**完成各阶段 Schema 转换；
  - 预览与编辑：基于 **Pixi.js** 自研高性能图文编辑器
  - 模板管理：建设模板上传与生产闭环
  - 成图一致性：封装 SDK，基于 **Puppeteer** 做服务端渲染，解决前后端成图一致性
  - 接入与交付：完成 **Node BFF** 开发、SDK 封装与接入治理，支撑业务侧规模化接入与迭代
- 量化收益：图模板素材 **1000+**；渲染器调用 500W+；设计耗时 **0.5 人天 / 套 → 0.5h / 套**，整体提效 **400%+**
- 交付质量：支撑电商图文 SaaS 的阶段性正向价值回收；覆盖高 ASP（8k~16k）商品关键链路并实现正向收益

### A2UI（对话 → 图谱编排 → JSON → XUI）2025

- 背景：探电商索 NoCode 类场景，Agent 融入 2B 页面生成与交付
- 流程：抽象 B 端基本元素，形成「数据 + 动作」概念，完成 「XUI 输入 → BFF LangGraph 编排 → Schema 生成 → XUI 渲染交互」 生成链路整合
- 职责：负责核价侧链路整合与完整方案落地，验证技术可行性，完成 **MVP** 版本开发


### Faster：Canvas2D 高性能渲染框架｜2022-2024

- 定位：RenderEngine 部门中台框架，支撑 Sheet、Base、People Table 等重交互文档渲染
- 能力建设：Build（React-like JSX 与状态）、Layout（Flutter-like 约束布局，支持弹性/表格/虚拟滚动，典型场景表格渲染相较 DOM 提升 **100%+**）、Paint（离屏渲染与合批）
- 质量体系：建设 **Devtools** 与 **E2E** 质量工具，推动业务侧 E2E 落地；引入 Jest + Storybook + E2E 的自动化回归体系，单测覆盖率 **80%**
- 业务落地：推动 多维报表 PC 看板升级 Faster 2.0，灰度到 GA；上线后保持高质量（无 P0/P1），并进一步收敛相关链路的 OnCall（周均 1 次下降为月均 1 次）
- 性能体系：对齐线上监控与指标看板，完善帧率/低帧（**jank frame**）等口径；推进移动端 **FPS** 性能实验与优化探索
- 团队建设：组织部门内分享，自身多次技术分享并邀请外部嘉宾分享，提升内部技术氛围与团队技术素养

### Syllepsis｜PGC 创作者工具开源 | 2021

- 目标：建设 PGC 创作者编辑能力（类秀米），提升内容排版与生产效率
- 技术：ProseMirror 二次封装；Block 化插件体系；基于 Myers 算法实现无时序的增量更新，单次更新体积减少 90%
- 影响：开源为 Syllepsis；支撑多团队使用；北大软微校企合作推进插件孵化与落地

### 个人近期项目｜AI 相关

- Faster 框架 从 0 到 1 复刻与验证: https://inkwell.ede.ink
  - 出发点：探索 Vibe + Spec AI Coding 能力边界
- 港科大科研合作：视频模板，3D Proxy × DiT 可控视频方向原型
  - 出发点：了解 图形学 + AIGC 科研前沿工作，探索科研工程落地可能
- 北理工科研项目指导：指导研究生同学完成新闻数据挖掘 + Agent科研项目微服务架构设计
  - 出发点：补齐个人项目管理能力短板

## 教育背景

**山东大学**（985，QS 339） · 软件工程（本科）· *2012.09 - 2016.06*


## 其他经历

- 高校合作：头条期间，作为编辑器 Mentor 指导北大学生进行编辑器插件开发，获“高校优秀导师”
`,te={xs:8,sm:16,md:24,lg:32,xl:48,xxl:64};function No(e){return{xs:Math.round(te.xs*e),sm:Math.round(te.sm*e),md:Math.round(te.md*e),lg:Math.round(te.lg*e),xl:Math.round(te.xl*e),xxl:Math.round(te.xxl*e)}}u(No,"createSpaceTokens");const si=No(1),ai=No(.8);function $o(e){return{...Ct,inlineWrap:{...Ct.inlineWrap,runSpacing:e.xs},text:{fontSize:14,lineHeight:22},header:{...Ct.header,paddingTop:e.sm,paddingBottom:e.sm,fontSize:[22,16,14,13,12,12],lineHeight:[30,22,20,20,18,18],accentBar:{levels:[1,2],width:4,height:20,gap:e.sm,radius:2}},paragraph:{marginBottom:e.md},list:{...Ct.list,marginBottom:e.md,columnSpacing:e.xs,rowSpacing:e.sm,markerPaddingTop:e.xs,markerSize:4,markerRadius:2},orderedList:{...Ct.orderedList,marginBottom:e.md,columnSpacing:e.xs,rowSpacing:e.sm,numberWidth:20,numberPaddingTop:0,numberFontSize:13,numberLineHeight:20},taskList:{...Ct.taskList,marginBottom:e.md,columnSpacing:e.xs,rowSpacing:e.sm,checkboxPaddingTop:3,checkboxSize:12},quote:{...Ct.quote,marginBottom:e.md,paddingTop:e.sm,paddingBottom:e.sm},codeBlock:{...Ct.codeBlock,marginBottom:e.md,padding:e.sm,fontSize:13,lineHeight:18},inlineCode:{...Ct.inlineCode,fontSize:13,lineHeight:18},table:{...Ct.table,marginBottom:e.md,cellPaddingTop:e.xs,cellPaddingBottom:e.xs,textFontSize:13,textLineHeight:20}}}u($o,"createResumeMarkdownStyle");const jl=$o(si),Yl=$o(ai),Co=[{match:u(e=>e.node.type===q.Italic,"match"),render:u(e=>p(_,{text:e.node.content||"",fontSize:e.style.text.fontSize,lineHeight:e.style.text.lineHeight,color:e.theme.text.secondary},String(e.widgetKey??"")),"render")}];function Gl(e){const o={links:[],contacts:[]},t=e.split(/\r?\n/).map(i=>i.trim()).filter(i=>i.length>0),n=/(name|title|tag|avatar|links|contacts)\s*:/g;for(const i of t){const r=Array.from(i.matchAll(n));if(r.length!==0)for(let s=0;s<r.length;s++){const a=r[s],l=String(a[1]),d=(a.index??0)+a[0].length,h=s+1<r.length?r[s+1].index??i.length:i.length,g=i.slice(d,h).trim();if(g){if(l==="name"){o.name=g;continue}if(l==="title"){o.title=g;continue}if(l==="tag"){o.tag=g;continue}if(l==="avatar"){o.avatar=g;continue}if(l==="links"){const f=g.split(",").map(c=>c.trim()).filter(Boolean);for(const c of f){const[y,m]=c.split("|").map(v=>v.trim()),S=y||m;S&&o.links.push({label:S,href:m||void 0})}continue}if(l==="contacts"){const f=g.split(/[,，]/).flatMap(c=>c.split("·")).map(c=>c.trim()).filter(Boolean);o.contacts.push(...f);continue}}}}return o}u(Gl,"parseResumeProfileBlock");function Ko(e){return[{match:u(o=>o.node.type===q.CodeBlock&&o.node.language==="resume-profile","match"),render:u(o=>{var f;const t=String(o.widgetKey??""),n=Gl(o.node.content||"");let i=n.avatar;n.avatar==="src/demo/resume/assets/avator.jpeg"||n.avatar==="/src/demo/resume/assets/avator.jpeg"?i=_o:(f=n.avatar)!=null&&f.startsWith("src/")&&(i=`/${n.avatar}`);const r=22,s=30,a=14,l=22,d=92,h=d/2,g=n.contacts.map(c=>({kind:"contact",value:c}));return g.push(...n.links.map(c=>({kind:"link",value:c}))),p(ct,{padding:{bottom:e.lg},children:$(at,{crossAxisAlignment:U.Start,spacing:e.sm,children:[p(zt,{flex:{flex:1},children:$(Q,{crossAxisAlignment:U.Start,spacing:e.xs,children:[n.name||n.title?$(at,{crossAxisAlignment:U.Center,spacing:e.xs,children:[n.name?p(_,{text:n.name,fontSize:r,lineHeight:s,fontWeight:"bold",color:o.theme.text.primary},"name"):null,n.name&&n.title?p(_,{text:"·",fontSize:r,lineHeight:s,color:o.theme.text.primary},"dot"):null,n.title?p(zt,{flex:{flex:1},children:p(_,{text:n.title,fontSize:16,lineHeight:s,fontWeight:"bold",color:o.theme.text.primary,maxLines:1,overflow:Zi.Ellipsis},"title")}):null]}):null,n.tag?p(_,{text:n.tag,fontSize:a,lineHeight:l,color:o.theme.text.secondary,fontStyle:"italic",maxLines:1,overflow:Zi.Ellipsis},"tag"):null,g.length>0?p(oi,{spacing:e.xs,runSpacing:e.sm,children:g.map((c,y)=>c.kind==="contact"?p(_,{text:c.value,fontSize:a,lineHeight:l,color:o.theme.text.secondary},`contact-${y}`):p(_,{text:c.value.label,fontSize:a,lineHeight:l,color:o.theme.primary,textDecoration:"underline",cursor:c.value.href?"pointer":void 0,pointerEvent:c.value.href?"auto":"none",onClick:u(()=>{c.value.href&&window.open(c.value.href,"_blank")},"onClick")},`link-${y}`))}):null]})}),p(B,{width:d,height:d,borderRadius:h,color:o.theme.background.base,border:{width:1,color:o.theme.border.base},children:i?p(ni,{borderRadius:h,children:p(yr,{type:"image",src:i,width:d,height:d,fit:Sr.Cover},"avatar")}):null})]})},t)},"render")}]}u(Ko,"createResumeBlockRenderers");const Xl=Ko(si),Ul=Ko(ai),$i=class $i extends At{render(){var y,m,S,v;const{width:o,height:t,theme:n,mode:i="view"}=this.props,r=A(n.text.primary,.06),s=A(n.text.primary,.22),a=A(n.text.primary,.32),l=A(n.text.primary,.44),d=i==="view"&&o<480,h=d?ai:si,g=i==="export"?je:Math.min(je,Math.max(320,Math.floor(o)-h.lg*2)),f=d?Yl:jl,c=d?Ul:Xl;return i==="export"?p(B,{color:((y=n==null?void 0:n.background)==null?void 0:y.base)??w.light.background.base,padding:[h.lg,h.lg],children:p(B,{width:g,color:((m=n==null?void 0:n.background)==null?void 0:m.surface)??w.light.background.surface,borderRadius:12,padding:[h.xxl],children:p(Ce,{content:String(qn),theme:n||w.light,style:f,inlineRenderers:Co,blockRenderers:c},"resume-md")},"resume-page")}):p(jt,{width:o,height:t,scrollBarTrackColor:r,scrollBarColor:s,scrollBarHoverColor:a,scrollBarActiveColor:l,children:p(B,{minWidth:o,alignment:"center",color:((S=n==null?void 0:n.background)==null?void 0:S.base)??w.light.background.base,children:p(B,{width:g,color:((v=n==null?void 0:n.background)==null?void 0:v.surface)??w.light.background.surface,borderRadius:12,padding:[h.xxl],margin:[h.lg,0],children:p(Ce,{content:String(qn),theme:n||w.light,style:f,inlineRenderers:Co,blockRenderers:c},"resume-md")},"resume-page")})},"resume-root-scroll")}};u($i,"ResumeDemoApp");let ke=$i;function ql(e){const o=new Uint8Array(e);let t="";for(let n=0;n<o.length;n++)t+=o[n].toString(16).padStart(2,"0");return t}u(ql,"bytesToHex");async function Jl(e){var i;const o=new TextEncoder().encode(e),t=(i=globalThis.crypto)==null?void 0:i.subtle;if(!t)throw new Error("当前环境不支持加密校验");const n=await t.digest("SHA-256",o);return ql(n)}u(Jl,"sha256Hex");const qe=class qe extends ae{constructor(t){super({...t,__inkwellType:"BlurBoundary"});b(this,"lastEnabled",!1);b(this,"lastCaptureAt",-1);b(this,"throttleTimer",null);b(this,"pendingTrailingCapture",!1);b(this,"sourceLayer",null);b(this,"downsampleLayer",null);b(this,"blurredLayer",null);b(this,"cacheRadius",0);b(this,"cacheKey");b(this,"cacheDpr",1);b(this,"cacheWidth",0);b(this,"cacheHeight",0);b(this,"cacheValid",!1);b(this,"sourcePaintStamp",0);b(this,"blurredFromSourcePaintStamp",-1)}dispose(){this.throttleTimer!==null&&(clearTimeout(this.throttleTimer),this.throttleTimer=null),super.dispose()}performLayout(t,n){if(n.length>0)return n[0];const i=Number.isFinite(t.maxWidth)?t.maxWidth:0,r=Number.isFinite(t.maxHeight)?t.maxHeight:0;return{width:i,height:r}}invalidateCache(){this.cacheValid=!1,this.cacheRadius=0,this.cacheKey=void 0,this.lastCaptureAt=-1,this.pendingTrailingCapture=!1,this.blurredFromSourcePaintStamp=-1}static normalizeRect(t){const n=Math.floor(t.x),i=Math.floor(t.y),r=Math.ceil(t.x+t.width),s=Math.ceil(t.y+t.height);return{x:n,y:i,width:Math.max(0,r-n),height:Math.max(0,s-i)}}createCanvasBundle(t,n){if(t<=0||n<=0)return null;if(typeof OffscreenCanvas=="function"){const i=new OffscreenCanvas(t,n),r=i.getContext("2d");return r?{canvas:i,ctx:r,width:t,height:n}:null}if(typeof document<"u"){const i=document.createElement("canvas");i.width=t,i.height=n;const r=i.getContext("2d");return r?{canvas:i,ctx:r,width:t,height:n}:null}return null}ensureBundle(t,n,i){return n<=0||i<=0?null:t&&t.width===n&&t.height===i?t:this.createCanvasBundle(n,i)}scheduleTrailingCapture(t){this.throttleTimer!==null||this.pendingTrailingCapture||(this.pendingTrailingCapture=!0,typeof setTimeout=="function"&&(this.throttleTimer=setTimeout(()=>{this.throttleTimer=null,this.pendingTrailingCapture=!1,!this._disposed&&this.markNeedsPaint()},Math.max(0,t))))}paint(t){var X,K,tt;const n=typeof t.opacity=="number"?t.opacity:1;let i=typeof this.props.opacity=="number"?this.props.opacity:1;isFinite(i)||(i=1),i<0?i=0:i>1&&(i=1);const r=n*i,s=r===n?t:{...t,opacity:r},a=this.props.enabled===!0,l=typeof this.props.radius=="number"?this.props.radius:10,d=this.props.cacheKey,h=this.props.throttleMs,g=typeof h=="number"&&isFinite(h)?Math.max(0,h):120;if(!a){this.isRepaintBoundary=!1,this.lastEnabled&&this.invalidateCache(),this.lastEnabled=!1,this._performPaint(s),this._needsPaint=!1;return}this.isRepaintBoundary=!0;const f=this.getSelfTransformSteps(),c=t.worldMatrix??Qi,y=f.length===1&&f[0].t==="translate"?br(c,f[0].x,f[0].y):wr(c,vr(f)),m=this.getBoundingBox(y),S=qe.normalizeRect(m);if(t.dirtyRect){const G=t.dirtyRect;if(S.x>G.x+G.width||S.x+S.width<G.x||S.y>G.y+G.height||S.y+S.height<G.y)return}const v=s.renderer,x=v.getResolution?v.getResolution():1,T=Math.max(0,this.renderObject.size.width),k=Math.max(0,this.renderObject.size.height),C=Math.max(1,Math.ceil(T*x)),R=Math.max(1,Math.ceil(k*x)),M=.25,L=Math.max(1,Math.ceil(C*M)),I=Math.max(1,Math.ceil(R*M)),D=Math.max(0,l*M),H=this.cacheValid&&this.lastEnabled&&this.cacheWidth===C&&this.cacheHeight===R&&this.cacheDpr===x&&this.cacheRadius===l&&this.cacheKey===d,F=typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now(),j=s.enableOffscreenRendering!==!1&&!!this.runtime&&typeof this.runtime.getRenderer=="function";let V=null;if(j){const G=this._layer!==null,ot=G&&(this._layer.canvas.width!==C||this._layer.canvas.height!==R),rt=this._needsPaint||!G||ot;ot&&(this._needsPaint=!0),this.updateLayer(),rt&&this._layer&&this.sourcePaintStamp++,V=((X=this._layer)==null?void 0:X.canvas)??null}if(!j){this._updateChildrenMatrices(y);const G=this.sourceLayer!==null,ot=G&&(this.sourceLayer.width!==C||this.sourceLayer.height!==R);this.sourceLayer=this.ensureBundle(this.sourceLayer,C,R);const rt=this._needsPaint||!G||ot;if(this.sourceLayer&&rt){const dt=this.sourceLayer.ctx;dt.setTransform(1,0,0,1,0,0),dt.globalAlpha=1,dt.filter="none",dt.clearRect(0,0,C,R),dt.save(),dt.scale(x,x);const bt=v.constructor,ft=new bt;ft.setContext(dt),this._performPaint({...s,renderer:ft,worldMatrix:Qi,dirtyRect:void 0,opacity:1},{dx:0,dy:0}),dt.restore(),this.sourcePaintStamp++}V=((K=this.sourceLayer)==null?void 0:K.canvas)??null}const O=!H||this.blurredFromSourcePaintStamp!==this.sourcePaintStamp||!this.blurredLayer||!this.downsampleLayer,W=this.cacheWidth!==C||this.cacheHeight!==R||this.cacheDpr!==x,N=O&&W&&g>0&&this.cacheValid&&this.lastCaptureAt>=0&&F-this.lastCaptureAt<g;if(N&&this.scheduleTrailingCapture(this.lastCaptureAt+g-F),j&&!V&&this._updateChildrenMatrices(y),!N&&O&&V&&(this.downsampleLayer=this.ensureBundle(this.downsampleLayer,L,I),this.blurredLayer=this.ensureBundle(this.blurredLayer,C,R),this.downsampleLayer&&this.blurredLayer)){const G=this.downsampleLayer.ctx;G.setTransform(1,0,0,1,0,0),G.globalAlpha=1,G.filter="none",G.clearRect(0,0,L,I),G.imageSmoothingEnabled=!0,G.save(),G.filter=`blur(${D}px)`,G.drawImage(V,0,0,L,I),G.restore();const ot=this.blurredLayer.ctx;ot.setTransform(1,0,0,1,0,0),ot.globalAlpha=1,ot.filter="none",ot.clearRect(0,0,C,R),ot.imageSmoothingEnabled=!0,ot.drawImage(this.downsampleLayer.canvas,0,0,L,I,0,0,C,R),this.cacheWidth=C,this.cacheHeight=R,this.cacheDpr=x,this.cacheRadius=l,this.cacheKey=d,this.cacheValid=!0,this.lastCaptureAt=F,this.blurredFromSourcePaintStamp=this.sourcePaintStamp}if(this.cacheValid&&this.blurredLayer){v.save();try{xr(v,f),r!==1&&((tt=v.setGlobalAlpha)==null||tt.call(v,r)),v.drawImage({image:this.blurredLayer.canvas,x:0,y:0,width:T,height:k})}finally{v.restore()}}this._needsPaint=!1,this.lastEnabled=!0}};u(qe,"BlurBoundary");let Ye=qe;const Zl="99f1e14363b74a463ffb12d216b5d1864555b0103af6f69a76d16fe1dcd26238",Ki=class Ki extends Pt{constructor(){super(...arguments);b(this,"state",{locked:!0,password:"",error:"",verifying:!1});b(this,"clearPassword",u(()=>{this.state.verifying||this.setState({password:"",error:""})},"clearPassword"));b(this,"verifyPassword",u(()=>{if(this.state.verifying)return;const t=(this.state.password??"").trim();if(!t){this.setState({error:"请输入密码"});return}this.setState({verifying:!0,error:""}),(async()=>{try{if(await Jl(t)===Zl){if(yn.set("1"),typeof window<"u")try{window.dispatchEvent(new CustomEvent(Un))}catch{}this.setState({locked:!1,verifying:!1,password:"",error:""});return}this.setState({verifying:!1,error:"密码不正确"})}catch{this.setState({verifying:!1,error:"校验失败，请重试"})}})()},"verifyPassword"))}initWidget(t){super.initWidget(t),this.state.locked=yn.get()!=="1"}render(){const{width:t,height:n,theme:i,mode:r="view"}=this.props,s=this.state.locked,a=s&&r==="view",l=i.border.base,d=i.danger,h=i.text.secondary,g=[r,i.background.base,i.text.primary,i.background.surface].join(":");return a?$(vt,{fit:mn.Expand,alignment:pn.TopLeft,children:[p(Ye,{enabled:s,radius:12,cacheKey:g,children:p(ke,{width:t,height:n,theme:i||w.light,mode:r})}),p(Io,{theme:i,open:!0,width:440,title:"需要密码",maskClosable:!1,okText:this.state.verifying?"校验中…":"解锁",cancelText:"清空",onOk:u(()=>this.verifyPassword(),"onOk"),onCancel:u(()=>this.clearPassword(),"onCancel"),children:$(Q,{spacing:12,crossAxisAlignment:U.Start,mainAxisSize:it.Min,children:[p(_,{text:"内含敏感资料，请输入密码：",fontSize:14,lineHeight:20,color:h}),p(B,{border:{width:1,color:l},borderRadius:10,padding:[10,12],color:i.background.base,children:p(Fo,{inputType:"password",value:this.state.password,placeholder:"密码",color:i.text.primary,cursorColor:i.primary,onChange:u(f=>this.setState({password:f,error:""}),"onChange"),onKeyDown:u(f=>{const c=f.nativeEvent;return(c==null?void 0:c.key)==="Enter"?(this.verifyPassword(),!1):!0},"onKeyDown")},"resume-password-input")},"resume-password-input-shell"),this.state.error?p(_,{text:this.state.error,fontSize:12,lineHeight:18,color:d},"resume-password-error"):null]},"resume-password-body")},"resume-password-modal")]}):p(vt,{fit:mn.Expand,alignment:pn.TopLeft,children:p(Ye,{enabled:s,radius:12,cacheKey:g,children:p(ke,{width:t,height:n,theme:i||w.light,mode:r})})})}};u(Ki,"ResumeProtectedApp");let Jn=Ki;function ln(e,o,t,n){return e.render(p(Jn,{width:o,height:t,theme:n||w.light,mode:"view"}))}u(ln,"runApp$2");function Ql(e,o,t,n){return e.render(p(ke,{width:o,height:t,theme:n||w.light,mode:"export"}))}u(Ql,"runExportApp");function tc(e){const{exporting:o,theme:t,onExport:n}=e,i=u(r=>{const s=ei(),a=t.background.container,l=s==="dark"?"0 12px 28px rgba(0,0,0,0.55)":"0 12px 28px rgba(0,0,0,0.18)";return{padding:"10px 12px",borderRadius:10,border:`1px solid ${t.border.base}`,background:a,color:t.text.primary,boxShadow:l,opacity:r?.6:1,cursor:r?"not-allowed":"pointer"}},"buttonStyle");return E.jsxs("div",{style:{position:"fixed",right:24,bottom:24,display:"flex",gap:10,zIndex:1e3},children:[E.jsx("button",{type:"button",disabled:o,onClick:u(()=>n("png"),"onClick"),style:i(o),children:"导出 PNG"}),E.jsx("button",{type:"button",disabled:o,onClick:u(()=>n("pdf"),"onClick"),style:i(o),children:"导出 PDF"})]})}u(tc,"ExportActions");const ec={key:It.Resume,label:"Resume",description:"基于 Markdown 的简历预览与导出示例。"};function nc(e){const o=atob(e),t=new Uint8Array(o.length);for(let n=0;n<o.length;n++)t[n]=o.charCodeAt(n);return t}u(nc,"decodeBase64ToBytes");function ic(e){const{jpeg:o,imageWidth:t,imageHeight:n,pageWidthPt:i,pageHeightPt:r}=e,s=new TextEncoder,a=[],l=[0];let d=0;const h=u(R=>{a.push(R),d+=R.length},"pushBytes"),g=u(R=>h(s.encode(R)),"pushStr"),f=u(()=>l.push(d),"startObj"),c=new Uint8Array([37,80,68,70,45,49,46,52,10,37,226,227,207,211,10]);h(c),f(),g(`1 0 obj
<< /Type /Catalog /Pages 2 0 R >>
endobj
`),f(),g(`2 0 obj
<< /Type /Pages /Kids [3 0 R] /Count 1 >>
endobj
`);const y=i.toFixed(2),m=r.toFixed(2);f(),g([`3 0 obj
<< /Type /Page /Parent 2 0 R /Resources << /XObject << /Im0 4 0 R >> `,`/ProcSet [/PDF /ImageC] >> /MediaBox [0 0 ${y} ${m}] `,`/Contents 5 0 R >>
endobj
`].join("")),f();const S=`4 0 obj
<< /Type /XObject /Subtype /Image /Name /Im0 /Filter /DCTDecode /Width ${t} /Height ${n} /ColorSpace /DeviceRGB /BitsPerComponent 8 /Length ${o.length} >>
stream
`;g(S),h(o),g(`
endstream
endobj
`);const v=s.encode(`q
${y} 0 0 ${m} 0 0 cm
/Im0 Do
Q
`);f(),g(`5 0 obj
<< /Length ${v.length} >>
stream
`),h(v),g(`endstream
endobj
`);const x=d,T=5;g(`xref
0 ${T+1}
0000000000 65535 f 
`);for(let R=1;R<=T;R++){const M=l[R];g(`${String(M).padStart(10,"0")} 00000 n 
`)}g(`trailer
<< /Size ${T+1} /Root 1 0 R >>
startxref
${x}
%%EOF
`);const k=new Uint8Array(d);let C=0;for(const R of a)k.set(R,C),C+=R.length;return k}u(ic,"buildPdfWithJpeg");function oc(e,o){const t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=o,n.rel="noopener",n.style.display="none",document.body.appendChild(n),n.click(),n.remove(),setTimeout(()=>URL.revokeObjectURL(t),3e4)}u(oc,"downloadBlob");function rc(){var e,o;try{return typeof window<"u"&&((o=(e=window.location)==null?void 0:e.pathname)==null?void 0:o.startsWith("/docs/"))}catch{return!1}}u(rc,"isDocsEnv");async function sc(e,o,t){const n=window;if(typeof n.showSaveFilePicker!="function")return null;const i={[o]:t};return n.showSaveFilePicker({suggestedName:e,types:[{description:e,accept:i}]})}u(sc,"tryPickSaveHandle");async function ko(e,o,t){if(t){const n=t;if(typeof n.createWritable=="function"){const i=await n.createWritable();await i.write(e),await i.close();return}}oc(e,o)}u(ko,"saveBlobPreferPicker");function Ge(){return new Promise(e=>requestAnimationFrame(()=>e()))}u(Ge,"waitNextFrame");function ac(e,o){let t;return new Promise((n,i)=>{t=window.setTimeout(()=>i(new Error("等待超时")),o),e.then(n,i).finally(()=>{t!==void 0&&clearTimeout(t)})})}u(ac,"withTimeout");async function lc(){const e=document.fonts;if(e)try{await ac((async()=>{await Promise.all([e.load('12px "Noto Sans SC"'),e.load('14px "Noto Sans SC"'),e.load('16px "Noto Sans SC"'),e.load('22px "Noto Sans SC"')]),await e.ready})(),2e3)}catch{}}u(lc,"waitFontsReady");async function cc(e){const o=Array.from(new Set(e.filter(Boolean)));o.length!==0&&await Promise.allSettled(o.map(t=>new Promise(n=>{const i=new window.Image;i.onload=()=>n(),i.onerror=()=>n(),i.src=t})))}u(cc,"preloadImages");function hc(e){const o=[],t=[e];for(;t.length;){const n=t.shift();o.push(n);for(const i of n.children)t.push(i)}return o}u(hc,"collectDescendants");async function dc(e,o){const t=performance.now();for(;;){const n=e.getRootWidget();if(!n){if(await Ge(),performance.now()-t>o)return;continue}if(!hc(n).some(s=>{if(s.type!=="Image")return!1;const a=s;return a.src?a.imageLoaded!==!0:!1})||performance.now()-t>o)return;await Ge()}}u(dc,"waitRuntimeImagesLoaded");function uc(e){const o=e.match(/^\s*avatar\s*:\s*(.+?)\s*$/m),t=((o==null?void 0:o[1])??"").trim();if(t)return t==="src/demo/resume/assets/avator.jpeg"||t==="/src/demo/resume/assets/avator.jpeg"?_o:t.startsWith("src/")?`/${t}`:t}u(uc,"resolveProfileAvatarSrc");function fc(e){const o=[],t=uc(e);t&&o.push(t);const n=/!\[[^\]]*?\]\((.*?)\)/g;for(;;){const i=n.exec(e);if(!i)break;const r=String(i[1]??"").trim();r&&o.push(r.startsWith("src/")?`/${r}`:r)}return o}u(fc,"collectMarkdownImageSrcs");function gc(){const e=Tt(),o=P.useRef(null),t=P.useRef({width:0,height:0}),[n,i]=P.useState(!1),[r,s]=P.useState(!1);P.useEffect(()=>{const h=u(()=>yn.get()==="1","readUnlocked");s(h());const g=u(()=>{s(h())},"onUnlock");if(typeof window<"u")try{window.addEventListener(Un,g)}catch{}return()=>{if(typeof window<"u")try{window.removeEventListener(Un,g)}catch{}}},[]);const a=u(h=>{o.current=h;const g=h.container;if(g){const f=g.getBoundingClientRect();t.current={width:f.width,height:f.height}}ln(h,t.current.width,t.current.height,e)},"handleRuntimeReady"),l=u((h,g,f)=>{t.current={width:h,height:g},o.current=f,ln(f,h,g,e)},"handleResize");P.useEffect(()=>{o.current&&ln(o.current,t.current.width,t.current.height,e)},[e]);const d=P.useCallback(async h=>{var x,T;if(n)return;i(!0);const g=h==="png"?"resume.png":"resume.pdf",f=h==="png"?"image/png":"application/pdf",c=h==="png"?[".png"]:[".pdf"];let y=null;if(rc())try{y=await sc(g,f,c)}catch(k){if((k&&typeof k=="object"&&"name"in k?String(k.name):"")==="AbortError"){i(!1);return}y=null}const m=document.createElement("div"),S=`resume-export-${Math.random().toString(36).slice(2)}`;m.id=S,m.style.position="fixed",m.style.left="-100000px",m.style.top="0",m.style.width=`${je+240}px`,m.style.height="0px",m.style.overflow="hidden",document.body.appendChild(m);const v=u(k=>{try{k==null||k.destroy()}catch{}try{document.body.removeChild(m)}catch{}},"cleanup");try{await lc(),await cc(fc(String(qn)));const k=await Lo.create(S,{renderer:"canvas2d",background:e.background.base,backgroundAlpha:1,resolution:2});await Ql(k,je,0,e),await k.rebuild(),await Ge(),await dc(k,3e3),await k.rebuild(),await Ge();const C=k.getRenderer(),R=((x=C==null?void 0:C.getResolution)==null?void 0:x.call(C))??1,M=k.canvas??((T=C==null?void 0:C.getCanvas)==null?void 0:T.call(C))??null;if(!M){v(k);return}if(h==="png"){const W=await new Promise((N,X)=>{M.toBlob(K=>K?N(K):X(new Error("canvas.toBlob 失败")),"image/png")});await ko(W,g,y),v(k);return}const L=M.width/R,I=M.height/R,D=L*72/96,H=I*72/96,j=M.toDataURL("image/jpeg",.92).split(",")[1]??"",V=nc(j),O=ic({jpeg:V,imageWidth:M.width,imageHeight:M.height,pageWidthPt:D,pageHeightPt:H});await ko(new Blob([O],{type:"application/pdf"}),g,y),v(k)}catch(k){try{const C=k instanceof Error?k.message:"未知错误";Dt.error(`导出失败：${C}`)}catch{}v(null)}finally{i(!1)}},[n,e]);return E.jsxs(E.Fragment,{children:[E.jsx(Et,{style:{width:"100%",height:"100%",overflow:"hidden"},onRuntimeReady:a,onResize:l}),r?E.jsx(tc,{exporting:n,theme:e,onExport:d}):null]})}u(gc,"ResumeDemo");const mc="_toolbar_1klc2_1",pc="_button_1klc2_17",Vo={toolbar:mc,button:pc},Mo=u(({icon:e,tooltip:o,onClick:t,className:n})=>E.jsx(oe,{title:o,children:E.jsx("button",{className:zo(Vo.button,n),onClick:t,type:"button",children:e})}),"ToolbarButton"),yc=u(({onUpdateData:e,onAddRow:o})=>{const t=Tt();return E.jsxs("div",{className:Vo.toolbar,style:{"--border-base":t.border.base,"--background-surface":t.background.surface,"--text-primary":t.text.primary,"--text-secondary":t.text.secondary,"--action-hover":t.primary+"1A","--action-selected":t.primary+"33"},children:[E.jsx(Mo,{icon:E.jsx(Bo,{}),tooltip:"更新数据",onClick:e}),E.jsx(Mo,{icon:E.jsx(Cr,{}),tooltip:"生成大数据 (10k Rows)",onClick:o})]})},"SpreadsheetToolbar"),Sc={key:It.Spreadsheet,label:"电子表格",description:"高性能 Excel 风格表格组件。支持百万级数据虚拟滚动、稀疏矩阵存储、行列调整。"};function bc(){const e=Tt(),[o,t]=P.useState(null),n=P.useRef({width:0,height:0}),[i,r]=P.useState(0),s=P.useMemo(()=>{const g=new kr({...Mr});return g.setCell(0,0,{value:"Item"}),g.setCell(0,1,{value:"Cost"}),g.setCell(0,2,{value:"Price"}),g.setCell(1,0,{value:"Apple"}),g.setCell(1,1,{value:"1.50"}),g.setCell(1,2,{value:"3.00"}),g.setCell(2,0,{value:"Banana"}),g.setCell(2,1,{value:"0.50"}),g.setCell(2,2,{value:"1.00"}),g},[]);P.useEffect(()=>{o&&n.current.width>0&&n.current.height>0&&tn(o,n.current.width,n.current.height,e,s,i)},[e,o,s,i]);const a=P.useCallback(g=>{if(t(g),g.container){const{width:f,height:c}=g.container.getBoundingClientRect();n.current={width:f,height:c},tn(g,f,c,e,s,i)}},[e,s,i]),l=P.useCallback((g,f,c)=>{n.current={width:g,height:f},tn(c,g,f,e,s,i)},[e,s,i]),d=P.useCallback(()=>{for(let g=1;g<10;g++){const f=(Math.random()*5).toFixed(2),c=(parseFloat(f)*2).toFixed(2);s.setCell(g,1,{value:f}),s.setCell(g,2,{value:c})}r(g=>g+1)},[s]),h=P.useCallback(()=>{console.time("Generate Data");for(let g=0;g<1e4;g++){const f=g+10;s.setCell(f,0,{value:`Row ${f}`}),s.setCell(f,1,{value:(Math.random()*100).toFixed(2)}),s.setCell(f,2,{value:(Math.random()*200).toFixed(2)})}console.timeEnd("Generate Data"),r(g=>g+1)},[s]);return E.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%"},children:[E.jsx(yc,{onUpdateData:d,onAddRow:h}),E.jsx(Et,{style:{width:"100%",height:"100%"},onRuntimeReady:a,onResize:l})]})}u(bc,"SpreadsheetDemo");const Ee=u(({title:e,children:o,theme:t})=>$(Q,{spacing:16,mainAxisSize:it.Min,children:[$(Q,{spacing:0,mainAxisSize:it.Min,children:[p(B,{padding:{bottom:8},width:600,children:p(_,{text:e,fontSize:18,fontWeight:"bold",color:t.text.primary},`section-title-${e}`)},`section-header-${e}`),p(B,{width:600,height:1,color:t.border.base},`section-border-${e}`)]},`section-header-wrapper-${e}`),o]},`section-${e}`),"Section"),ee=u(({title:e,children:o,theme:t,width:n=300,autoWidth:i=!1})=>$(Q,{spacing:8,mainAxisSize:it.Min,children:[p(B,{width:i?void 0:n,padding:16,color:t.background.container,borderRadius:8,border:{width:1,color:t.border.base},children:p(ne,{children:o})},`card-bg-${e}`),p(_,{text:e,fontSize:14,color:t.text.primary,textAlign:Bt.Center},`card-title-${e}`)]},`card-${e}`),"DemoCard"),Vi=class Vi extends At{constructor(o){super(o)}render(){const o=this.props.theme||w.light,t=this.props.width,n=this.props.height,i=A(o.text.primary,.06),r=A(o.text.primary,.22),s=A(o.text.primary,.32),a=A(o.text.primary,.44),l=u((d,h=3)=>Array.from({length:h}).map((g,f)=>{const c=[o.primary,o.success,o.warning,o.danger];return p(B,{color:c[f%c.length],children:p(ne,{children:p(_,{text:`Page ${f+1}`,color:o.text.inverse,fontSize:24,fontWeight:"bold"})})},`${d}-page-${f}`)}),"createPages");return p(jt,{width:t,height:n,scrollBarTrackColor:i,scrollBarColor:r,scrollBarHoverColor:s,scrollBarActiveColor:a,children:p(B,{minWidth:t,alignment:"center",color:o.background.base,children:p(ct,{padding:32,children:$(Q,{mainAxisAlignment:wt.Start,crossAxisAlignment:U.Center,spacing:32,mainAxisSize:it.Max,children:[$(Q,{spacing:8,mainAxisSize:it.Min,children:[p(_,{text:"Swiper 轮播组件",fontSize:32,fontWeight:"bold",color:o.text.primary},"title"),p(_,{text:"支持手势滑动、自动播放、无限循环的轮播组件",fontSize:16,color:o.text.secondary},"subtitle")]},"header"),p(Ee,{title:"1. 基础用法 (Basic)",theme:o,children:p(ee,{title:"默认配置 (3页)",theme:o,width:450,children:p(Ut,{items:l("basic"),width:400,height:200,theme:o},"swiper-basic")})}),p(Ee,{title:"2. 自动播放 (Autoplay)",theme:o,children:$(at,{spacing:20,mainAxisSize:it.Min,children:[p(ee,{title:"每2秒切换",theme:o,width:350,children:p(Ut,{items:l("auto-2s"),width:300,height:180,autoplay:!0,interval:2e3,theme:o},"swiper-auto-2s")}),p(ee,{title:"每5秒切换 (慢速)",theme:o,width:350,children:p(Ut,{items:l("auto-5s"),width:300,height:180,autoplay:!0,interval:5e3,theme:o},"swiper-auto-5s")})]})}),p(Ee,{title:"3. 动画时长 (Duration)",theme:o,children:$(at,{spacing:20,mainAxisSize:it.Min,children:[p(ee,{title:"快速切换 (150ms)",theme:o,width:350,children:p(Ut,{items:l("fast"),width:300,height:180,duration:150,theme:o},"swiper-fast")}),p(ee,{title:"慢速切换 (800ms)",theme:o,width:350,children:p(Ut,{items:l("slow"),width:300,height:180,duration:800,theme:o},"swiper-slow")})]})}),p(Ee,{title:"4. 自定义尺寸",theme:o,children:p(ee,{title:"小尺寸 (200x100)",theme:o,width:250,children:p(Ut,{items:l("mini"),width:200,height:100,theme:o},"swiper-mini")})}),p(ct,{padding:[20,0],children:p(_,{text:"End of Demos",fontSize:12,color:o.text.secondary},"footer")})]},"demo-root")})})},"root-scroll-view")}};u(Vi,"SwiperDemoApp");let Zn=Vi;function cn(e,o,t,n){e.render(p(Zn,{width:o,height:t,theme:n}))}u(cn,"runApp$1");const wc={key:It.Swiper,label:"轮播图",description:"高性能手势轮播组件。支持惯性滑动、自动播放和无限循环。"};function vc(){const e=Tt(),o=P.useRef(null),t=P.useRef({width:0,height:0}),n=u(r=>{o.current=r,cn(r,t.current.width,t.current.height,e)},"handleRuntimeReady"),i=u((r,s,a)=>{t.current={width:r,height:s},o.current=a,cn(a,r,s,e)},"handleResize");return P.useEffect(()=>{o.current&&cn(o.current,t.current.width,t.current.height,e)},[e]),E.jsx(Et,{style:{width:"100%",height:"100%"},onRuntimeReady:n,onResize:i})}u(vc,"SwiperDemo");const xc={key:"widget-gallery",label:"部件画廊",description:"核心组件功能展示。包含布局组件(Row, Column, Stack)和基础组件的综合运用效果。"};function Cc(){const e=Tt(),o=P.useRef(null),t=P.useRef({width:0,height:0}),n=u(r=>{o.current=r,en(r,t.current.width,t.current.height,e)},"handleRuntimeReady"),i=u((r,s,a)=>{t.current={width:r,height:s},o.current=a,en(a,r,s,e)},"handleResize");return P.useEffect(()=>{o.current&&en(o.current,t.current.width,t.current.height,e)},[e]),E.jsx(Et,{style:{width:"100%",height:"100%"},onRuntimeReady:n,onResize:i})}u(Cc,"WidgetGalleryDemo");const kc=`# 快速开始

## 目标

用最少的代码把一个多文档的 Wiki 跑起来。

## 约定

- 每个 Markdown 文件代表一篇文档
- 使用文件路径组织目录层级

## 示例

### 新增文件

在 raw 下新增一个文件：

\`\`\`md
# 新文档
\`\`\`

### 刷新

刷新页面即可在左侧看到新增条目。

`,Mc=`# 布局说明

## 两栏布局

整体是左右两栏：

- 左侧：文档树，可展开/收起
- 右侧：文章内容与目录（固定在右侧）

## 分割线拖拽

通过拖拽中间分割线调整左侧宽度，右侧自动自适应剩余空间。

## 标题层级

支持从 H1-H6 提取标题，并在目录中展示层级缩进。

`,Rc=`# Wiki 示例

这是一个基于 Inkwell 的 Wiki Demo，用于展示：

## 目录树

- 左侧是文档树
- 右侧是文章内容

## 文章目录

右侧支持根据标题生成目录，并点击跳转到对应位置。

## 继续扩展

后续可以在 raw 目录中继续增加 Markdown 文件，目录结构会自动出现在左侧文档树中。

`,Tc=`
# Markdown 语法覆盖示例

这是一段普通文本，包含 **加粗**、*斜体*、以及行内代码：\`const a = 1;\`。

## 标题层级

# H1
## H2
### H3
#### H4
##### H5
###### H6

## 列表

### 无序列表

* 条目 1
* 条目 2
    * 子条目 2.1
    * 子条目 2.2

### 有序列表

1. 第一项
2. 第二项
3. 第三项

### 任务列表

- [x] 已完成任务
- [ ] 未完成任务

## 代码

\`\`\`javascript
function hello() {
  console.log("你好，Inkwell！");
}
\`\`\`

\`\`\`python
def greet(name):
    print(f"你好，{name}")
\`\`\`

## 引用

> 这是一段引用。
> 它可以跨越多行。

## 链接与图片

[访问 Google](https://google.com)

![Inkwell Logo](https://via.placeholder.com/150)

## 表格

| 表头 1 | 表头 2 |
| ------ | ------ |
| 单元格 1 | 单元格 2 |
| 单元格 3 | 单元格 4 |

## 分割线

---

结束
`,Ac=`---
title: 又是一年
link: thought_in_2024
date: 2024-12-31
categories: life
---

24年，要比前几年更精彩一点。

## 肚肚和腩腩

本年度最大的收获，没有之一。开年即王！炸！

![心肝宝贝](https://edeity.oss-cn-shenzhen.aliyuncs.com/2024/my_baby.jpg)
<div class="img-desc">炫娃，哎，就是炫！</div>

什么感想，累，是真TM的累！

娃出生的时候，没有任何经验。因为是双胞胎，以及老婆的意愿，所以直接跳过顺产选项，选择剖腹产。通过某平台，约了某主任，排在手术的第一台。八点多进的手术室。丈母娘和她姐姐刚从外地过来，然后说刚进手术室，不知要多久，于是决定去隔壁吃个早餐。前脚刚走，我的脑袋里还在各种求菩萨求耶稣求母子平安，整忐忑着，突然手术室就打开了。说：“哥哥不到5斤，需要进保温箱。妹妹重量够了，送育婴层。然后因为是剖腹产，妈妈需要进ICU观察。需要家属分别陪去三个地方。”

一切发生得太快了，从我老婆进手术室，到手术结束，半个小时不到！我当时就蒙了，我草，我不会影分身啊！赶紧呼叫丈母娘和她姐姐回来。一顿忙，才安顿下来。当时有点生气的。我没经验也就算了，家里两个活宝（指我爸、妈）还在家睡觉，我要是我老婆，不得跳起来骂嫁错人了。

然后是三天的恢复期，术后孩子他妈肚子没有及时消退，以及麻药消去后伤口疼，整个人比较暴躁。那三天每天睡眠时间不到两小时，东跑西跑，腿疼，头疼，全身都不舒服，还要默默忍受老婆的脾气，总感觉快要猝死了。

因为老婆没选择去月子中心坐月子，而是花钱雇了大嫂和她大姐，把主卧和儿童房都占了，我只能睡沙发。然后坐月子的时候，老姐过来过年，感染了不知名病毒，还和我说“去看了医生，医生说没有任何传染性。”结果来了当天就把我给传染了，然后高烧。家里没人顾得上，害怕传给小朋友，都夺得远远的，半夜喉咙疼得睡不着，独自打车去医院挂急诊打吊针，身心被双重暴打。虽然觉得小屁孩很可爱，但那些天“再让我选择，我肯定选择不生，甚至婚都不想结”。所幸熬过来了。

哥哥出生住保温室的时候，感染了某病毒，发烧，要打抗生素。这件事我十分不能理解，怀疑医院的整体消毒有问题。因为从剖腹产到转进保温箱，全在医院医生的操作动线中，实在无法理解哪个途径会感染。后面接哥哥出院，哥哥嗓子都哭哑了，特别瘦，像个糟老头，丑得不想认。现在回想起来，还是很心疼的。导致哥哥在一两个月的时间里，整个人神态都特别怂，特别粘人。幸好大半年过去了，在我们的疼爱下，又变成了一个活宝，大有“三天不打，上房揭瓦”的潜质，这才让我这个老父亲稍微放心一点。

不管怎么着，当爹第一次，娃娃还是很可爱的。

## 裁员 & 再回珠海

年初，飞书出海受挫，疫情协作红利已去。似乎所有人都知道飞书不可能保留那么多的研发，裁员似乎已是板上钉钉的事情，只是不知是何时，多少人。

所以在年前的时候，我已经在默默参加金山的面试。至于为什么是金山，主要还是自从加入字节，在外边漂泊已三年，在字节巨大的内耗环境中，过得并不快乐。何况娃出生，总感觉有需要我的地方。我原是金山的员工，履历尚可，所以金山的面试非常顺利，甚至二面“太熟悉了，直接快进到面评环节”。不过岗位定级没有符合个人期望，所以继续观望。后也推了另外一位同事过去，遗憾的是，同事入职不到两周就跑路了。从这个角度来看，自己确实是渣男，一直把金山当备胎。

扯远了，飞书裁员前两周，基本上所有人都知道即将发生什么事情。领导给另一个小组的同学都放了假。部门在广州的同学，只剩我一个人正常上下班。之所以特殊，是因为当时风声是“保留深圳团队”，我虽在广州，但还为深圳团队服务，所以在裁员名单之外。然而最后一天结果下来，所有广州同学都卷包袱走人，领导也不例外，白上了两周班，哈哈，狗头。

裁员当天，倒也没有什么波澜。+2 在飞书上一个一个把人Call到会议室。到了会议室，HR 也在，说“不好意思，因为公司战略结构调整，你也在调整的名单里。按照正常赔偿，n+1+ 一个月缓冲，如果找到活水就作废，不活水而选择拿完补偿，也可以立马面试字节，不存在半年冷静期。如果没什么疑问，就在这里签字。”因为我本身就做好了回珠海的准备，所以开开心心地签了名字，然后和我的+2握了手。这是我来飞书两年多，第一次见到我的+2。

![赫基](https://edeity.oss-cn-shenzhen.aliyuncs.com/2024/heji.jpg)
<div class="img-desc">离开广州那天烟雨蒙蒙</div>

签完合同，做好活水不成功，即回老东家的准备。不过此时国际电商的 Leader 找了过来，表达国际电商现在 HC 很多，欢迎我们过来。而国际电商的主要 Base 设在珠海，听说做的还是我最熟悉编辑器，以及我在学的 AIGC。我瞬间眼睛发亮，立马开启跪舔模式！经过一顿舔，顺利转岗到珠海。哈哈，塞翁失马，焉知非福。不过来到电商后，又发生了和头条类似的事情，基本上一个Q一个方向，Q2 还是大热门的 AIGC + 编辑器，到了 Q2 底，新的 + 3来了后，直接砍掉，从天堂到地狱连一个 Q 都没挺过去。罢了罢了，又不是第一天知道字节这破事，哎，字节。

## 好好好，做做做，盘盘盘

虽然 AIGC 一直在生与死之间徘徊，甚至有一段时间，研发都撤走了。但截止 24 年年底，乃至2025 年 Q1，AIGC 善能苟住。

我个人来电商，最核心的诉求 是“回珠海”，除此之外，也期望能学习 AIGC 和 英语。不过，刚转电商，立马感受到电商「早上拉会，中午拉会，下午拉会，晚上拉会，半夜拉会」的作风，一时难以适应。以及产品不了解工程的内容，提了一堆无理要求，既要还要，而我比较耿直，说话很冲，和产品也产生了矛盾。

我们的产品其实也是活宝，擅长向上管理，经常上升问题。+1解决不了、就找+2、+2 解决不了，就找+3、+4。看得我一愣一愣的。幸好电商层级还算深，不然怕不是直通汝波。

不过，在一大堆人和事中，从后端 Leader 的言传身教中，也学到了：

1. 要输出自己的专业性，用专业性打动产品
2. 当专业性打动不了产品，就带回，不当场给结论，实事求是去盘

我总结为九字真言：好好好，做做做（态度要好），盘盘盘（最核心的点，不当场给结论）。

## 24年做了啥

简单来说，自研了图文编辑器工具，孵化了 Figma2Json 完整的渲染链路，学会了各种电商的骚操作，投射到 TikTok 跨境电商中，并拿到了一点点业务上的收益，截图如下：

![figma 插件](https://edeity.oss-cn-shenzhen.aliyuncs.com/2024/aigc_figma_plugin_preview.jpg)
<div class="img-desc">偷偷摸摸搞的插件</div>

![编辑器](https://edeity.oss-cn-shenzhen.aliyuncs.com/2024/aigc_editor_preview.jpg)
<div class="img-desc">偷偷摸摸搞的编辑器</div>

## 关于未来

技术虽重要，但不唯一。个人的发展，既需要自身的不懈努力，又和整个社会的发展息息相关。
如今，互联网发展都不明朗，所以也不想发表太大的感言：“不提前消费，多建立自己的人脉关系，然后，开心地活着，就可以了。”
`,Pc=`# Title

Content

`,Lc=`Content

# Title
`;function jo(e){if(typeof e=="string")return e;if(e&&typeof e=="object"&&"default"in e){const o=e.default;if(typeof o=="string")return o;if(o&&typeof o=="object"&&"default"in o){const t=o.default;if(typeof t=="string")return t}}return""}u(jo,"unwrapMarkdownModule");function Yo(e){const o=e.replace(/\\/g,"/"),t="/raw/",n=o.lastIndexOf(t);return(n>=0?o.slice(n+t.length):o.replace(/^(\.\/|\.\.\/)+/,"")).replace(/^raw\//,"").replace(/\.(md|markdown)$/i,"")}u(Yo,"moduleKeyToDocId");function Ic(){try{const e=require.context("../raw",!0,/\.markdown$/),o={};for(const t of e.keys()){const n=Yo(t);o[n]=jo(e(t))}return o}catch{return null}}u(Ic,"loadRawMarkdownByDocKeyFromWebpack");function Fc(e){const o={};for(const[t,n]of Object.entries(e)){const i=Yo(t);o[i]=jo(n)}return o}u(Fc,"loadRawMarkdownByDocKeyFromViteModules");function Dc(e){return Object.fromEntries(Object.entries(e).map(([o,t])=>{const n=ri(t);return[o,n.frontMatter.link||o]}))}u(Dc,"buildDocLinkByKey");function Bc(e){return Object.fromEntries(Object.entries(e).map(([o,t])=>[t,o]))}u(Bc,"buildDocKeyByLink");function zc(e){if(typeof window>"u")return"";const t=new URLSearchParams(window.location.search).get("link")||"";return e[t]||t||""}u(zc,"resolveInitialSelectedKeyFromLocation");const Ec={docs:[{type:"doc",id:"intro",label:"Wiki 示例"},{type:"category",label:"指南",collapsed:!1,items:[{type:"doc",id:"guide/getting-started",label:"快速开始"},{type:"doc",id:"guide/layout",label:"布局说明"}]},{type:"category",label:"示例",collapsed:!1,items:[{type:"doc",id:"sample",label:"Markdown 语法覆盖示例"},{type:"doc",id:"sum-2025",label:"2025 总结"}]},{type:"category",label:"示例 01",collapsed:!1,items:[{type:"doc",id:"test01",label:"Wiki 示例 01"},{type:"doc",id:"test02",label:"Wiki 示例 02"}]}]};function Wc(e){return{scrollBarWidth:6,scrollBarColor:e.text.secondary,padding:12,containerColor:e.background.surface,borderRadius:0,rowHeight:28,rowGap:6,rowRadius:6,basePaddingLeft:8,basePaddingRight:8,indentWidth:12,leafIndentOffset:0,activeRowColor:e.state.selected,inactiveRowColor:"transparent",activeTextColor:e.text.primary,inactiveTextColor:e.text.secondary}}u(Wc,"createUnifiedWikiNavPanelStyle");function Hc(e,o){var i;const t=[];let n=0;for(const r of e.children??[]){if(r.type!==q.Header)continue;const s=r.level??1,a=((i=r.children)==null?void 0:i.map(l=>l.content||"").join(""))||"";t.push({key:`${o}-${n++}`,text:a,level:s})}return t}u(Hc,"collectToc");function Qn(e){return(e.split("/").pop()||e).replace(/\.md$/i,"")}u(Qn,"toTitleFromPath");function Oc(e,o){const t=new Map;for(const r of o)t.set(r.key,r.title);const n=u((r,s)=>`dir:${r}/${s}`,"makeDirKey"),i=u((r,s,a)=>{const l=[];for(const d of r){if(typeof d=="string"){const h=t.get(d)||Qn(d);l.push({key:d,text:h,indentLevel:a});continue}if(d.type==="doc"){const h=d.label||t.get(d.id)||Qn(d.id);l.push({key:d.id,text:h,indentLevel:a});continue}if(d.type==="category"){const h=n(s,d.label);l.push({key:h,text:d.label,indentLevel:a,defaultExpanded:d.collapsed!==!0,children:i(d.items,h,a+1)});continue}}return l},"walk");return i(e,"root",0)}u(Oc,"buildNavNodesFromSidebarItems");function _c(e){const o={key:"root",text:"root",indentLevel:-1,children:[]},t=new Map;t.set("root",o);const n=u((s,a,l)=>{const d=t.get(s);if(d&&d.children)return d;const h={key:s,text:a,indentLevel:l,children:[]};return t.set(s,h),h},"ensureDir"),i=e.slice().sort((s,a)=>s.path.localeCompare(a.path));for(const s of i){const a=s.path.split("/").filter(Boolean);let l="root",d=0;for(let h=0;h<a.length;h++){const g=a[h];if(h===a.length-1){const c=t.get(l);c!=null&&c.children&&c.children.push({key:s.key,text:s.title||Qn(s.path),indentLevel:d})}else{const c=`${l}/${g}`,y=t.get(l),m=n(c,g,d);y!=null&&y.children&&(y.children.some(S=>S.key===c&&S.children)||y.children.push(m)),l=c,d++}}}const r=u(s=>{var a;s.sort((l,d)=>{var f,c;const h=!!((f=l.children)!=null&&f.length),g=!!((c=d.children)!=null&&c.length);return h!==g?h?-1:1:l.text.localeCompare(d.text)});for(const l of s)(a=l.children)!=null&&a.length&&r(l.children)},"sortChildren");return r(o.children),o.children}u(_c,"buildNavNodesFromDocs");function Ro(e,o){let t=e,n=0;for(;t&&t!==o;)n+=t.renderObject.offset.dy||0,t=t.parent;return n}u(Ro,"sumOffsetYUntil");const ji=class ji extends Pt{constructor(o){super(o),this.state=this.getInitialState(o)}};u(ji,"FStateWidget");let Xe=ji;function Nc(e){const o=new Set,t=u((n,i)=>{var r,s;for(const a of n)(r=a.children)!=null&&r.length&&a.defaultExpanded&&o.add(a.key),(s=a.children)!=null&&s.length&&t(a.children)},"walk");return t(e),o}u(Nc,"collectInitialExpandedKeys");function $c(e,o){const t=[],n=u((i,r)=>{var s;for(const a of i){const l=!!((s=a.children)!=null&&s.length),d=l,h=d?o.has(a.key):!0,g=typeof a.indentLevel=="number"?a.indentLevel:r;t.push({node:a,depth:r,indentLevel:g,isDir:l,isToggleableDir:d,isOpen:h}),l&&h&&n(a.children,r+1)}},"walk");return n(e,0),t}u($c,"flattenNodes");const Yi=class Yi extends Xe{constructor(){super(...arguments);b(this,"dragging",!1);b(this,"startClientX",0);b(this,"startWidth",0);b(this,"activePointerId",null);b(this,"windowMoveHandler",null);b(this,"windowUpHandler",null)}getInitialState(t){return{expanded:Nc(t.nodes)}}toggleDir(t){const n=new Set(this.state.expanded);n.has(t)?n.delete(t):n.add(t),this.setState({expanded:n})}attachWindowPointerListeners(t){const n=t;this.activePointerId=typeof(n==null?void 0:n.pointerId)=="number"?n.pointerId:null,this.windowMoveHandler||(this.windowMoveHandler=i=>{if(!this.dragging||this.activePointerId!=null&&i.pointerId!==this.activePointerId||!this.props.resize)return;const r=this.props.resize.onResize,s=this.props.resize.minWidth??240,a=this.props.resize.maxWidth??600,l=i.clientX-this.startClientX,d=Math.max(s,Math.min(a,this.startWidth+l));r(d)}),this.windowUpHandler||(this.windowUpHandler=i=>{this.activePointerId!=null&&i.pointerId!==this.activePointerId||(this.dragging=!1,this.detachWindowPointerListeners())}),window.addEventListener("pointermove",this.windowMoveHandler,{capture:!0}),window.addEventListener("pointerup",this.windowUpHandler,{capture:!0})}detachWindowPointerListeners(){this.windowMoveHandler&&window.removeEventListener("pointermove",this.windowMoveHandler,{capture:!0}),this.windowUpHandler&&window.removeEventListener("pointerup",this.windowUpHandler,{capture:!0}),this.windowMoveHandler=null,this.windowUpHandler=null,this.activePointerId=null}dispose(){this.detachWindowPointerListeners(),super.dispose()}onDividerPointerDown(t){var n;return this.props.resize&&(this.dragging=!0,this.startWidth=this.props.width??0,this.startClientX=t.nativeEvent.clientX||0,this.attachWindowPointerListeners(t.nativeEvent),(n=t.stopPropagation)==null||n.call(t)),!1}render(){const{width:t,height:n,theme:i,title:r,titleGap:s,headerRight:a,activeKey:l,onSelect:d,style:h,scrollRef:g,border:f,leadingDividerWidth:c,leadingDividerColor:y,resize:m}=this.props,S=(h==null?void 0:h.padding)??12,v=(h==null?void 0:h.rowHeight)??28,x=(h==null?void 0:h.rowGap)??6,T=(h==null?void 0:h.rowRadius)??6,k=(h==null?void 0:h.basePaddingLeft)??8,C=(h==null?void 0:h.basePaddingRight)??8,R=(h==null?void 0:h.indentWidth)??12,M=(h==null?void 0:h.leafIndentOffset)??0,L=(h==null?void 0:h.scrollBarColor)??i.text.primary,I=A(L,.06),D=A(L,.22),H=A(L,.32),F=A(L,.44),j=r||a?$(at,{height:24,mainAxisSize:it.Max,mainAxisAlignment:wt.Start,crossAxisAlignment:U.Center,children:[p(zt,{flex:{flex:1},children:p(_,{text:r??"",fontSize:14,fontWeight:"bold",color:i.text.primary})}),a]}):p(B,{}),V=$c(this.props.nodes,this.state.expanded),O=V.some(rt=>rt.isDir&&rt.isToggleableDir),W=c??0,N=m?m.dividerWidth??16:0,X=typeof t=="number"?Math.max(0,t-W-N):void 0,K=typeof X=="number"?Math.max(0,X-S*2):void 0,tt=$(Q,{mainAxisSize:it.Max,spacing:r||a?s??10:0,crossAxisAlignment:U.Stretch,children:[r||a?j:p(B,{}),p(zt,{flex:{flex:1},children:p(jt,{ref:g,scrollBarWidth:(h==null?void 0:h.scrollBarWidth)??6,scrollBarTrackColor:I,scrollBarColor:D,scrollBarHoverColor:H,scrollBarActiveColor:F,children:p(Q,{mainAxisSize:it.Min,spacing:x,children:V.map(rt=>{const dt=!!l&&rt.node.key===l,bt={backgroundColor:dt?(h==null?void 0:h.activeRowColor)??i.state.selected:(h==null?void 0:h.inactiveRowColor)??"transparent",textColor:dt?(h==null?void 0:h.activeTextColor)??i.text.primary:(h==null?void 0:h.inactiveTextColor)??i.text.secondary},ft=k+Math.max(0,rt.indentLevel)*R+(O&&!rt.isDir?M:0),Rt=C;let St="";O&&(rt.isDir&&rt.isToggleableDir?St=rt.isOpen?"▾ ":"▸ ":St="  ");const J=`${St}${rt.node.text}`,ht=u(()=>{if(rt.isDir&&rt.isToggleableDir){this.toggleDir(rt.node.key);return}d&&!rt.isDir&&d(rt.node.key)},"onClick");return p(B,{width:K,height:v,padding:{left:ft,right:Rt},borderRadius:T,color:bt.backgroundColor,cursor:"pointer",onClick:ht,children:p(at,{height:v,mainAxisSize:it.Max,mainAxisAlignment:wt.Start,crossAxisAlignment:U.Center,children:p(_,{text:J,fontSize:14,color:bt.textColor})})})})})})})]}),G=p(ct,{padding:S,children:tt}),ot=W>0||N>0?$(at,{width:t,height:n,crossAxisAlignment:U.Stretch,children:[W>0?p(B,{width:W,height:n,color:y??i.border.base,pointerEvent:"none"}):p(B,{}),p(zt,{flex:{flex:1},children:G}),m?p(B,{width:N,height:n,cursor:"col-resize",color:"transparent",onPointerDown:this.onDividerPointerDown.bind(this),children:p(at,{width:N,height:n,mainAxisSize:it.Max,mainAxisAlignment:wt.Start,crossAxisAlignment:U.Center,children:p(B,{width:1,height:n,color:i.border.base,pointerEvent:"none"})})}):p(B,{})]}):G;return p(B,{width:t,height:n,color:(h==null?void 0:h.containerColor)??i.background.surface,borderRadius:h==null?void 0:h.borderRadius,border:f,children:ot})}};u(Yi,"WikiNavPanel");let Ue=Yi;const Kc=285,To=240,Ao=600,Po=285,hn=16,Vc=new Ke,dn={debounceMs:50,minDurationMs:180,maxDurationMs:480},Gi=class Gi extends Xe{constructor(){super(...arguments);b(this,"scrollView",null);b(this,"scrollViewWidget",null);b(this,"tocScrollView",null);b(this,"contentRoot",null);b(this,"docContentCache",new Map);b(this,"docLoading",new Set);b(this,"cachedDocKey","");b(this,"cachedContent","");b(this,"cachedAst",null);b(this,"cachedToc",[]);b(this,"cachedTocKeyPrefix","");b(this,"tocOffsetCacheKey","");b(this,"tocOffsetKeys",[]);b(this,"tocOffsetYs",[]);b(this,"pendingScrollReset",!1);b(this,"currentScrollY",0);b(this,"anchorScrollDebounceTimer",null);b(this,"anchorScrollAnimationFrame",null);b(this,"anchorScrollSeq",0);b(this,"handleSelect",u(t=>{var n;if(t!==this.state.selectedKey&&(this.pendingScrollReset=!0,this.tocOffsetCacheKey="",this.tocOffsetKeys=[],this.tocOffsetYs=[],this.setState({selectedKey:t,scrollY:0,activeTocKey:""}),this.ensureDocLoaded(t),typeof window<"u")){const i=new URLSearchParams(window.location.search);i.set("tab","wiki"),i.set("link",((n=this.props.docLinkByKey)==null?void 0:n[t])||t);const r=`${window.location.pathname}?${i.toString()}${window.location.hash}`;window.history.replaceState(null,"",r)}},"handleSelect"));b(this,"handleSidebarResize",u(t=>{const n=Math.max(To,Math.min(Ao,t));n!==this.state.sidebarWidth&&this.setState({sidebarWidth:n})},"handleSidebarResize"));b(this,"setScrollViewRef",u(t=>{this.scrollView=to(t),this.scrollViewWidget=t,this.scrollView&&this.pendingScrollReset&&(this.pendingScrollReset=!1,this.scrollView.scrollTo(0,0))},"setScrollViewRef"));b(this,"setTocScrollViewRef",u(t=>{this.tocScrollView=to(t),this.tocScrollView&&this.state.activeTocKey&&this.scrollTocToActive(this.state.activeTocKey)},"setTocScrollViewRef"));b(this,"scrollToAnchor",u(t=>{var d,h;const n=this.contentRoot,i=this.scrollView,r=(h=(d=this.runtime)==null?void 0:d.getRootWidget)==null?void 0:h.call(d);if(!n||!i||!r)return;this.cancelAnchorScroll();const s=this.tocOffsetKeys.indexOf(t);let a=s>=0?this.tocOffsetYs[s]:-1;if(a<0){const g=Vt(r,`#${t}`);if(!g)return;a=this.getAnchorScrollY(g)}const l=this.anchorScrollSeq;this.anchorScrollDebounceTimer=setTimeout(()=>{this.anchorScrollDebounceTimer=null,this.startAnchorScroll(t,a,l)},dn.debounceMs)},"scrollToAnchor"));b(this,"handleContentScroll",u((t,n)=>{this.currentScrollY=n;const i=this.getActiveTocKey(n);i!==this.state.activeTocKey&&(this.setState({activeTocKey:i}),this.scrollTocToActive(i))},"handleContentScroll"))}getInitialState(t){var s;const n=((s=t.docs[0])==null?void 0:s.key)||"",i=t.initialSelectedKey||"";return{selectedKey:i&&t.docs.some(a=>a.key===i)?i:n,scrollY:0,activeTocKey:"",sidebarWidth:Kc,docVersion:0}}ensureDocLoaded(t){t&&(this.docContentCache.has(t)||this.docLoading.has(t)||(this.docLoading.add(t),this.props.loadDoc(t).then(({content:n})=>{this.docContentCache.set(t,n)}).finally(()=>{this.docLoading.delete(t),this.setState({docVersion:this.state.docVersion+1})})))}getDocContent(t){return this.docContentCache.get(t.key)??t.content}getParsedDoc(t){const n=t.key,i=this.getDocContent(t);if(this.cachedDocKey!==n||this.cachedContent!==i||!this.cachedAst){const r=ri(i),s=Vc.parse(r.body),a=`md-${n}-h`,l=Hc(s,a);this.cachedDocKey=n,this.cachedContent=i,this.cachedAst=s,this.cachedTocKeyPrefix=a,this.cachedToc=l,this.tocOffsetCacheKey="",this.tocOffsetKeys=[],this.tocOffsetYs=[]}return{ast:this.cachedAst,toc:this.cachedToc,tocKeyPrefix:this.cachedTocKeyPrefix}}ensureTocOffsets(t){var a,l;if(this.tocOffsetCacheKey===t&&this.tocOffsetKeys.length)return;const n=this.contentRoot,i=(l=(a=this.runtime)==null?void 0:a.getRootWidget)==null?void 0:l.call(a);if(!n||!i)return;const r=[],s=[];for(const d of this.cachedToc){const h=Vt(i,`#${d.key}`);h&&(r.push(d.key),s.push(this.getAnchorScrollY(h)))}this.tocOffsetCacheKey=t,this.tocOffsetKeys=r,this.tocOffsetYs=s}getAnchorScrollY(t){const n=this.scrollViewWidget,i=this.contentRoot;return n?Ro(t,n)+this.currentScrollY:i?Ro(t,i):0}getActiveTocKey(t){var d,h,g,f;const n=this.cachedToc;if(!n.length)return"";const i=this.contentRoot,r=(h=(d=this.runtime)==null?void 0:d.getRootWidget)==null?void 0:h.call(d),s=((f=(g=i==null?void 0:i.renderObject)==null?void 0:g.size)==null?void 0:f.width)??0;if(!i||!r||!Number.isFinite(s)||s<=0)return"";if(this.ensureTocOffsets(`${this.state.selectedKey}-${s}`),this.tocOffsetYs.length){const c=Math.max(0,t+12);let y=0,m=this.tocOffsetYs.length-1,S=-1;for(;y<=m;){const v=y+m>>1;this.tocOffsetYs[v]<=c?(S=v,y=v+1):m=v-1}return S>=0?this.tocOffsetKeys[S]:""}const a=Math.max(0,t+12);let l="";for(const c of n){const y=Vt(r,`#${c.key}`);if(!y)continue;if(this.getAnchorScrollY(y)<=a)l=c.key;else break}return l}scrollTocToActive(t){if(!t)return;const n=this.tocScrollView;if(!n)return;const i=this.cachedToc.findIndex(a=>a.key===t);if(i<0)return;const s=Math.max(0,i*30-120);n.scrollTo(0,s)}cancelAnchorScroll(){this.anchorScrollDebounceTimer&&(clearTimeout(this.anchorScrollDebounceTimer),this.anchorScrollDebounceTimer=null),this.anchorScrollAnimationFrame&&(cancelAnimationFrame(this.anchorScrollAnimationFrame),this.anchorScrollAnimationFrame=null),this.anchorScrollSeq++}getMaxScrollY(){var r,s,a;const t=this.scrollViewWidget,n=((s=(r=t==null?void 0:t.renderObject)==null?void 0:r.size)==null?void 0:s.height)??0,i=((a=t==null?void 0:t._contentSize)==null?void 0:a.height)??0;return!Number.isFinite(n)||!Number.isFinite(i)||n<=0||i<=0?Number.POSITIVE_INFINITY:Math.max(0,i-n)}computeAnchorTargetY(t){const n=this.getMaxScrollY(),i=Math.max(0,t);return Math.min(i,n)}startAnchorScroll(t,n,i){const r=this.scrollView;if(!r||i!==this.anchorScrollSeq)return;const s=Number.isFinite(this.currentScrollY)?this.currentScrollY:0,a=this.computeAnchorTargetY(n),l=Math.abs(a-s),d=Math.max(dn.minDurationMs,Math.min(dn.maxDurationMs,l*.6));if(l<.5||d<=0){r.scrollTo(0,a),this.currentScrollY=a;const f=this.getActiveTocKey(a)||t;this.setState({scrollY:a,activeTocKey:f}),this.scrollTocToActive(f);return}const h=Date.now(),g=u(()=>{if(i!==this.anchorScrollSeq)return;const f=(Date.now()-h)/d;if(f>=1){r.scrollTo(0,a),this.currentScrollY=a;const m=this.getActiveTocKey(a)||t;this.setState({scrollY:a,activeTocKey:m}),this.scrollTocToActive(m),this.anchorScrollAnimationFrame=null;return}const c=Rr(Math.max(0,Math.min(1,f))),y=s+(a-s)*c;r.scrollTo(0,y),this.currentScrollY=y,this.anchorScrollAnimationFrame=requestAnimationFrame(g)},"tick");this.anchorScrollAnimationFrame&&(cancelAnimationFrame(this.anchorScrollAnimationFrame),this.anchorScrollAnimationFrame=null),this.anchorScrollAnimationFrame=requestAnimationFrame(g)}render(){const{width:t,height:n,theme:i,docs:r}=this.props,{selectedKey:s}=this.state,a=this.state.sidebarWidth,l=Math.max(0,t-a-hn-Po),d=Wc(i),h=d,g=A(i.text.primary,.06),f=A(i.text.primary,.22),c=A(i.text.primary,.32),y=A(i.text.primary,.44),m=r.find(R=>R.key===s)||r[0]||null;m&&this.ensureDocLoaded(m.key);const S=m?this.getDocContent(m):"",v=!!m&&(this.docContentCache.has(m.key)||m.content.length>0),x=m&&v?this.getParsedDoc(m):null,T=r.map(R=>({key:R.key,title:R.title,path:R.path})),k=this.props.sidebarItems&&this.props.sidebarItems.length?Oc(this.props.sidebarItems,T):_c(T),C=x&&S?x.toc.map(R=>({key:R.key,text:R.text,indentLevel:Math.max(0,R.level-1)})):[];return p(B,{width:t,height:n,color:i.background.surface,children:m?$(at,{width:t,height:n,mainAxisSize:it.Max,mainAxisAlignment:wt.Start,crossAxisAlignment:U.Stretch,children:[p(Ue,{width:a+hn,height:n,theme:i,nodes:k,activeKey:s||"",onSelect:this.handleSelect,style:h,resize:{dividerWidth:hn,minWidth:To,maxWidth:Ao,onResize:this.handleSidebarResize}}),p(zt,{flex:{flex:1},children:p(B,{width:l,height:n,color:i.background.surface,children:p(ct,{padding:24,children:v?p(jt,{ref:this.setScrollViewRef,onScroll:this.handleContentScroll,scrollBarTrackColor:g,scrollBarColor:f,scrollBarHoverColor:c,scrollBarActiveColor:y,children:p(at,{mainAxisSize:it.Max,mainAxisAlignment:wt.Center,crossAxisAlignment:U.Start,children:p(B,{width:Math.min(Math.max(0,l-24*2-20*2),900),color:i.background.container,borderRadius:8,margin:{bottom:28},children:p(ct,{padding:20,children:p(B,{ref:u(R=>this.contentRoot=R,"ref"),children:p(Ce,{theme:i,content:S,ast:x==null?void 0:x.ast,headerKeyPrefix:x==null?void 0:x.tocKeyPrefix},`md-${m.key}`)})})})})},`md-${m.key}-sv`):p(B,{width:l,height:Math.max(0,n-24*2),alignment:"center",color:i.background.surface,children:p(_,{text:"正在加载文档",fontSize:14,color:i.text.secondary})})})})}),p(Ue,{width:Po,height:n,theme:i,nodes:C,title:"目录",titleGap:10,activeKey:this.state.activeTocKey,onSelect:this.scrollToAnchor,scrollRef:this.setTocScrollViewRef,style:d,leadingDividerWidth:1,leadingDividerColor:i.border.base})]}):p(B,{width:t,height:n,alignment:"center",children:p(_,{text:"未选择文档",fontSize:14,color:i.text.secondary})})})}};u(Gi,"WikiApp");let ti=Gi;const Go=Ec.docs,jc=fl(Go).map(e=>({key:e.id,path:e.id,title:e.title,content:""})),Yc=Ic();function un(e,o,t,n,i){const r=Yc??(i!=null&&i.rawModules?Fc(i.rawModules):null),s=r?Dc(r):{},a=Bc(s),l=zc(a),d=u(async h=>{const g=(r==null?void 0:r[h])??"";return{content:String(g)}},"loadDoc");e.render(p(ti,{width:o,height:t,theme:n||w.light,docs:jc,loadDoc:d,sidebarItems:Go,initialSelectedKey:l,docLinkByKey:s}))}u(un,"runApp");const Gc={key:It.Wiki,label:"Wiki",description:"基于 Inkwell 的多文档 Markdown Wiki。"},fn=Object.assign({"./raw/guide/getting-started.markdown":kc,"./raw/guide/layout.markdown":Mc,"./raw/intro.markdown":Rc,"./raw/sample.markdown":Tc,"./raw/sum-2025.markdown":Ac,"./raw/test01.markdown":Pc,"./raw/test02.markdown":Lc});function Xc(){const e=Tt(),o=P.useRef(null),t=P.useRef({width:0,height:0}),n=u(r=>{o.current=r,un(r,t.current.width,t.current.height,e,{rawModules:fn})},"handleRuntimeReady"),i=u((r,s,a)=>{t.current={width:r,height:s},o.current=a,un(a,r,s,e,{rawModules:fn})},"handleResize");return P.useEffect(()=>{o.current&&un(o.current,t.current.width,t.current.height,e,{rawModules:fn})},[e]),E.jsx(Et,{style:{width:"100%",height:"100%",overflow:"hidden"},onRuntimeReady:n,onResize:i,padding:0})}u(Xc,"WikiDemo");function Qc(){const e=P.useRef(null),[o,t]=P.useState(()=>{const h=new URLSearchParams(window.location.search).get("tab");return h&&Object.values(It).includes(h)?h:It.Wiki}),[n,i]=P.useState(()=>ei()==="dark"?Gt.Dark:Gt.Light),[r,s]=P.useState(()=>eo()),a=u(d=>{t(d);const h=new URL(window.location.href);h.searchParams.set("tab",d),window.history.pushState({},"",h.toString())},"handleTabChange");P.useEffect(()=>{const d=u(()=>{const g=new URLSearchParams(window.location.search).get("tab");g&&Object.values(It).includes(g)&&t(g)},"handlePopState");return window.addEventListener("popstate",d),()=>window.removeEventListener("popstate",d)},[]),P.useEffect(()=>{const d=e.current;if(!d)return;const h=u(f=>{let c=f??null;for(;c&&c!==d;){try{const m=window.getComputedStyle(c).overflowX;if((m==="auto"||m==="scroll")&&c.scrollWidth>c.clientWidth)return!0}catch{}c=c.parentElement}return!1},"allowHorizontalWheel"),g=u(f=>{f.ctrlKey||f.metaKey||h(f.target)||Math.abs(f.deltaX)>Math.abs(f.deltaY)&&Math.abs(f.deltaX)>0&&f.preventDefault()},"onWheel");return d.addEventListener("wheel",g,{passive:!1}),()=>{d.removeEventListener("wheel",g)}},[]),P.useEffect(()=>Tr((d,h)=>{i(h==="dark"?Gt.Dark:Gt.Light),s(eo())}),[]);const l=P.useMemo(()=>[{Component:Fa,...Ia},{Component:ds,...hs},{Component:Cc,...xc},{Component:os,...is},{Component:vc,...wc},{Component:va,...wa},{Component:ul,...dl},{Component:bc,...Sc},{Component:Xc,...Gc},{Component:gc,...ec}],[]);return E.jsx(Dr,{theme:{algorithm:n===Gt.Dark?io.darkAlgorithm:io.defaultAlgorithm,token:{colorPrimary:"var(--ink-demo-primary)",colorSuccess:"var(--ink-demo-success)",colorWarning:"var(--ink-demo-warning)",colorError:"var(--ink-demo-danger)",colorText:"var(--ink-demo-text-primary)",colorTextSecondary:"var(--ink-demo-text-secondary)",colorBgBase:"var(--ink-demo-bg-base)",colorBgContainer:"var(--ink-demo-bg-container)",colorBorder:"var(--ink-demo-border)"}},children:E.jsx("div",{ref:e,className:zo(_t.container,{[_t.dark]:n===Gt.Dark}),children:E.jsx("div",{className:_t.frame,children:E.jsx(Ar,{className:_t.tabs,activeKey:o,onChange:a,destroyOnHidden:!0,tabBarExtraContent:{right:E.jsxs("div",{className:_t.tabExtra,children:[E.jsx("span",{className:_t.tabExtraLabel,children:"配色"}),E.jsx(Pr,{value:r,onChange:u(d=>{const h=d;s(h),Lr(h)},"onChange"),options:Object.keys(no).map(d=>({label:no[d],value:d})),className:_t.presetSelect})]})},items:l.map(d=>({key:d.key,label:d.label,children:E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:_t.description,children:[E.jsx("h3",{children:d.label}),E.jsx("p",{children:d.description})]}),E.jsx("div",{className:_t.demoWrap,children:E.jsx(d.Component,{})})]})}))})})})})}u(Qc,"UnifiedDemo");export{Qc as default};
