import{_ as r,C as a,c as i,o as l,j as t,G as c,ai as n,a as e}from"./chunks/framework.Ckc8SVM3.js";const I=JSON.parse('{"title":"Viewport","description":"","frontmatter":{"title":"Viewport"},"headers":[],"relativePath":"docs/api/widgets/Viewport.md","filePath":"docs/api/widgets/Viewport.md"}'),s={name:"docs/api/widgets/Viewport.md"};function h(b,d,g,u,m,p){const o=a("InkCodeBlock");return l(),i("div",null,[d[0]||(d[0]=t("p",null,[e("核心用途："),t("code",null,"Viewport"),e(" 是一个提供底层视口变换逻辑（缩放、平移）和坐标转换能力的核心组件，适用于需要自定义视口行为的场景（如无限画布、图表、地图等）。它不包含滚动条或裁剪逻辑，而是专注于视图矩阵的管理。")],-1)),d[1]||(d[1]=t("h2",{id:"如何引入",tabindex:"-1"},[e("如何引入 "),t("a",{class:"header-anchor",href:"#如何引入","aria-label":'Permalink to "如何引入"'},"​")],-1)),c(o,{"code-base64":"aW1wb3J0IHsgVmlld3BvcnQgfSBmcm9tICdAL2NvcmUnOwo=",lang:"typescript",meta:""}),d[2]||(d[2]=t("h2",{id:"示例",tabindex:"-1"},[e("示例 "),t("a",{class:"header-anchor",href:"#示例","aria-label":'Permalink to "示例"'},"​")],-1)),d[3]||(d[3]=t("h3",{id:"_1-基础视口-basic-viewport",tabindex:"-1"},[e("1. 基础视口 (Basic Viewport) "),t("a",{class:"header-anchor",href:"#_1-基础视口-basic-viewport","aria-label":'Permalink to "1. 基础视口 (Basic Viewport)"'},"​")],-1)),d[4]||(d[4]=t("p",null,"创建一个可缩放和平移的视口容器。",-1)),c(o,{"code-base64":"LyoqIEBqc3hJbXBvcnRTb3VyY2UgQC91dGlscy9jb21waWxlciAqLwooKCkgPT4gewogIGNvbnN0IHRoZW1lID0gZ2V0Q3VycmVudFRoZW1lKCk7CiAgcmV0dXJuICgKICAgIDxWaWV3cG9ydAogICAgICB3aWR0aD17NDAwfQogICAgICBoZWlnaHQ9ezMwMH0KICAgICAgc2NhbGU9ezEuMH0KICAgICAgbWluU2NhbGU9ezAuNX0KICAgICAgbWF4U2NhbGU9ezMuMH0KICAgICAgdHg9ezB9CiAgICAgIHR5PXswfQogICAgPgogICAgICA8Q29udGFpbmVyIHdpZHRoPXsyMDB9IGhlaWdodD17MjAwfSBjb2xvcj17dGhlbWUuZGFuZ2VyfT4KICAgICAgICA8Q2VudGVyPgogICAgICAgICAgPFRleHQgdGV4dD0iU2NhbGFibGUgQ29udGVudCIgY29sb3I9e3RoZW1lLnRleHQuaW52ZXJzZX0gLz4KICAgICAgICA8L0NlbnRlcj4KICAgICAgPC9Db250YWluZXI+CiAgICA8L1ZpZXdwb3J0PgogICk7Cn0pKCkK",lang:"tsx",meta:"mode:edit"}),d[5]||(d[5]=n('<h2 id="api-文档" tabindex="-1">API 文档 <a class="header-anchor" href="#api-文档" aria-label="Permalink to &quot;API 文档&quot;">​</a></h2><h3 id="viewportprops" tabindex="-1">ViewportProps <a class="header-anchor" href="#viewportprops" aria-label="Permalink to &quot;ViewportProps&quot;">​</a></h3><table tabindex="0"><thead><tr><th>属性名</th><th>类型</th><th>必填</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>width</code></td><td><code>number</code></td><td>否</td><td>-</td><td>视口宽度。</td></tr><tr><td><code>height</code></td><td><code>number</code></td><td>否</td><td>-</td><td>视口高度。</td></tr><tr><td><code>scale</code></td><td><code>number</code></td><td>否</td><td><code>1</code></td><td>初始缩放比例。</td></tr><tr><td><code>tx</code></td><td><code>number</code></td><td>否</td><td><code>0</code></td><td>初始 X 轴平移偏移。</td></tr><tr><td><code>ty</code></td><td><code>number</code></td><td>否</td><td><code>0</code></td><td>初始 Y 轴平移偏移。</td></tr><tr><td><code>scrollX</code></td><td><code>number</code></td><td>否</td><td><code>0</code></td><td>初始 X 轴滚动位置。</td></tr><tr><td><code>scrollY</code></td><td><code>number</code></td><td>否</td><td><code>0</code></td><td>初始 Y 轴滚动位置。</td></tr><tr><td><code>minScale</code></td><td><code>number</code></td><td>否</td><td><code>0.1</code></td><td>最小缩放比例。</td></tr><tr><td><code>maxScale</code></td><td><code>number</code></td><td>否</td><td><code>10</code></td><td>最大缩放比例。</td></tr><tr><td><code>onViewChange</code></td><td><code>(view: { scale, tx, ty }) =&gt; void</code></td><td>否</td><td>-</td><td>视口变换（缩放/平移）时的回调。</td></tr><tr><td><code>onScroll</code></td><td><code>(x, y) =&gt; void</code></td><td>否</td><td>-</td><td>滚动位置变化时的回调。</td></tr><tr><td><code>onZoomAt</code></td><td><code>(scale, cx, cy) =&gt; void</code></td><td>否</td><td>-</td><td>指定中心点缩放时的回调。</td></tr></tbody></table><h3 id="实例方法-methods" tabindex="-1">实例方法 (Methods) <a class="header-anchor" href="#实例方法-methods" aria-label="Permalink to &quot;实例方法 (Methods)&quot;">​</a></h3><p>可以通过组件实例调用以下方法来控制视口。</p><table tabindex="0"><thead><tr><th>方法名</th><th>参数</th><th>返回值</th><th>说明</th></tr></thead><tbody><tr><td><code>setScale</code></td><td><code>(scale: number)</code></td><td><code>void</code></td><td>设置缩放比例（保持当前平移）。</td></tr><tr><td><code>setTransform</code></td><td><code>(scale: number, tx: number, ty: number)</code></td><td><code>void</code></td><td>同时设置缩放和平移。</td></tr><tr><td><code>zoomIn</code></td><td><code>()</code></td><td><code>void</code></td><td>以视口中心为原点放大（默认系数 1.2）。</td></tr><tr><td><code>zoomOut</code></td><td><code>()</code></td><td><code>void</code></td><td>以视口中心为原点缩小（默认系数 1.2）。</td></tr><tr><td><code>zoomAt</code></td><td><code>(scale: number, cx: number, cy: number)</code></td><td><code>void</code></td><td>以指定坐标 <code>(cx, cy)</code> 为中心进行缩放。</td></tr><tr><td><code>resetZoom</code></td><td><code>()</code></td><td><code>void</code></td><td>重置缩放比例为 1。</td></tr><tr><td><code>getWorldXY</code></td><td><code>(event: { x: number, y: number })</code></td><td><code>{ x, y }</code></td><td>将屏幕/事件坐标转换为视口内的世界坐标（内容坐标）。</td></tr></tbody></table><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><h3 id="_1-坐标系统" tabindex="-1">1. 坐标系统 <a class="header-anchor" href="#_1-坐标系统" aria-label="Permalink to &quot;1. 坐标系统&quot;">​</a></h3><p><code>Viewport</code> 维护了一个变换矩阵 (<code>_worldMatrix</code>)。</p><ul><li><strong>Screen Coordinate</strong>: 屏幕上的物理坐标。</li><li><strong>World Coordinate (Local)</strong>: 经过缩放和平移后的内容坐标。</li><li><code>getWorldXY</code> 方法可用于处理点击事件，将屏幕点击位置转换为内容中的实际位置。这是实现交互式画布（如拖拽、点击选中）的关键。</li></ul><h3 id="_2-性能优化" tabindex="-1">2. 性能优化 <a class="header-anchor" href="#_2-性能优化" aria-label="Permalink to &quot;2. 性能优化&quot;">​</a></h3><ul><li>尽量避免在 <code>onViewChange</code> 回调中执行昂贵的计算，因为缩放和平移操作可能会高频触发（每帧）。</li><li>对于极其复杂的场景，可以结合 <code>RepaintBoundary</code> (如果框架支持) 来缓存视口内容的绘制结果。</li></ul><h3 id="_3-常见问题" tabindex="-1">3. 常见问题 <a class="header-anchor" href="#_3-常见问题" aria-label="Permalink to &quot;3. 常见问题&quot;">​</a></h3><ul><li><strong>点击坐标不对？</strong> 默认的点击事件坐标是屏幕坐标。在 <code>Viewport</code> 内部处理交互时，必须使用 <code>getWorldXY</code> 或组件自身的 <code>globalToLocal</code> 进行转换，否则缩放后位置会偏移。</li><li><strong>内容被遮挡？</strong> <code>Viewport</code> 默认不裁剪溢出内容。如果需要裁剪，请在外层包裹 <code>ClipRect</code> 或使用 <code>ScrollView</code>。</li></ul>',14))])}const A=r(s,[["render",h]]);export{I as __pageData,A as default};
